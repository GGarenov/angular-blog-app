"use strict";(self.webpackChunkblog_app=self.webpackChunkblog_app||[]).push([[179],{58:(gs,Zn,Qe)=>{Qe.d(Zn,{BH:()=>Rt,G6:()=>ha,L:()=>ut,LL:()=>j,Pz:()=>It,Sg:()=>wr,UG:()=>Lt,ZB:()=>be,ZR:()=>ue,aH:()=>Qt,b$:()=>Wt,eu:()=>U,hl:()=>F,jU:()=>re,m9:()=>vs,ne:()=>yi,pd:()=>Io,r3:()=>jn,ru:()=>sn,tV:()=>J,uI:()=>In,vZ:()=>vo,w1:()=>mi,xO:()=>Eo,xb:()=>ni,z$:()=>Oe,zd:()=>ms});const B=function(b){const D=[];let S=0;for(let Q=0;Q<b.length;Q++){let M=b.charCodeAt(Q);M<128?D[S++]=M:M<2048?(D[S++]=M>>6|192,D[S++]=63&M|128):55296==(64512&M)&&Q+1<b.length&&56320==(64512&b.charCodeAt(Q+1))?(M=65536+((1023&M)<<10)+(1023&b.charCodeAt(++Q)),D[S++]=M>>18|240,D[S++]=M>>12&63|128,D[S++]=M>>6&63|128,D[S++]=63&M|128):(D[S++]=M>>12|224,D[S++]=M>>6&63|128,D[S++]=63&M|128)}return D},rn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(b,D){if(!Array.isArray(b))throw Error("encodeByteArray takes an array as a parameter");this.init_();const S=D?this.byteToCharMapWebSafe_:this.byteToCharMap_,Q=[];for(let M=0;M<b.length;M+=3){const H=b[M],xe=M+1<b.length,Dt=xe?b[M+1]:0,Ge=M+2<b.length,xn=Ge?b[M+2]:0;let pn=(15&Dt)<<2|xn>>6,Mt=63&xn;Ge||(Mt=64,xe||(pn=64)),Q.push(S[H>>2],S[(3&H)<<4|Dt>>4],S[pn],S[Mt])}return Q.join("")},encodeString(b,D){return this.HAS_NATIVE_SUPPORT&&!D?btoa(b):this.encodeByteArray(B(b),D)},decodeString(b,D){return this.HAS_NATIVE_SUPPORT&&!D?atob(b):function(b){const D=[];let S=0,Q=0;for(;S<b.length;){const M=b[S++];if(M<128)D[Q++]=String.fromCharCode(M);else if(M>191&&M<224){const H=b[S++];D[Q++]=String.fromCharCode((31&M)<<6|63&H)}else if(M>239&&M<365){const Ge=((7&M)<<18|(63&b[S++])<<12|(63&b[S++])<<6|63&b[S++])-65536;D[Q++]=String.fromCharCode(55296+(Ge>>10)),D[Q++]=String.fromCharCode(56320+(1023&Ge))}else{const H=b[S++],xe=b[S++];D[Q++]=String.fromCharCode((15&M)<<12|(63&H)<<6|63&xe)}}return D.join("")}(this.decodeStringToByteArray(b,D))},decodeStringToByteArray(b,D){this.init_();const S=D?this.charToByteMapWebSafe_:this.charToByteMap_,Q=[];for(let M=0;M<b.length;){const H=S[b.charAt(M++)],Dt=M<b.length?S[b.charAt(M)]:0;++M;const xn=M<b.length?S[b.charAt(M)]:64;++M;const Ie=M<b.length?S[b.charAt(M)]:64;if(++M,null==H||null==Dt||null==xn||null==Ie)throw new fn;Q.push(H<<2|Dt>>4),64!==xn&&(Q.push(Dt<<4&240|xn>>2),64!==Ie&&Q.push(xn<<6&192|Ie))}return Q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let b=0;b<this.ENCODED_VALS.length;b++)this.byteToCharMap_[b]=this.ENCODED_VALS.charAt(b),this.charToByteMap_[this.byteToCharMap_[b]]=b,this.byteToCharMapWebSafe_[b]=this.ENCODED_VALS_WEBSAFE.charAt(b),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[b]]=b,b>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(b)]=b,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(b)]=b)}}};class fn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ut=function(b){return function(b){const D=B(b);return rn.encodeByteArray(D,!0)}(b).replace(/\./g,"")},J=function(b){try{return rn.decodeString(b,!0)}catch(D){console.error("base64Decode failed: ",D)}return null};function be(b,D){if(!(D instanceof Object))return D;switch(D.constructor){case Date:return new Date(D.getTime());case Object:void 0===b&&(b={});break;case Array:b=[];break;default:return D}for(const S in D)!D.hasOwnProperty(S)||!st(S)||(b[S]=be(b[S],D[S]));return b}function st(b){return"__proto__"!==b}const Xe=()=>{try{return function _t(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const b=process.env.__FIREBASE_DEFAULTS__;return b?JSON.parse(b):void 0})()||(()=>{if(typeof document>"u")return;let b;try{b=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const D=b&&J(b[1]);return D&&JSON.parse(D)})()}catch(b){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${b}`)}},Qt=()=>{var b;return null===(b=Xe())||void 0===b?void 0:b.config},It=b=>{var D;return null===(D=Xe())||void 0===D?void 0:D[`_${b}`]};class Rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((D,S)=>{this.resolve=D,this.reject=S})}wrapCallback(D){return(S,Q)=>{S?this.reject(S):this.resolve(Q),"function"==typeof D&&(this.promise.catch(()=>{}),1===D.length?D(S):D(S,Q))}}}function wr(b,D){if(b.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Q=D||"demo-project",M=b.iat||0,H=b.sub||b.user_id;if(!H)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xe=Object.assign({iss:`https://securetoken.google.com/${Q}`,aud:Q,iat:M,exp:M+3600,auth_time:M,sub:H,user_id:H,firebase:{sign_in_provider:"custom",identities:{}}},b);return[ut(JSON.stringify({alg:"none",type:"JWT"})),ut(JSON.stringify(xe)),""].join(".")}function Oe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function In(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function Lt(){var b;const D=null===(b=Xe())||void 0===b?void 0:b.forceEnvironment;if("node"===D)return!0;if("browser"===D)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function re(){return"object"==typeof self&&self.self===self}function sn(){const b="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof b&&void 0!==b.id}function Wt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function mi(){const b=Oe();return b.indexOf("MSIE ")>=0||b.indexOf("Trident/")>=0}function ha(){return!Lt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F(){try{return"object"==typeof indexedDB}catch{return!1}}function U(){return new Promise((b,D)=>{try{let S=!0;const Q="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(Q);M.onsuccess=()=>{M.result.close(),S||self.indexedDB.deleteDatabase(Q),b(!0)},M.onupgradeneeded=()=>{S=!1},M.onerror=()=>{var H;D((null===(H=M.error)||void 0===H?void 0:H.message)||"")}}catch(S){D(S)}})}class ue extends Error{constructor(D,S,Q){super(S),this.code=D,this.customData=Q,this.name="FirebaseError",Object.setPrototypeOf(this,ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,j.prototype.create)}}class j{constructor(D,S,Q){this.service=D,this.serviceName=S,this.errors=Q}create(D,...S){const Q=S[0]||{},M=`${this.service}/${D}`,H=this.errors[D],xe=H?function oe(b,D){return b.replace(lt,(S,Q)=>{const M=D[Q];return null!=M?String(M):`<${Q}?>`})}(H,Q):"Error";return new ue(M,`${this.serviceName}: ${xe} (${M}).`,Q)}}const lt=/\{\$([^}]+)}/g;function jn(b,D){return Object.prototype.hasOwnProperty.call(b,D)}function ni(b){for(const D in b)if(Object.prototype.hasOwnProperty.call(b,D))return!1;return!0}function vo(b,D){if(b===D)return!0;const S=Object.keys(b),Q=Object.keys(D);for(const M of S){if(!Q.includes(M))return!1;const H=b[M],xe=D[M];if(An(H)&&An(xe)){if(!vo(H,xe))return!1}else if(H!==xe)return!1}for(const M of Q)if(!S.includes(M))return!1;return!0}function An(b){return null!==b&&"object"==typeof b}function Eo(b){const D=[];for(const[S,Q]of Object.entries(b))Array.isArray(Q)?Q.forEach(M=>{D.push(encodeURIComponent(S)+"="+encodeURIComponent(M))}):D.push(encodeURIComponent(S)+"="+encodeURIComponent(Q));return D.length?"&"+D.join("&"):""}function ms(b){const D={};return b.replace(/^\?/,"").split("&").forEach(Q=>{if(Q){const[M,H]=Q.split("=");D[decodeURIComponent(M)]=decodeURIComponent(H)}}),D}function Io(b){const D=b.indexOf("?");if(!D)return"";const S=b.indexOf("#",D);return b.substring(D,S>0?S:void 0)}function yi(b,D){const S=new Oi(b,D);return S.subscribe.bind(S)}class Oi{constructor(D,S){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=S,this.task.then(()=>{D(this)}).catch(Q=>{this.error(Q)})}next(D){this.forEachObserver(S=>{S.next(D)})}error(D){this.forEachObserver(S=>{S.error(D)}),this.close(D)}complete(){this.forEachObserver(D=>{D.complete()}),this.close()}subscribe(D,S,Q){let M;if(void 0===D&&void 0===S&&void 0===Q)throw new Error("Missing Observer.");M=function _s(b,D){if("object"!=typeof b||null===b)return!1;for(const S of D)if(S in b&&"function"==typeof b[S])return!0;return!1}(D,["next","error","complete"])?D:{next:D,error:S,complete:Q},void 0===M.next&&(M.next=Kt),void 0===M.error&&(M.error=Kt),void 0===M.complete&&(M.complete=Kt);const H=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),H}unsubscribeOne(D){void 0===this.observers||void 0===this.observers[D]||(delete this.observers[D],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(D){if(!this.finalized)for(let S=0;S<this.observers.length;S++)this.sendOne(S,D)}sendOne(D,S){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[D])try{S(this.observers[D])}catch(Q){typeof console<"u"&&console.error&&console.error(Q)}})}close(D){this.finalized||(this.finalized=!0,void 0!==D&&(this.finalError=D),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kt(){}function vs(b){return b&&b._delegate?b._delegate:b}},272:(gs,Zn,Qe)=>{function w(n){return"function"==typeof n}function Ue(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Ce=Ue(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function B(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class mt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(w(r))try{r()}catch(s){e=s instanceof Ce?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Qn(s)}catch(o){e=e??[],o instanceof Ce?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ce(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Qn(e);else{if(e instanceof mt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&B(t,e)}remove(e){const{_finalizers:t}=this;t&&B(t,e),e instanceof mt&&e._removeParent(this)}}mt.EMPTY=(()=>{const n=new mt;return n.closed=!0,n})();const rn=mt.EMPTY;function fn(n){return n instanceof mt||n&&"closed"in n&&w(n.remove)&&w(n.add)&&w(n.unsubscribe)}function Qn(n){w(n)?n():n.unsubscribe()}const ut={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},J={setTimeout(n,e,...t){const{delegate:r}=J;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=J;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function se(n){J.setTimeout(()=>{const{onUnhandledError:e}=ut;if(!e)throw n;e(n)})}function be(){}const st=Et("C",void 0,void 0);function Et(n,e,t){return{kind:n,value:e,error:t}}let He=null;function Xe(n){if(ut.useDeprecatedSynchronousErrorHandling){const e=!He;if(e&&(He={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=He;if(He=null,t)throw r}}else n()}class Xn extends mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,fn(e)&&e.add(this)):this.destination=re}static create(e,t,r){return new wr(e,t,r)}next(e){this.isStopped?Lt(function Yn(n){return Et("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Lt(function _t(n){return Et("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Lt(st,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qt=Function.prototype.bind;function It(n,e){return Qt.call(n,e)}class Rt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Oe(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Oe(r)}else Oe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Oe(t)}}}class wr extends Xn{constructor(e,t,r){let i;if(super(),w(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ut.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&It(e.next,s),error:e.error&&It(e.error,s),complete:e.complete&&It(e.complete,s)}):i=e}this.destination=new Rt(i)}}function Oe(n){ut.useDeprecatedSynchronousErrorHandling?function Jn(n){ut.useDeprecatedSynchronousErrorHandling&&He&&(He.errorThrown=!0,He.error=n)}(n):se(n)}function Lt(n,e){const{onStoppedNotification:t}=ut;t&&J.setTimeout(()=>t(n,e))}const re={closed:!0,next:be,error:function In(n){throw n},complete:be},sn="function"==typeof Symbol&&Symbol.observable||"@@observable";function Wt(n){return n}function mi(n){return 0===n.length?Wt:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let dt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function F(n){return n&&n instanceof Xn||function ha(n){return n&&w(n.next)&&w(n.error)&&w(n.complete)}(n)&&fn(n)}(t)?t:new wr(t,r,i);return Xe(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=yo(r))((i,s)=>{const o=new wr({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[sn](){return this}pipe(...t){return mi(t)(this)}toPromise(t){return new(t=yo(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function yo(n){var e;return null!==(e=n??ut.Promise)&&void 0!==e?e:Promise}const U=Ue(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let L=(()=>{class n extends dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new G(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new U}next(t){Xe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Xe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Xe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?rn:(this.currentObservers=null,s.push(t),new mt(()=>{this.currentObservers=null,B(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new dt;return t.source=this,t}}return n.create=(e,t)=>new G(e,t),n})();class G extends L{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:rn}}function ue(n){return w(n?.lift)}function j(n){return e=>{if(ue(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(n,e,t,r,i){return new lt(n,e,t,r,i)}class lt extends Xn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ae(n,e){return j((t,r)=>{let i=0;t.subscribe(oe(r,s=>{r.next(n.call(e,s,i++))}))})}var Ne=Qe(582);const nt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Yt(n){return w(n?.then)}function Ut(n){return w(n[sn])}function ar(n){return Symbol.asyncIterator&&w(n?.[Symbol.asyncIterator])}function kr(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Fr=function jn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ni(n){return w(n?.[Fr])}function fa(n){return(0,Ne.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Ne.qq)(t.read());if(i)return yield(0,Ne.qq)(void 0);yield yield(0,Ne.qq)(r)}}finally{t.releaseLock()}})}function vo(n){return w(n?.getReader)}function An(n){if(n instanceof dt)return n;if(null!=n){if(Ut(n))return function Ru(n){return new dt(e=>{const t=n[sn]();if(w(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(nt(n))return function Eo(n){return new dt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Yt(n))return function ms(n){return new dt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,se)})}(n);if(ar(n))return _i(n);if(ni(n))return function Io(n){return new dt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(vo(n))return function yi(n){return _i(fa(n))}(n)}throw kr(n)}function _i(n){return new dt(e=>{(function Oi(n,e){var t,r,i,s;return(0,Ne.mG)(this,void 0,void 0,function*(){try{for(t=(0,Ne.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ur(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Kt(n,e,t=1/0){return w(e)?Kt((r,i)=>Ae((s,o)=>e(r,s,i,o))(An(n(r,i))),t):("number"==typeof e&&(t=e),j((r,i)=>function _s(n,e,t,r,i,s,o,a){const u=[];let d=0,f=0,g=!1;const _=()=>{g&&!u.length&&!d&&e.complete()},y=T=>d<r?E(T):u.push(T),E=T=>{s&&e.next(T),d++;let A=!1;An(t(T,f++)).subscribe(oe(e,N=>{i?.(N),s?y(N):e.next(N)},()=>{A=!0},void 0,()=>{if(A)try{for(d--;u.length&&d<r;){const N=u.shift();o?ur(e,o,()=>E(N)):E(N)}_()}catch(N){e.error(N)}}))};return n.subscribe(oe(e,y,()=>{g=!0,_()})),()=>{a?.()}}(r,i,n,t)))}function Ji(n=1/0){return Kt(Wt,n)}const $n=new dt(n=>n.complete());function Vr(n){return n[n.length-1]}function Hn(n){return w(Vr(n))?n.pop():void 0}function ys(n){return function Pu(n){return n&&w(n.schedule)}(Vr(n))?n.pop():void 0}function ri(n,e=0){return j((t,r)=>{t.subscribe(oe(r,i=>ur(r,n,()=>r.next(i),e),()=>ur(r,n,()=>r.complete(),e),i=>ur(r,n,()=>r.error(i),e)))})}function Tr(n,e=0){return j((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function vs(n,e){if(!n)throw new Error("Iterable cannot be null");return new dt(t=>{ur(t,e,()=>{const r=n[Symbol.asyncIterator]();ur(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function S(n,e){return e?function D(n,e){if(null!=n){if(Ut(n))return function To(n,e){return An(n).pipe(Tr(e),ri(e))}(n,e);if(nt(n))return function ga(n,e){return new dt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Yt(n))return function Xc(n,e){return An(n).pipe(Tr(e),ri(e))}(n,e);if(ar(n))return vs(n,e);if(ni(n))return function ma(n,e){return new dt(t=>{let r;return ur(t,e,()=>{r=n[Fr](),ur(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>w(r?.return)&&r.return()})}(n,e);if(vo(n))return function b(n,e){return vs(fa(n),e)}(n,e)}throw kr(n)}(n,e):An(n)}function Q(...n){const e=ys(n),t=function Mu(n,e){return"number"==typeof Vr(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?An(r[0]):Ji(t)(S(r,e)):$n}class M extends L{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function H(...n){return S(n,ys(n))}function xe(n={}){const{connector:e=(()=>new L),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,d=0,f=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},y=()=>{_(),o=u=void 0,f=g=!1},E=()=>{const T=o;y(),T?.unsubscribe()};return j((T,A)=>{d++,!g&&!f&&_();const N=u=u??e();A.add(()=>{d--,0===d&&!g&&!f&&(a=Dt(E,i))}),N.subscribe(A),!o&&d>0&&(o=new wr({next:R=>N.next(R),error:R=>{g=!0,_(),a=Dt(y,t,R),N.error(R)},complete:()=>{f=!0,_(),a=Dt(y,r),N.complete()}}),An(T).subscribe(o))})(s)}}function Dt(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new wr({next:()=>{r.unsubscribe(),n()}});return An(e(...t)).subscribe(r)}function Ge(n,e){return j((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(oe(r,u=>{i?.unsubscribe();let d=0;const f=s++;An(n(u,f)).subscribe(i=oe(r,g=>r.next(e?e(u,g,f,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function xn(n,e=Wt){return n=n??qn,j((t,r)=>{let i,s=!0;t.subscribe(oe(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function qn(n,e){return n===e}function Ie(n){for(let e in n)if(n[e]===Ie)return e;throw Error("Could not find renamed property on target object.")}function pn(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Mt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Mt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function js(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Nu=Ie({__forward_ref__:Ie});function Ct(n){return n.__forward_ref__=Ct,n.toString=function(){return Mt(this())},n}function Ve(n){return Es(n)?n():n}function Es(n){return"function"==typeof n&&n.hasOwnProperty(Nu)&&n.__forward_ref__===Ct}function Co(n){return n&&!!n.\u0275providers}const O="https://g.co/ng/security#xss";class I extends Error{constructor(e,t){super(function z(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Y(n){return"string"==typeof n?n:null==n?"":String(n)}function Bt(n,e){throw new I(-201,!1)}function vi(n,e){null==n&&function Be(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function ve(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Cr(n){return{providers:n.providers||[],imports:n.imports||[]}}function ya(n){return gm(n,tl)||gm(n,_m)}function gm(n,e){return n.hasOwnProperty(e)?n[e]:null}function xu(n){return n&&(n.hasOwnProperty(nl)||n.hasOwnProperty(va))?n[nl]:null}const tl=Ie({\u0275prov:Ie}),nl=Ie({\u0275inj:Ie}),_m=Ie({ngInjectableDef:Ie}),va=Ie({ngInjectorDef:Ie});var ot=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ot||{});let Ou;function cr(n){const e=Ou;return Ou=n,e}function vm(n,e,t){const r=ya(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ot.Optional?null:void 0!==e?e:void Bt(Mt(n))}const jt=globalThis;class fe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ve({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Do={},Sh="__NG_DI_FLAG__",Ia="ngTempTokenPath",Is=/\n/gm,Dm="__source";let Dr;function Xi(n){const e=Dr;return Dr=n,e}function BI(n,e=ot.Default){if(void 0===Dr)throw new I(-203,!1);return null===Dr?vm(n,void 0,e):Dr.get(n,e&ot.Optional?null:void 0,e)}function ee(n,e=ot.Default){return(function ym(){return Ou}()||BI)(Ve(n),e)}function Ee(n,e=ot.Default){return ee(n,rl(e))}function rl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ph(n){const e=[];for(let t=0;t<n.length;t++){const r=Ve(n[t]);if(Array.isArray(r)){if(0===r.length)throw new I(900,!1);let i,s=ot.Default;for(let o=0;o<r.length;o++){const a=r[o],u=bo(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(ee(i,s))}else e.push(ee(r))}return e}function Ao(n,e){return n[Sh]=e,n.prototype[Sh]=e,n}function bo(n){return n[Sh]}function ii(n){return{toString:n}.toString()}var Mh=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Mh||{}),Lr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Lr||{});const zn={},ct=[],ws=Ie({\u0275cmp:Ie}),il=Ie({\u0275dir:Ie}),sl=Ie({\u0275pipe:Ie}),Nh=Ie({\u0275mod:Ie}),Ts=Ie({\u0275fac:Ie}),es=Ie({__NG_ELEMENT_ID__:Ie}),bm=Ie({__NG_ENV_ID__:Ie});function Uu(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function ol(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];al(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function xh(n){return 3===n||4===n||6===n}function al(n){return 64===n.charCodeAt(0)}function lr(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Oh(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Oh(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Sm="ng-template";function kh(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==Uu(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Bu(n){return 4===n.type&&n.value!==Sm}function Rm(n,e,t){return e===(4!==n.type||t?n.value:Sm)}function Pm(n,e,t){let r=4;const i=n.attrs||[],s=function cl(n){for(let e=0;e<n.length;e++)if(xh(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Rm(n,u,t)||""===u&&1===e.length){if(ki(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!kh(n.attrs,d,t)){if(ki(r))return!1;o=!0}continue}const g=Fh(8&r?"class":u,i,Bu(n),t);if(-1===g){if(ki(r))return!1;o=!0;continue}if(""!==d){let _;_=g>s?"":i[g+1].toLowerCase();const y=8&r?_:null;if(y&&-1!==Uu(y,d,0)||2&r&&d!==_){if(ki(r))return!1;o=!0}}}}else{if(!o&&!ki(r)&&!ki(u))return!1;if(o&&ki(u))continue;o=!1,r=u|1&r}}return ki(r)||o}function ki(n){return 0==(1&n)}function Fh(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Lh(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function ul(n,e,t=!1){for(let r=0;r<e.length;r++)if(Pm(n,e[r],t))return!0;return!1}function ll(n,e){return n?":not("+e.trim()+")":e}function Nm(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ki(o)&&(e+=ll(s,i),i=""),r=o,s=s||!ki(r);t++}return""!==i&&(e+=ll(s,i)),e}function wn(n){return ii(()=>{const e=fl(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Mh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Lr.Emulated,styles:n.styles||ct,_:null,schemas:n.schemas||null,tView:null,id:""};km(t);const r=n.dependencies;return t.directiveDefs=wa(r,!1),t.pipeDefs=wa(r,!0),t.id=function jh(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Bh(n){return at(n)||On(n)}function Om(n){return null!==n}function dr(n){return ii(()=>({type:n.type,bootstrap:n.bootstrap||ct,declarations:n.declarations||ct,imports:n.imports||ct,exports:n.exports||ct,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function hl(n,e){if(null==n)return zn;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function je(n){return ii(()=>{const e=fl(n);return km(e),e})}function hr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function at(n){return n[ws]||null}function On(n){return n[il]||null}function er(n){return n[sl]||null}function Ar(n,e){const t=n[Nh]||null;if(!t&&!0===e)throw new Error(`Type ${Mt(n)} does not have '\u0275mod' property.`);return t}function fl(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||zn,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||ct,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hl(n.inputs,e),outputs:hl(n.outputs)}}function km(n){n.features?.forEach(e=>e(n))}function wa(n,e){if(!n)return null;const t=e?er:Bh;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Om)}const gn=0,me=1,Ke=2,$t=3,Fi=4,So=5,fr=6,$s=7,Tn=8,Hs=9,qs=10,qe=11,ju=12,pl=13,Ta=14,on=15,$u=16,zs=17,ts=18,Ro=19,Fm=20,ns=21,Ds=22,Po=23,Hu=24,it=25,$h=1,Hh=2,Ei=7,Vi=9,tr=11;function Ur(n){return Array.isArray(n)&&"object"==typeof n[$h]}function br(n){return Array.isArray(n)&&!0===n[$h]}function qh(n){return 0!=(4&n.flags)}function Da(n){return n.componentOffset>-1}function zh(n){return 1==(1&n.flags)}function rs(n){return!!n.template}function qu(n){return 0!=(512&n[Ke])}function Mo(n,e){return n.hasOwnProperty(Ts)?n[Ts]:null}let bn=null,Wh=!1;function kn(n){const e=bn;return bn=n,e}const Um={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ba(n){if(!Wu(n)||n.dirty){if(!n.producerMustRecompute(n)&&!yl(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function $m(n){n.dirty=!0,function jm(n){if(void 0===n.liveConsumerNode)return;const e=Wh;Wh=!0;try{for(const t of n.liveConsumerNode)t.dirty||$m(t)}finally{Wh=e}}(n),n.consumerMarkedDirty?.(n)}function zu(n){return n&&(n.nextProducerIndex=0),kn(n)}function Kh(n,e){if(kn(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Wu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Gu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function yl(n){As(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(ba(t),r!==t.version))return!0}return!1}function Hm(n){if(As(n),Wu(n))for(let e=0;e<n.producerNode.length;e++)Gu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Gu(n,e){if(function Zh(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),As(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Gu(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];As(i),i.producerIndexOfThis[r]=e}}function Wu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function As(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Wm=null;function Zu(n){const e=kn(null);try{return n()}finally{kn(e)}}const Ym=()=>{},JI=(()=>({...Um,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:Ym}))();class XI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ii(){return Xm}function Xm(n){return n.type.prototype.ngOnChanges&&(n.setInput=e_),ew}function ew(){const n=n_(this),e=n?.current;if(e){const t=n.previous;if(t===zn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function e_(n,e,t,r){const i=this.declaredInputs[t],s=n_(n)||function tw(n,e){return n[t_]=e}(n,{previous:zn,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new XI(u&&u.currentValue,e,a===zn),n[r]=e}Ii.ngInherit=!0;const t_="__ngSimpleChanges__";function n_(n){return n[t_]||null}const wi=function(n,e,t){};function Ht(n){for(;Array.isArray(n);)n=n[gn];return n}function No(n,e){return Ht(e[n])}function pr(n,e){return Ht(e[n.index])}function Il(n,e){return n.data[e]}function is(n,e){return n[e]}function Fn(n,e){const t=e[n];return Ur(t)?t:t[gn]}function Ws(n,e){return null==e?null:n[e]}function wl(n){n[zs]=0}function i_(n){1024&n[Ke]||(n[Ke]|=1024,o_(n,1))}function s_(n){1024&n[Ke]&&(n[Ke]&=-1025,o_(n,-1))}function o_(n,e){let t=n[$t];if(null===t)return;t[So]+=e;let r=t;for(t=t[$t];null!==t&&(1===e&&1===r[So]||-1===e&&0===r[So]);)t[So]+=e,r=t,t=t[$t]}const Le={lFrame:pf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function c_(){return Le.bindingsEnabled}function te(){return Le.lFrame.lView}function ht(){return Le.lFrame.tView}function Pa(n){return Le.lFrame.contextLView=n,n[Tn]}function Ma(n){return Le.lFrame.contextLView=null,n}function Vn(){let n=l_();for(;null!==n&&64===n.type;)n=n.parent;return n}function l_(){return Le.lFrame.currentTNode}function Ti(n,e){const t=Le.lFrame;t.currentTNode=n,t.isParent=e}function af(){return Le.lFrame.isParent}function uf(){Le.lFrame.isParent=!1}function Gn(){const n=Le.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ks(){return Le.lFrame.bindingIndex++}function bs(n){const e=Le.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function h_(n,e){const t=Le.lFrame;t.bindingIndex=t.bindingRootIndex=n,Dl(e)}function Dl(n){Le.lFrame.currentDirectiveIndex=n}function ec(n){const e=Le.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function hf(n){Le.lFrame.currentQueryIndex=n}function lw(n){const e=n[me];return 2===e.type?e.declTNode:1===e.type?n[fr]:null}function Al(n,e,t){if(t&ot.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&ot.Host||(i=lw(s),null===i||(s=s[Ta],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Le.lFrame=p_();return r.currentTNode=e,r.lView=n,!0}function ff(n){const e=p_(),t=n[me];Le.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function p_(){const n=Le.lFrame,e=null===n?null:n.child;return null===e?pf(n):e}function pf(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function g_(){const n=Le.lFrame;return Le.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const tc=g_;function gf(){const n=g_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Sr(){return Le.lFrame.selectedIndex}function xo(n){Le.lFrame.selectedIndex=n}function an(){const n=Le.lFrame;return Il(n.tView,n.selectedIndex)}let __=!0;function bl(){return __}function Zs(n){__=n}function Sl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function Rl(n,e,t){v_(n,e,3,t)}function Pl(n,e,t,r){(3&n[Ke])===t&&v_(n,e,t,r)}function _f(n,e){let t=n[Ke];(3&t)===e&&(t&=8191,t+=1,n[Ke]=t)}function v_(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[zs]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[zs]+=65536),(a<s||-1==s)&&(yf(n,t,e,u),n[zs]=(4294901760&n[zs])+u+2),u++}function Ml(n,e){wi(4,n,e);const t=kn(null);try{e.call(n)}finally{kn(t),wi(5,n,e)}}function yf(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[Ke]>>13<n[zs]>>16&&(3&n[Ke])===e&&(n[Ke]+=8192,Ml(a,s)):Ml(a,s)}const Na=-1;class Oo{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function xa(n){return n!==Na}function Oa(n){return 32767&n}function nc(n,e){let t=function w_(n){return n>>16}(n),r=e;for(;t>0;)r=r[Ta],t--;return r}let Ef=!0;function Nl(n){const e=Ef;return Ef=n,e}const T_=255,If=5;let Ew=0;const Ss={};function ss(n,e){const t=C_(n,e);if(-1!==t)return t;const r=e[me];r.firstCreatePass&&(n.injectorIndex=e.length,wf(r.data,n),wf(e,null),wf(r.blueprint,null));const i=ka(n,e),s=n.injectorIndex;if(xa(i)){const o=Oa(i),a=nc(i,e),u=a[me].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function wf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function C_(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function ka(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=M_(i),null===r)return Na;if(t++,i=i[Ta],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Na}function Tf(n,e,t){!function Iw(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(es)&&(r=t[es]),null==r&&(r=t[es]=Ew++);const i=r&T_;e.data[n+(i>>If)]|=1<<i}(n,e,t)}function D_(n,e,t){if(t&ot.Optional||void 0!==n)return n;Bt()}function A_(n,e,t,r){if(t&ot.Optional&&void 0===r&&(r=null),!(t&(ot.Self|ot.Host))){const i=n[Hs],s=cr(void 0);try{return i?i.get(e,r,t&ot.Optional):vm(e,r,t&ot.Optional)}finally{cr(s)}}return D_(r,0,t)}function xl(n,e,t,r=ot.Default,i){if(null!==n){if(2048&e[Ke]&&!(r&ot.Self)){const o=function Df(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Ke]&&!(512&o[Ke]);){const a=b_(s,o,t,r|ot.Self,Ss);if(a!==Ss)return a;let u=s.parent;if(!u){const d=o[Fm];if(d){const f=d.get(t,Ss,r);if(f!==Ss)return f}u=M_(o),o=o[Ta]}s=u}return i}(n,e,t,r,Ss);if(o!==Ss)return o}const s=b_(n,e,t,r,Ss);if(s!==Ss)return s}return A_(e,t,r,i)}function b_(n,e,t,r,i){const s=function Tw(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(es)?n[es]:void 0;return"number"==typeof e?e>=0?e&T_:Cw:e}(t);if("function"==typeof s){if(!Al(e,n,r))return r&ot.Host?D_(i,0,r):A_(e,t,r,i);try{let o;if(o=s(r),null!=o||r&ot.Optional)return o;Bt()}finally{tc()}}else if("number"==typeof s){let o=null,a=C_(n,e),u=Na,d=r&ot.Host?e[on][fr]:null;for((-1===a||r&ot.SkipSelf)&&(u=-1===a?ka(n,e):e[a+8],u!==Na&&R_(r,!1)?(o=e[me],a=Oa(u),e=nc(u,e)):a=-1);-1!==a;){const f=e[me];if(S_(s,a,f.data)){const g=ww(a,e,t,o,r,d);if(g!==Ss)return g}u=e[a+8],u!==Na&&R_(r,e[me].data[a+8]===d)&&S_(s,a,e)?(o=f,a=Oa(u),e=nc(u,e)):a=-1}}return i}function ww(n,e,t,r,i,s){const o=e[me],a=o.data[n+8],f=function Fa(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,f=s>>20,_=i?a+f:n.directiveEnd;for(let y=r?a:a+f;y<_;y++){const E=o[y];if(y<u&&t===E||y>=u&&E.type===t)return y}if(i){const y=o[u];if(y&&rs(y)&&y.type===t)return u}return null}(a,o,t,null==r?Da(a)&&Ef:r!=o&&0!=(3&a.type),i&ot.Host&&s===a);return null!==f?ko(e,o,f,a):Ss}function ko(n,e,t,r){let i=n[t];const s=e.data;if(function mw(n){return n instanceof Oo}(i)){const o=i;o.resolving&&function We(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new I(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ge(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Y(n)}(s[t]));const a=Nl(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?cr(o.injectImpl):null;Al(n,r,ot.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function y_(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Xm(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==d&&cr(d),Nl(a),o.resolving=!1,tc()}}return i}function S_(n,e,t){return!!(t[e+(n>>If)]&1<<n)}function R_(n,e){return!(n&ot.Self||n&ot.Host&&e)}class nr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return xl(this._tNode,this._lView,e,rl(r),t)}}function Cw(){return new nr(Vn(),te())}function rr(n){return ii(()=>{const e=n.prototype.constructor,t=e[Ts]||ic(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Ts]||ic(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function ic(n){return Es(n)?()=>{const e=ic(Ve(n));return e&&e()}:Mo(n)}function M_(n){const e=n[me],t=e.type;return 2===t?e.declTNode:1===t?n[fr]:null}const Va="__parameters__";function Ua(n,e,t){return ii(()=>{const r=function kl(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,f){const g=u.hasOwnProperty(Va)?u[Va]:Object.defineProperty(u,Va,{value:[]})[Va];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function $a(n,e){n.forEach(t=>Array.isArray(t)?$a(t,e):e(t))}function jr(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Qs(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function $r(n,e,t){let r=si(n,e);return r>=0?n[1|r]=t:(r=~r,function bf(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Sf(n,e){const t=si(n,e);if(t>=0)return n[1|t]}function si(n,e){return function k_(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const qa=Ao(Ua("Optional"),8),Vl=Ao(Ua("SkipSelf"),4);function G_(n){return 128==(128&n.flags)}var za=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(za||{});const o$=/^>|^->|<!--|-->|--!>|<!-$/g,a$=/(<|>)/g,u$="\u200b$1\u200b";const kw=new Map;let c$=0;const Vw="__ngContext__";function qr(n,e){Ur(e)?(n[Vw]=e[Ro],function d$(n){kw.set(n[Ro],n)}(e)):n[Vw]=e}let Lw;function Uw(n,e){return Lw(n,e)}function Uf(n){const e=n[$t];return br(e)?e[$t]:e}function OR(n){return FR(n[ju])}function kR(n){return FR(n[Fi])}function FR(n){for(;null!==n&&!br(n);)n=n[Fi];return n}function $l(n,e,t,r,i){if(null!=r){let s,o=!1;br(r)?s=r:Ur(r)&&(o=!0,r=r[gn]);const a=Ht(r);0===n&&null!==t?null==i?BR(e,t,a):oc(e,t,a,i||null,!0):1===n&&null!==t?oc(e,t,a,i||null,!0):2===n?function X_(n,e,t){const r=Y_(n,e);r&&function P$(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function x$(n,e,t,r,i){const s=t[Ei];s!==Ht(t)&&$l(e,n,r,s,i);for(let a=tr;a<t.length;a++){const u=t[a];jf(u[me],u,n,e,r,s)}}(e,n,s,t,i)}}function Bw(n,e){return n.createComment(function AR(n){return n.replace(o$,e=>e.replace(a$,u$))}(e))}function Z_(n,e,t){return n.createElement(e,t)}function LR(n,e){const t=n[Vi],r=t.indexOf(e);s_(e),t.splice(r,1)}function Q_(n,e){if(n.length<=tr)return;const t=tr+e,r=n[t];if(r){const i=r[$u];null!==i&&i!==n&&LR(i,r),e>0&&(n[t-1][Fi]=r[Fi]);const s=Qs(n,tr+e);!function w$(n,e){jf(n,e,e[qe],2,null,null),e[gn]=null,e[fr]=null}(r[me],r);const o=s[ts];null!==o&&o.detachView(s[me]),r[$t]=null,r[Fi]=null,r[Ke]&=-129}return r}function jw(n,e){if(!(256&e[Ke])){const t=e[qe];e[Po]&&Hm(e[Po]),e[Hu]&&Hm(e[Hu]),t.destroyNode&&jf(n,e,t,3,null,null),function D$(n){let e=n[ju];if(!e)return $w(n[me],n);for(;e;){let t=null;if(Ur(e))t=e[ju];else{const r=e[tr];r&&(t=r)}if(!t){for(;e&&!e[Fi]&&e!==n;)Ur(e)&&$w(e[me],e),e=e[$t];null===e&&(e=n),Ur(e)&&$w(e[me],e),t=e&&e[Fi]}e=t}}(e)}}function $w(n,e){if(!(256&e[Ke])){e[Ke]&=-129,e[Ke]|=256,function R$(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Oo)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];wi(4,a,u);try{u.call(a)}finally{wi(5,a,u)}}else{wi(4,i,s);try{s.call(i)}finally{wi(5,i,s)}}}}}(n,e),function S$(n,e){const t=n.cleanup,r=e[$s];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[$s]=null);const i=e[ns];if(null!==i){e[ns]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[me].type&&e[qe].destroy();const t=e[$u];if(null!==t&&br(e[$t])){t!==e[$t]&&LR(t,e);const r=e[ts];null!==r&&r.detachView(n)}!function h$(n){kw.delete(n[Ro])}(e)}}function Hw(n,e,t){return function UR(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[gn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Lr.None||s===Lr.Emulated)return null}return pr(r,t)}}(n,e.parent,t)}function oc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function BR(n,e,t){n.appendChild(e,t)}function jR(n,e,t,r,i){null!==r?oc(n,e,t,r,i):BR(n,e,t)}function Y_(n,e){return n.parentNode(e)}let qw,ey,Kw,ty,qR=function HR(n,e,t){return 40&n.type?pr(n,t):null};function J_(n,e,t,r){const i=Hw(n,r,e),s=e[qe],a=function $R(n,e,t){return qR(n,e,t)}(r.parent||e[fr],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)jR(s,i,t[u],a,!1);else jR(s,i,t,a,!1);void 0!==qw&&qw(s,r,e,t,i)}function Bf(n,e){if(null!==e){const t=e.type;if(3&t)return pr(e,n);if(4&t)return zw(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Bf(n,r);{const i=n[e.index];return br(i)?zw(-1,i):Ht(i)}}if(32&t)return Uw(e,n)()||Ht(n[e.index]);{const r=GR(n,e);return null!==r?Array.isArray(r)?r[0]:Bf(Uf(n[on]),r):Bf(n,e.next)}}return null}function GR(n,e){return null!==e?n[on][fr].projection[e.projection]:null}function zw(n,e){const t=tr+n+1;if(t<e.length){const r=e[t],i=r[me].firstChild;if(null!==i)return Bf(r,i)}return e[Ei]}function Gw(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&qr(Ht(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)Gw(n,e,t.child,r,i,s,!1),$l(e,n,i,a,s);else if(32&u){const d=Uw(t,r);let f;for(;f=d();)$l(e,n,i,f,s);$l(e,n,i,a,s)}else 16&u?KR(n,e,r,t,i,s):$l(e,n,i,a,s);t=o?t.projectionNext:t.next}}function jf(n,e,t,r,i,s){Gw(t,r,n.firstChild,e,i,s,!1)}function KR(n,e,t,r,i,s){const o=t[on],u=o[fr].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)$l(e,n,i,u[d],s);else{let d=u;const f=o[$t];G_(r)&&(d.flags|=128),Gw(n,e,d,f,i,s,!0)}}function ZR(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function QR(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&ol(n,e,r),null!==i&&ZR(n,e,i),null!==s&&function k$(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function Hl(n){return function Ww(){if(void 0===ey&&(ey=null,jt.trustedTypes))try{ey=jt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ey}()?.createHTML(n)||n}function ql(){if(void 0!==Kw)return Kw;if(typeof document<"u")return document;throw new I(210,!1)}function Zw(){if(void 0===ty&&(ty=null,jt.trustedTypes))try{ty=jt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ty}function YR(n){return Zw()?.createHTML(n)||n}function XR(n){return Zw()?.createScriptURL(n)||n}class ac{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${O})`}}class B$ extends ac{getTypeName(){return"HTML"}}class j$ extends ac{getTypeName(){return"Style"}}class $$ extends ac{getTypeName(){return"Script"}}class H$ extends ac{getTypeName(){return"URL"}}class q$ extends ac{getTypeName(){return"ResourceURL"}}function Ui(n){return n instanceof ac?n.changingThisBreaksApplicationSecurity:n}function Ys(n,e){const t=function z$(n){return n instanceof ac&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${O})`)}return t===e}class Y${constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Hl(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class J${constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Hl(e),t}}const eH=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ny(n){return(n=String(n)).match(eH)?n:"unsafe:"+n}function Fo(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function $f(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const tP=Fo("area,br,col,hr,img,wbr"),nP=Fo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),rP=Fo("rp,rt"),Qw=$f(tP,$f(nP,Fo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),$f(rP,Fo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$f(rP,nP)),Yw=Fo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),iP=$f(Yw,Fo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tH=Fo("script,style,template");class nH{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Qw.hasOwnProperty(t))return this.sanitizedSomething=!0,!tH.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!iP.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;Yw[a]&&(u=ny(u)),this.buf.push(" ",o,'="',sP(u),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Qw.hasOwnProperty(t)&&!tP.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(sP(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const rH=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,iH=/([^\#-~ |!])/g;function sP(n){return n.replace(/&/g,"&amp;").replace(rH,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(iH,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ry;function oP(n,e){let t=null;try{ry=ry||function eP(n){const e=new J$(n);return function X$(){try{return!!(new window.DOMParser).parseFromString(Hl(""),"text/html")}catch{return!1}}()?new Y$(e):e}(n);let r=e?String(e):"";t=ry.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=ry.getInertBodyElement(r)}while(r!==s);return Hl((new nH).sanitizeChildren(Jw(t)||t))}finally{if(t){const r=Jw(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Jw(n){return"content"in n&&function sH(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Bi=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Bi||{});function iy(n){const e=Hf();return e?YR(e.sanitize(Bi.HTML,n)||""):Ys(n,"HTML")?YR(Ui(n)):oP(ql(),Y(n))}function sy(n){const e=Hf();return e?e.sanitize(Bi.URL,n)||"":Ys(n,"URL")?Ui(n):ny(Y(n))}function aP(n){const e=Hf();if(e)return XR(e.sanitize(Bi.RESOURCE_URL,n)||"");if(Ys(n,"ResourceURL"))return XR(Ui(n));throw new I(904,!1)}function Hf(){const n=te();return n&&n[qs].sanitizer}const qf=new fe("ENVIRONMENT_INITIALIZER"),cP=new fe("INJECTOR",-1),lP=new fe("INJECTOR_DEF_TYPES");class Xw{get(e,t=Do){if(t===Do){const r=new Error(`NullInjectorError: No provider for ${Mt(e)}!`);throw r.name="NullInjectorError",r}return t}}function dH(...n){return{\u0275providers:dP(0,n),\u0275fromNgModule:!0}}function dP(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return $a(e,o=>{const a=o;oy(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&hP(i,s),t}function hP(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];tT(i,s=>{e(s,r)})}}function oy(n,e,t,r){if(!(n=Ve(n)))return!1;let i=null,s=xu(n);const o=!s&&at(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=xu(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)oy(d,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{$a(s.imports,f=>{oy(f,e,t,r)&&(d||=[],d.push(f))})}finally{}void 0!==d&&hP(d,e)}if(!a){const d=Mo(i)||(()=>new i);e({provide:i,useFactory:d,deps:ct},i),e({provide:lP,useValue:i,multi:!0},i),e({provide:qf,useValue:()=>ee(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=n;tT(u,f=>{e(f,d)})}}}return i!==n&&void 0!==n.providers}function tT(n,e){for(let t of n)Co(t)&&(t=t.\u0275providers),Array.isArray(t)?tT(t,e):e(t)}const hH=Ie({provide:String,useValue:Ie});function nT(n){return null!==n&&"object"==typeof n&&hH in n}function uc(n){return"function"==typeof n}const rT=new fe("Set Injector scope."),ay={},pH={};let iT;function uy(){return void 0===iT&&(iT=new Xw),iT}class os{}class zl extends os{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,oT(e,o=>this.processProvider(o)),this.records.set(cP,Gl(void 0,this)),i.has("environment")&&this.records.set(os,Gl(void 0,this));const s=this.records.get(rT);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(lP.multi,ct,ot.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Xi(this),r=cr(void 0);try{return e()}finally{Xi(t),cr(r)}}get(e,t=Do,r=ot.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(bm))return e[bm](this);r=rl(r);const s=Xi(this),o=cr(void 0);try{if(!(r&ot.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function vH(n){return"function"==typeof n||"object"==typeof n&&n instanceof fe}(e)&&ya(e);u=d&&this.injectableDefInScope(d)?Gl(sT(e),ay):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&ot.Self?uy():this.parent).get(e,t=r&ot.Optional&&t===Do?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Ia]=a[Ia]||[]).unshift(Mt(e)),s)throw a;return function jI(n,e,t,r){const i=n[Ia];throw e[Dm]&&i.unshift(e[Dm]),n.message=function $I(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Mt(e);if(Array.isArray(e))i=e.map(Mt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Mt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Is,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Ia]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{cr(o),Xi(s)}}resolveInjectorInitializers(){const e=Xi(this),t=cr(void 0);try{const i=this.get(qf.multi,ct,ot.Self);for(const s of i)s()}finally{Xi(e),cr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Mt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new I(205,!1)}processProvider(e){let t=uc(e=Ve(e))?e:Ve(e&&e.provide);const r=function mH(n){return nT(n)?Gl(void 0,n.useValue):Gl(gP(n),ay)}(e);if(uc(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Gl(void 0,ay,!0),i.factory=()=>Ph(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===ay&&(t.value=pH,t.value=t.factory()),"object"==typeof t.value&&t.value&&function yH(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ve(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function sT(n){const e=ya(n),t=null!==e?e.factory:Mo(n);if(null!==t)return t;if(n instanceof fe)throw new I(204,!1);if(n instanceof Function)return function gH(n){const e=n.length;if(e>0)throw function Ha(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new I(204,!1);const t=function mm(n){return n&&(n[tl]||n[_m])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new I(204,!1)}function gP(n,e,t){let r;if(uc(n)){const i=Ve(n);return Mo(i)||sT(i)}if(nT(n))r=()=>Ve(n.useValue);else if(function pP(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Ph(n.deps||[]));else if(function fP(n){return!(!n||!n.useExisting)}(n))r=()=>ee(Ve(n.useExisting));else{const i=Ve(n&&(n.useClass||n.provide));if(!function _H(n){return!!n.deps}(n))return Mo(i)||sT(i);r=()=>new i(...Ph(n.deps))}return r}function Gl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function oT(n,e){for(const t of n)Array.isArray(t)?oT(t,e):t&&Co(t)?oT(t.\u0275providers,e):e(t)}const cy=new fe("AppId",{providedIn:"root",factory:()=>EH}),EH="ng",mP=new fe("Platform Initializer"),Vo=new fe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_P=new fe("AnimationModuleType"),yP=new fe("CSP nonce",{providedIn:"root",factory:()=>ql().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let vP=(n,e,t)=>null;function pT(n,e,t=!1){return vP(n,e,t)}class PH{}class wP{}class NH{resolveComponentFactory(e){throw function MH(n){const e=Error(`No component factory found for ${Mt(n)}.`);return e.ngComponent=n,e}(e)}}let Wf=(()=>{class n{static#e=this.NULL=new NH}return n})();function xH(){return Zl(Vn(),te())}function Zl(n,e){return new ji(pr(n,e))}let ji=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=xH}return n})();class Kf{}let Lo=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function kH(){const n=te(),t=Fn(Vn().index,n);return(Ur(t)?t:n)[qe]}()}return n})(),FH=(()=>{class n{static#e=this.\u0275prov=ve({token:n,providedIn:"root",factory:()=>null})}return n})();class Ql{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const CP=new Ql("16.2.12"),_T={};function SP(n,e=null,t=null,r){const i=RP(n,e,t,r);return i.resolveInjectorInitializers(),i}function RP(n,e=null,t=null,r,i=new Set){const s=[t||ct,dH(n)];return r=r||("object"==typeof n?void 0:Mt(n)),new zl(s,e||uy(),r||null,i)}let zr=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Do;static#t=this.NULL=new Xw;static create(t,r){if(Array.isArray(t))return SP({name:""},r,t,"");{const i=t.name??"";return SP({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=ve({token:n,providedIn:"any",factory:()=>ee(cP)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function vT(n){return n.ngOriginalError}class Uo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&vT(e);for(;t&&vT(t);)t=vT(t);return t||null}}function IT(n){return e=>{setTimeout(n,void 0,e)}}const Sn=class HH extends L{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=IT(s),i&&(i=IT(i)),o&&(o=IT(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof mt&&e.add(a),a}};function MP(...n){}class yt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Sn(!1),this.onMicrotaskEmpty=new Sn(!1),this.onStable=new Sn(!1),this.onError=new Sn(!1),typeof Zone>"u")throw new I(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function qH(){const n="function"==typeof jt.requestAnimationFrame;let e=jt[n?"requestAnimationFrame":"setTimeout"],t=jt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function WH(n){const e=()=>{!function GH(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(jt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,TT(n),n.isCheckStableRunning=!0,wT(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),TT(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function ZH(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return NP(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),xP(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return NP(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),xP(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,TT(n),wT(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yt.isInAngularZone())throw new I(909,!1)}static assertNotInAngularZone(){if(yt.isInAngularZone())throw new I(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,zH,MP,MP);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const zH={};function wT(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function TT(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function NP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function xP(n){n._nesting--,wT(n)}class KH{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Sn,this.onMicrotaskEmpty=new Sn,this.onStable=new Sn,this.onError=new Sn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const OP=new fe("",{providedIn:"root",factory:kP});function kP(){const n=Ee(yt);let e=!0;return Q(new dt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new dt(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{yt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{yt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(xe()))}function Bo(n){return n instanceof Function?n():n}let CT=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ve({token:n,providedIn:"root",factory:()=>new n})}return n})();function Zf(n){for(;n;){n[Ke]|=64;const e=Uf(n);if(qu(n)&&!e)return n;n=e}return null}const BP=new fe("",{providedIn:"root",factory:()=>!1});let my=null;function qP(n,e){return n[e]??WP()}function zP(n,e){const t=WP();t.producerNode?.length&&(n[e]=my,t.lView=n,my=GP())}const s4={...Um,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Zf(n.lView)},lView:null};function GP(){return Object.create(s4)}function WP(){return my??=GP(),my}const Je={};function ae(n){KP(ht(),te(),Sr()+n,!1)}function KP(n,e,t,r){if(!r)if(3==(3&e[Ke])){const s=n.preOrderCheckHooks;null!==s&&Rl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Pl(e,s,0,t)}xo(t)}function X(n,e=ot.Default){const t=te();return null===t?ee(n,e):xl(Vn(),t,Ve(n),e)}function _y(n,e,t,r,i,s,o,a,u,d,f){const g=e.blueprint.slice();return g[gn]=i,g[Ke]=140|r,(null!==d||n&&2048&n[Ke])&&(g[Ke]|=2048),wl(g),g[$t]=g[Ta]=n,g[Tn]=t,g[qs]=o||n&&n[qs],g[qe]=a||n&&n[qe],g[Hs]=u||n&&n[Hs]||null,g[fr]=s,g[Ro]=function l$(){return c$++}(),g[Ds]=f,g[Fm]=d,g[on]=2==e.type?n[on]:g,g}function Xl(n,e,t,r,i){let s=n.data[e];if(null===s)s=function DT(n,e,t,r,i){const s=l_(),o=af(),u=n.data[e]=function f4(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Ra(){return null!==Le.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function d_(){return Le.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Xu(){const n=Le.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ti(s,!0),s}function Qf(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function QP(n,e,t,r,i){const s=qP(e,Po),o=Sr(),a=2&r;try{xo(-1),a&&e.length>it&&KP(n,e,it,!1),wi(a?2:0,i);const d=a?s:null,f=zu(d);try{null!==d&&(d.dirty=!1),t(r,i)}finally{Kh(d,f)}}finally{a&&null===e[Po]&&zP(e,Po),xo(o),wi(a?3:1,i)}}function AT(n,e,t){if(qh(e)){const r=kn(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{kn(r)}}}function bT(n,e,t){c_()&&(function E4(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Da(t)&&function b4(n,e,t){const r=pr(e,n),i=YP(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=yy(n,_y(n,i,null,o,r,e,null,n[qs].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||ss(t,e),qr(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],d=ko(e,n,a,t);qr(d,e),null!==o&&S4(0,a-i,d,u,0,o),rs(u)&&(Fn(t.index,e)[Tn]=ko(e,n,a,t))}}(n,e,t,pr(t,e)),64==(64&t.flags)&&nM(n,e,t))}function ST(n,e,t=pr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function YP(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=RT(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function RT(n,e,t,r,i,s,o,a,u,d,f){const g=it+r,_=g+i,y=function a4(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Je);return t}(g,_),E="function"==typeof d?d():d;return y[me]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:E,incompleteFirstPass:!1,ssrId:f}}let JP=n=>null;function XP(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?eM(t,e,i,s):r.hasOwnProperty(i)&&eM(t,e,r[i],s)}return t}function eM(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function $i(n,e,t,r,i,s,o,a){const u=pr(e,t);let f,d=e.inputs;!a&&null!=d&&(f=d[r])?(OT(n,t,f,r,i),Da(e)&&function m4(n,e){const t=Fn(e,n);16&t[Ke]||(t[Ke]|=64)}(t,e.index)):3&e.type&&(r=function g4(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function PT(n,e,t,r){if(c_()){const i=null===r?null:{"":-1},s=function w4(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(ul(e,o.selectors,!1))if(r||(r=[]),rs(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),MT(n,e,a.length)}else r.unshift(o),MT(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&tM(n,e,t,o,i,a),i&&function T4(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new I(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=lr(t.mergedAttrs,t.attrs)}function tM(n,e,t,r,i,s){for(let d=0;d<r.length;d++)Tf(ss(t,e),n,r[d].type);!function D4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let d=0;d<r.length;d++){const f=r[d];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,u=Qf(n,e,r.length,null);for(let d=0;d<r.length;d++){const f=r[d];t.mergedAttrs=lr(t.mergedAttrs,f.hostAttrs),A4(n,t,e,u,f),C4(u,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function p4(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,d=null;for(let f=e.directiveStart;f<i;f++){const g=s[f],_=t?t.get(g):null,E=_?_.outputs:null;u=XP(g.inputs,f,u,_?_.inputs:null),d=XP(g.outputs,f,d,E);const T=null===u||null===o||Bu(e)?null:R4(u,f,o);a.push(T)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(n,t,s)}function nM(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function cw(){return Le.lFrame.currentDirectiveIndex}();try{xo(s);for(let a=r;a<i;a++){const u=n.data[a],d=e[a];Dl(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&I4(u,d)}}finally{xo(-1),Dl(o)}}function I4(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function MT(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function C4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;rs(e)&&(t[""]=n)}}function A4(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Mo(i.type)),o=new Oo(s,rs(i),X);n.blueprint[r]=o,t[r]=o,function y4(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function v4(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Qf(n,t,i.hostVars,Je),i)}function Js(n,e,t,r,i,s){const o=pr(n,e);!function NT(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Y(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[qe],o,s,n.value,t,r,i)}function S4(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)rM(r,t,o[a++],o[a++],o[a++])}function rM(n,e,t,r,i){const s=kn(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{kn(s)}}function R4(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function iM(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function sM(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];hf(t[r]),o.contentQueries(2,e[s],s)}}}function yy(n,e){return n[ju]?n[pl][Fi]=e:n[ju]=e,n[pl]=e,e}function xT(n,e,t){hf(0);const r=kn(null);try{e(n,t)}finally{kn(r)}}function uM(n,e,t){return(null===n||rs(n))&&(t=function Yu(n){for(;Array.isArray(n);){if("object"==typeof n[$h])return n;n=n[gn]}return null}(t[e.index])),t[qe]}function cM(n,e){const t=n[Hs],r=t?t.get(Uo,null):null;r&&r.handleError(e)}function OT(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];rM(n.data[o],e[o],r,a,i)}}function P4(n,e){const t=Fn(e,n),r=t[me];!function M4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[gn];null!==i&&null===t[Ds]&&(t[Ds]=pT(i,t[Hs])),kT(r,t,t[Tn])}function kT(n,e,t){ff(e);try{const r=n.viewQuery;null!==r&&xT(1,r,t);const i=n.template;null!==i&&QP(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&sM(n,e),n.staticViewQueries&&xT(2,n.viewQuery,t);const s=n.components;null!==s&&function N4(n,e){for(let t=0;t<e.length;t++)P4(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ke]&=-5,gf()}}let lM=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function YI(n,e,t){const r=Object.create(JI);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>$m(r),run:()=>{if(r.dirty=!1,r.hasRun&&!yl(r))return;r.hasRun=!0;const o=zu(r);try{r.cleanupFn(),r.cleanupFn=Ym,r.fn(i)}finally{Kh(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ve({token:n,providedIn:"root",factory:()=>new n})}return n})();function vy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=js(i,a):2==s&&(r=js(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Yf(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Ht(s)),br(s)&&dM(s,r);const o=t.type;if(8&o)Yf(n,e,t.child,r);else if(32&o){const a=Uw(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=GR(e,t);if(Array.isArray(a))r.push(...a);else{const u=Uf(e[on]);Yf(u[me],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function dM(n,e){for(let t=tr;t<n.length;t++){const r=n[t],i=r[me].firstChild;null!==i&&Yf(r[me],r,i,e)}n[Ei]!==n[gn]&&e.push(n[Ei])}function Ey(n,e,t,r=!0){const i=e[qs],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{hM(n,e,n.template,t)}catch(u){throw r&&cM(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function hM(n,e,t,r){const i=e[Ke];if(256!=(256&i)){e[qs].effectManager?.flush(),ff(e);try{wl(e),function lf(n){return Le.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&QP(n,e,t,2,r);const o=3==(3&i);if(o){const d=n.preOrderCheckHooks;null!==d&&Rl(e,d,null)}else{const d=n.preOrderHooks;null!==d&&Pl(e,d,0,null),_f(e,0)}if(function k4(n){for(let e=OR(n);null!==e;e=kR(e)){if(!e[Hh])continue;const t=e[Vi];for(let r=0;r<t.length;r++){i_(t[r])}}}(e),fM(e,2),null!==n.contentQueries&&sM(n,e),o){const d=n.contentCheckHooks;null!==d&&Rl(e,d)}else{const d=n.contentHooks;null!==d&&Pl(e,d,1),_f(e,1)}!function o4(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=qP(e,Hu);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)xo(~s);else{const o=s,a=t[++i],u=t[++i];h_(a,o),r.dirty=!1;const d=zu(r);try{u(2,e[o])}finally{Kh(r,d)}}}}finally{null===e[Hu]&&zP(e,Hu),xo(-1)}}(n,e);const a=n.components;null!==a&&gM(e,a,0);const u=n.viewQuery;if(null!==u&&xT(2,u,r),o){const d=n.viewCheckHooks;null!==d&&Rl(e,d)}else{const d=n.viewHooks;null!==d&&Pl(e,d,2),_f(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Ke]&=-73,s_(e)}finally{gf()}}}function fM(n,e){for(let t=OR(n);null!==t;t=kR(t))for(let r=tr;r<t.length;r++)pM(t[r],e)}function F4(n,e,t){pM(Fn(e,n),t)}function pM(n,e){if(!function iw(n){return 128==(128&n[Ke])}(n))return;const t=n[me],r=n[Ke];if(80&r&&0===e||1024&r||2===e)hM(t,n,t.template,n[Tn]);else if(n[So]>0){fM(n,1);const i=t.components;null!==i&&gM(n,i,1)}}function gM(n,e,t){for(let r=0;r<e.length;r++)F4(n,e[r],t)}class Jf{get rootNodes(){const e=this._lView,t=e[me];return Yf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Tn]}set context(e){this._lView[Tn]=e}get destroyed(){return 256==(256&this._lView[Ke])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[$t];if(br(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Q_(e,r),Qs(t,r))}this._attachedToViewContainer=!1}jw(this._lView[me],this._lView)}onDestroy(e){!function Tl(n,e){if(256==(256&n[Ke]))throw new I(911,!1);null===n[ns]&&(n[ns]=[]),n[ns].push(e)}(this._lView,e)}markForCheck(){Zf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ke]&=-129}reattach(){this._lView[Ke]|=128}detectChanges(){Ey(this._lView[me],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new I(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function C$(n,e){jf(n,e,e[qe],2,null,null)}(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new I(902,!1);this._appRef=e}}class V4 extends Jf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Ey(e[me],e,e[Tn],!1)}checkNoChanges(){}get context(){return null}}class mM extends Wf{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=at(e);return new Xf(t,this.ngModule)}}function _M(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class U4{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=rl(r);const i=this.injector.get(e,_T,r);return i!==_T||t===_T?i:this.parentInjector.get(e,t,r)}}class Xf extends wP{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=_M(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return _M(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Uh(n){return n.map(Nm).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof os?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new U4(e,s):e,a=o.get(Kf,null);if(null===a)throw new I(407,!1);const g={rendererFactory:a,sanitizer:o.get(FH,null),effectManager:o.get(lM,null),afterRenderEventManager:o.get(CT,null)},_=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",E=r?function u4(n,e,t,r){const s=r.get(BP,!1)||t===Lr.ShadowDom,o=n.selectRootElement(e,s);return function c4(n){JP(n)}(o),o}(_,r,this.componentDef.encapsulation,o):Z_(_,y,function L4(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),N=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let R=null;null!==E&&(R=pT(E,o,!0));const k=RT(0,null,null,1,0,null,null,null,null,null,null),K=_y(null,k,null,N,null,null,g,_,o,null,R);let ce,Me;ff(K);try{const ze=this.componentDef;let Vt,gi=null;ze.findHostDirectiveDefs?(Vt=[],gi=new Map,ze.findHostDirectiveDefs(ze,Vt,gi),Vt.push(ze)):Vt=[ze];const xi=function j4(n,e){const t=n[me],r=it;return n[r]=e,Xl(t,r,2,"#host",null)}(K,E),RI=function $4(n,e,t,r,i,s,o){const a=i[me];!function H4(n,e,t,r){for(const i of n)e.mergedAttrs=lr(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(vy(e,e.mergedAttrs,!0),null!==t&&QR(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=pT(e,i[Hs]));const d=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const g=_y(i,YP(t),null,f,i[n.index],n,s,d,null,null,u);return a.firstCreatePass&&MT(a,n,r.length-1),yy(i,g),i[n.index]=g}(xi,E,ze,Vt,K,g,_);Me=Il(k,it),E&&function z4(n,e,t,r){if(r)ol(n,t,["ng-version",CP.full]);else{const{attrs:i,classes:s}=function dl(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!ki(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&ol(n,t,i),s&&s.length>0&&ZR(n,t,s.join(" "))}}(_,ze,E,r),void 0!==t&&function G4(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Me,this.ngContentSelectors,t),ce=function q4(n,e,t,r,i,s){const o=Vn(),a=i[me],u=pr(o,i);tM(a,i,o,t,null,r);for(let f=0;f<t.length;f++)qr(ko(i,a,o.directiveStart+f,o),i);nM(a,i,o),u&&qr(u,i);const d=ko(i,a,o.directiveStart+o.componentOffset,o);if(n[Tn]=i[Tn]=d,null!==s)for(const f of s)f(d,e);return AT(a,o,n),d}(RI,ze,Vt,gi,K,[W4]),kT(k,K,null)}finally{gf()}return new B4(this.componentType,ce,Zl(Me,K),K,Me)}}class B4 extends PH{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new V4(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;OT(s[me],s,i,e,t),this.previousInputValues.set(e,t),Zf(Fn(this._tNode.index,s))}}get injector(){return new nr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function W4(){const n=Vn();Sl(te()[me],n)}function xt(n){let e=function yM(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(rs(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new I(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Iy(n.inputs),o.inputTransforms=Iy(n.inputTransforms),o.declaredInputs=Iy(n.declaredInputs),o.outputs=Iy(n.outputs);const a=i.hostBindings;a&&Y4(n,a);const u=i.viewQuery,d=i.contentQueries;if(u&&Z4(n,u),d&&Q4(n,d),pn(n.inputs,i.inputs),pn(n.declaredInputs,i.declaredInputs),pn(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),pn(o.inputTransforms,i.inputTransforms)),rs(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===xt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function K4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=lr(i.hostAttrs,t=lr(t,i.hostAttrs))}}(r)}function Iy(n){return n===zn?{}:n===ct?[]:n}function Z4(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function Q4(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function Y4(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function wM(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function wy(n){return!!FT(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function FT(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Xs(n,e,t){return n[e]=t}function Gr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function bi(n,e,t,r){const i=te();return Gr(i,Ks(),e)&&(ht(),Js(an(),i,n,e,t,r)),bi}function ke(n,e,t,r,i,s,o,a){const u=te(),d=ht(),f=n+it,g=d.firstCreatePass?function w3(n,e,t,r,i,s,o,a,u){const d=e.consts,f=Xl(e,n,4,o||null,Ws(d,a));PT(e,t,f,Ws(d,u)),Sl(e,f);const g=f.tView=RT(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}(f,d,u,e,t,r,i,s,o):d.data[f];Ti(g,!1);const _=kM(d,u,g,n);bl()&&J_(d,u,_,g),qr(_,u),yy(u,u[f]=iM(_,u,_,g)),zh(g)&&bT(d,u,g),null!=o&&ST(u,g,a)}let kM=function FM(n,e,t,r){return Zs(!0),e[qe].createComment("")};function un(n){return is(function cf(){return Le.lFrame.contextLView}(),it+n)}function _e(n,e,t){const r=te();return Gr(r,Ks(),e)&&$i(ht(),an(),r,n,e,r[qe],t,!1),_e}function $T(n,e,t,r,i){const o=i?"class":"style";OT(n,t,e.inputs[o],o,r)}function q(n,e,t,r){const i=te(),s=ht(),o=it+n,a=i[qe],u=s.firstCreatePass?function A3(n,e,t,r,i,s){const o=e.consts,u=Xl(e,n,2,r,Ws(o,i));return PT(e,t,u,Ws(o,s)),null!==u.attrs&&vy(u,u.attrs,!1),null!==u.mergedAttrs&&vy(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],d=VM(s,i,u,a,e,n);i[o]=d;const f=zh(u);return Ti(u,!0),QR(a,d,u),32!=(32&u.flags)&&bl()&&J_(s,i,d,u),0===function ef(){return Le.lFrame.elementDepthCount}()&&qr(d,i),function aw(){Le.lFrame.elementDepthCount++}(),f&&(bT(s,i,u),AT(s,u,i)),null!==r&&ST(i,u),q}function Z(){let n=Vn();af()?uf():(n=n.parent,Ti(n,!1));const e=n;(function tf(n){return Le.skipHydrationRootTNode===n})(e)&&function sf(){Le.skipHydrationRootTNode=null}(),function Ju(){Le.lFrame.elementDepthCount--}();const t=ht();return t.firstCreatePass&&(Sl(t,n),qh(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function yw(n){return 0!=(8&n.flags)}(e)&&$T(t,e,te(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function hR(n){return 0!=(16&n.flags)}(e)&&$T(t,e,te(),e.stylesWithoutHost,!1),Z}function Pt(n,e,t,r){return q(n,e,t,r),Z(),Pt}let VM=(n,e,t,r,i,s)=>(Zs(!0),Z_(r,i,function m_(){return Le.lFrame.currentNamespace}()));function ip(n,e,t){const r=te(),i=ht(),s=n+it,o=i.firstCreatePass?function R3(n,e,t,r,i){const s=e.consts,o=Ws(s,r),a=Xl(e,n,8,"ng-container",o);return null!==o&&vy(a,o,!0),PT(e,t,a,Ws(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];Ti(o,!0);const a=UM(i,r,o,n);return r[s]=a,bl()&&J_(i,r,a,o),qr(a,r),zh(o)&&(bT(i,r,o),AT(i,o,r)),null!=t&&ST(r,o),ip}function sp(){let n=Vn();const e=ht();return af()?uf():(n=n.parent,Ti(n,!1)),e.firstCreatePass&&(Sl(e,n),qh(n)&&e.queries.elementEnd(n)),sp}let UM=(n,e,t,r)=>(Zs(!0),Bw(e[qe],""));function cd(){return te()}function op(n){return!!n&&"function"==typeof n.then}function BM(n){return!!n&&"function"==typeof n.subscribe}function _n(n,e,t,r){const i=te(),s=ht(),o=Vn();return function $M(n,e,t,r,i,s,o){const a=zh(r),d=n.firstCreatePass&&function aM(n){return n.cleanup||(n.cleanup=[])}(n),f=e[Tn],g=function oM(n){return n[$s]||(n[$s]=[])}(e);let _=!0;if(3&r.type||o){const T=pr(r,e),A=o?o(T):T,N=g.length,R=o?K=>o(Ht(K[r.index])):r.index;let k=null;if(!o&&a&&(k=function N3(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[$s],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==k)(k.__ngLastListenerFn__||k).__ngNextListenerFn__=s,k.__ngLastListenerFn__=s,_=!1;else{s=qM(r,e,f,s,!1);const K=t.listen(A,i,s);g.push(s,K),d&&d.push(i,R,N,N+1)}}else s=qM(r,e,f,s,!1);const y=r.outputs;let E;if(_&&null!==y&&(E=y[i])){const T=E.length;if(T)for(let A=0;A<T;A+=2){const ce=e[E[A]][E[A+1]].subscribe(s),Me=g.length;g.push(s,ce),d&&d.push(i,r.index,Me,-(Me+1))}}}(s,i,i[qe],o,n,e,r),_n}function HM(n,e,t,r){try{return wi(6,e,t),!1!==t(r)}catch(i){return cM(n,i),!1}finally{wi(7,e,t)}}function qM(n,e,t,r,i){return function s(o){if(o===Function)return r;Zf(n.componentOffset>-1?Fn(n.index,e):e);let u=HM(e,t,r,o),d=s.__ngNextListenerFn__;for(;d;)u=HM(e,t,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function zt(n=1){return function dw(n){return(Le.lFrame.contextLView=function hw(n,e){for(;n>0;)e=e[Ta],n--;return e}(n,Le.lFrame.contextLView))[Tn]}(n)}function by(n,e){return n<<17|e<<2}function Ga(n){return n>>17&32767}function qT(n){return 2|n}function lc(n){return(131068&n)>>2}function zT(n,e){return-131069&n|e<<2}function GT(n){return 1|n}function eN(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Ga(s):lc(s),u=!1;for(;0!==a&&(!1===u||o);){const f=n[a+1];j3(n[a],e)&&(u=!0,n[a+1]=r?GT(f):qT(f)),a=r?Ga(f):lc(f)}u&&(n[t+1]=r?qT(s):GT(s))}function j3(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&si(n,e)>=0}const ir={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function tN(n){return n.substring(ir.key,ir.keyEnd)}function nN(n,e){const t=ir.textEnd;return t===e?-1:(e=ir.keyEnd=function z3(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,ir.key=e,t),ld(n,e,t))}function ld(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function dd(n,e,t){return Ps(n,e,t,!1),dd}function Sy(n,e){return Ps(n,e,null,!0),Sy}function $o(n){!function Ms(n,e,t,r){const i=ht(),s=bs(2);i.firstUpdatePass&&uN(i,null,s,r);const o=te();if(t!==Je&&Gr(o,s,t)){const a=i.data[Sr()];if(hN(a,r)&&!aN(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;null!==u&&(t=js(u,t||"")),$T(i,a,o,t,r)}else!function tq(n,e,t,r,i,s,o,a){i===Je&&(i=ct);let u=0,d=0,f=0<i.length?i[0]:null,g=0<s.length?s[0]:null;for(;null!==f||null!==g;){const _=u<i.length?i[u+1]:void 0,y=d<s.length?s[d+1]:void 0;let T,E=null;f===g?(u+=2,d+=2,_!==y&&(E=g,T=y)):null===g||null!==f&&f<g?(u+=2,E=f):(d+=2,E=g,T=y),null!==E&&lN(n,e,t,r,E,T,o,a),f=u<i.length?i[u]:null,g=d<s.length?s[d]:null}}(i,a,o,o[qe],o[s+1],o[s+1]=function X3(n,e,t){if(null==t||""===t)return ct;const r=[],i=Ui(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}(eq,to,n,!0)}function to(n,e){for(let t=function H3(n){return function iN(n){ir.key=0,ir.keyEnd=0,ir.value=0,ir.valueEnd=0,ir.textEnd=n.length}(n),nN(n,ld(n,0,ir.textEnd))}(e);t>=0;t=nN(e,t))$r(n,tN(e),!0)}function Ps(n,e,t,r){const i=te(),s=ht(),o=bs(2);s.firstUpdatePass&&uN(s,n,o,r),e!==Je&&Gr(i,o,e)&&lN(s,s.data[Sr()],i,i[qe],n,i[o+1]=function nq(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Mt(Ui(n)))),n}(e,t),r,o)}function aN(n,e){return e>=n.expandoStartIndex}function uN(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Sr()],o=aN(n,t);hN(s,r)&&null===e&&!o&&(e=!1),e=function Z3(n,e,t,r){const i=ec(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=ap(t=WT(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=WT(i,n,e,t,r),null===s){let u=function Q3(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==lc(r))return n[Ga(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=WT(null,n,e,u[1],r),u=ap(u,e.attrs,r),function Y3(n,e,t,r){n[Ga(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function J3(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=ap(r,n[s].hostAttrs,t);return ap(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function U3(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ga(o),u=lc(o);n[r]=t;let f,d=!1;if(Array.isArray(t)?(f=t[1],(null===f||si(t,f)>0)&&(d=!0)):f=t,i)if(0!==u){const _=Ga(n[a+1]);n[r+1]=by(_,a),0!==_&&(n[_+1]=zT(n[_+1],r)),n[a+1]=function V3(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=by(a,0),0!==a&&(n[a+1]=zT(n[a+1],r)),a=r;else n[r+1]=by(u,0),0===a?a=r:n[u+1]=zT(n[u+1],r),u=r;d&&(n[r+1]=qT(n[r+1])),eN(n,f,r,!0),eN(n,f,r,!1),function B3(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&si(s,e)>=0&&(t[r+1]=GT(t[r+1]))}(e,f,n,r,s),o=by(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function WT(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=ap(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function ap(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),$r(n,o,!!t||e[++s]))}return void 0===n?null:n}function eq(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&$r(n,r,t)}function lN(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,d=u[a+1],f=function L3(n){return 1==(1&n)}(d)?dN(u,e,t,i,lc(d),o):void 0;Ry(f)||(Ry(s)||function F3(n){return 2==(2&n)}(d)&&(s=dN(u,null,t,i,a,o)),function O$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:za.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=za.Important),n.setStyle(t,r,i,s))}}(r,o,No(Sr(),t),i,s))}function dN(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],d=Array.isArray(u),f=d?u[1]:u,g=null===f;let _=t[i+1];_===Je&&(_=g?ct:void 0);let y=g?Sf(_,r):f===r?_:void 0;if(d&&!Ry(y)&&(y=Sf(u,r)),Ry(y)&&(a=y,o))return a;const E=n[i+1];i=o?Ga(E):lc(E)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Sf(u,r))}return a}function Ry(n){return void 0!==n}function hN(n,e){return 0!=(n.flags&(e?8:16))}function le(n,e=""){const t=te(),r=ht(),i=n+it,s=r.firstCreatePass?Xl(r,i,1,e,null):r.data[i],o=fN(r,t,s,e,n);t[i]=o,bl()&&J_(r,t,o,s),Ti(s,!1)}let fN=(n,e,t,r,i)=>(Zs(!0),function K_(n,e){return n.createText(e)}(e[qe],r));function Ho(n){return oi("",n,""),Ho}function oi(n,e,t){const r=te(),i=function td(n,e,t,r){return Gr(n,Ks(),t)?e+Y(t)+r:Je}(r,n,e,t);return i!==Je&&function jo(n,e,t){const r=No(e,n);!function VR(n,e,t){n.setValue(e,t)}(n[qe],r,t)}(r,Sr(),i),oi}function KT(n,e,t){const r=te();if(Gr(r,Ks(),e)){const s=ht(),o=an();$i(s,o,r,n,e,uM(ec(s.data),o,r),t,!0)}return KT}const dc=void 0;var Cq=["en",[["a","p"],["AM","PM"],dc],[["AM","PM"],dc,dc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dc,"{1} 'at' {0}",dc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Tq(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let hd={};function ai(n){const e=function Dq(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=xN(e);if(t)return t;const r=e.split("-")[0];if(t=xN(r),t)return t;if("en"===r)return Cq;throw new I(701,!1)}function xN(n){return n in hd||(hd[n]=jt.ng&&jt.ng.common&&jt.ng.common.locales&&jt.ng.common.locales[n]),hd[n]}var Xt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Xt||{});const fd="en-US";let ON=fd;function YT(n,e,t,r,i){if(n=Ve(n),Array.isArray(n))for(let s=0;s<n.length;s++)YT(n[s],e,t,r,i);else{const s=ht(),o=te(),a=Vn();let u=uc(n)?n:Ve(n.provide);const d=gP(n),f=1048575&a.providerIndexes,g=a.directiveStart,_=a.providerIndexes>>20;if(uc(n)||!n.multi){const y=new Oo(d,i,X),E=XT(u,e,i?f:f+_,g);-1===E?(Tf(ss(a,o),s,u),JT(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[E]=y,o[E]=y)}else{const y=XT(u,e,f+_,g),E=XT(u,e,f,f+_),A=E>=0&&t[E];if(i&&!A||!i&&!(y>=0&&t[y])){Tf(ss(a,o),s,u);const N=function Tz(n,e,t,r,i){const s=new Oo(n,t,X);return s.multi=[],s.index=e,s.componentProviders=0,sx(s,i,r&&!t),s}(i?wz:Iz,t.length,i,r,d);!i&&A&&(t[E].providerFactory=N),JT(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(N),o.push(N)}else JT(s,n,y>-1?y:E,sx(t[i?E:y],d,!i&&r));!i&&r&&A&&t[E].componentProviders++}}}function JT(n,e,t,r){const i=uc(e),s=function fH(n){return!!n.useClass}(e);if(i||s){const u=(s?Ve(e.useClass):e).prototype.ngOnDestroy;if(u){const d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=d.indexOf(t);-1===f?d.push(t,[r,u]):d[f+1].push(r,u)}else d.push(t,u)}}}function sx(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function XT(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Iz(n,e,t,r){return eC(this.multi,[])}function wz(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=ko(t,t[me],this.providerFactory.index,r);s=a.slice(0,o),eC(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],eC(i,s);return s}function eC(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function yn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function Ez(n,e,t){const r=ht();if(r.firstCreatePass){const i=rs(n);YT(t,r.data,r.blueprint,i,!0),YT(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class hc{}class ox{}class tC extends hc{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new mM(this);const i=Ar(e);this._bootstrapComponents=Bo(i.bootstrap),this._r3Injector=RP(e,t,[{provide:hc,useValue:this},{provide:Wf,useValue:this.componentFactoryResolver},...r],Mt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class nC extends ox{constructor(e){super(),this.moduleType=e}create(e){return new tC(this.moduleType,e,[])}}class ax extends hc{constructor(e){super(),this.componentFactoryResolver=new mM(this),this.instance=null;const t=new zl([...e.providers,{provide:hc,useValue:this},{provide:Wf,useValue:this.componentFactoryResolver}],e.parent||uy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function rC(n,e,t=null){return new ax({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let Az=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=dP(0,t.type),i=r.length>0?rC([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ve({token:n,providedIn:"environment",factory:()=>new n(ee(os))})}return n})();function Oy(n){n.getStandaloneInjector=e=>e.get(Az).getOrCreateStandaloneInjector(n)}function Ns(n,e,t,r){return gx(te(),Gn(),n,e,t,r)}function px(n,e,t,r,i){return function mx(n,e,t,r,i,s,o){const a=e+t;return function cc(n,e,t,r){const i=Gr(n,e,t);return Gr(n,e+1,r)||i}(n,a,i,s)?Xs(n,a+2,o?r.call(o,i,s):r(i,s)):fp(n,a+2)}(te(),Gn(),n,e,t,r,i)}function fp(n,e){const t=n[e];return t===Je?void 0:t}function gx(n,e,t,r,i,s){const o=e+t;return Gr(n,o,i)?Xs(n,o+1,s?r.call(s,i):r(i)):fp(n,o+1)}function fc(n,e){const t=ht();let r;const i=n+it;t.firstCreatePass?(r=function Hz(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Mo(r.type)),a=cr(X);try{const u=Nl(!1),d=s();return Nl(u),function D3(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,te(),i,d),d}finally{cr(a)}}function pc(n,e,t){const r=n+it,i=te(),s=is(i,r);return function pp(n,e){return n[me].data[e].pure}(i,r)?gx(i,Gn(),e,s.transform,t,s):s.transform(t)}function Qz(n,e,t,r=!0){const i=e[me];if(function A$(n,e,t,r){const i=tr+r,s=t.length;r>0&&(t[i-1][Fi]=e),r<s-tr?(e[Fi]=t[i],jr(t,tr+r,e)):(t.push(e),e[Fi]=null),e[$t]=t;const o=e[$u];null!==o&&t!==o&&function b$(n,e){const t=n[Vi];e[on]!==e[$t][$t][on]&&(n[Hh]=!0),null===t?n[Vi]=[e]:t.push(e)}(o,e);const a=e[ts];null!==a&&a.insertView(n),e[Ke]|=128}(i,e,n,t),r){const s=zw(t,n),o=e[qe],a=Y_(o,n[Ei]);null!==a&&function T$(n,e,t,r,i,s){r[gn]=i,r[fr]=e,jf(n,r,t,1,i,s)}(i,n[fr],o,e,a,s)}}Symbol;let qo=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=Xz}return n})();const Yz=qo,Jz=class extends Yz{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function Zz(n,e,t,r){const i=e.tView,a=_y(n,i,t,4096&n[Ke]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[$u]=n[e.index];const d=n[ts];return null!==d&&(a[ts]=d.createEmbeddedView(i)),kT(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Jf(i)}};function Xz(){return ky(Vn(),te())}function ky(n,e){return 4&n.type?new Jz(e,n,Zl(n,e)):null}let xs=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=sG}return n})();function sG(){return function Ax(n,e){let t;const r=e[n.index];return br(r)?t=r:(t=iM(r,e,null,n),e[n.index]=t,yy(e,t)),bx(t,e,n,r),new Cx(t,n,e)}(Vn(),te())}const oG=xs,Cx=class extends oG{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Zl(this._hostTNode,this._hostLView)}get injector(){return new nr(this._hostTNode,this._hostLView)}get parentInjector(){const e=ka(this._hostTNode,this._hostLView);if(xa(e)){const t=nc(e,this._hostLView),r=Oa(e);return new nr(t[me].data[r+8],t)}return new nr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Dx(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-tr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function ja(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const T=t||{};a=T.index,r=T.injector,i=T.projectableNodes,s=T.environmentInjector||T.ngModuleRef}const u=o?e:new Xf(at(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const A=(o?d:this.parentInjector).get(os,null);A&&(s=A)}at(u.componentType??{});const y=u.create(d,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function sw(n){return br(n[$t])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[$t],f=new Cx(d,d[fr],d[$t]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return Qz(a,i,o,!r),e.attachToViewContainerRef(),jr(oC(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Dx(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Q_(this._lContainer,t);r&&(Qs(oC(this._lContainer),t),jw(r[me],r))}detach(e){const t=this._adjustIndex(e,-1),r=Q_(this._lContainer,t);return r&&null!=Qs(oC(this._lContainer),t)?new Jf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Dx(n){return n[8]}function oC(n){return n[8]||(n[8]=[])}let bx=function Sx(n,e,t,r){if(n[Ei])return;let i;i=8&t.type?Ht(r):function aG(n,e){const t=n[qe],r=t.createComment(""),i=pr(e,n);return oc(t,Y_(t,i),r,function M$(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Ei]=i};function Vx(n,e){return ky(n,e)}const _C=new fe("Application Initializer");let yC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Ee(_C,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(op(s))t.push(s);else if(BM(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),e1=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const zo=new fe("LocaleId",{providedIn:"root",factory:()=>Ee(zo,ot.Optional|ot.SkipSelf)||function VG(){return typeof $localize<"u"&&$localize.locale||fd}()});let t1=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new M(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class BG{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let n1=(()=>{class n{compileModuleSync(t){return new nC(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Bo(Ar(t).declarations).reduce((o,a)=>{const u=at(a);return u&&o.push(new Xf(u)),o},[]);return new BG(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const o1=new fe(""),Uy=new fe("");let TC,IC=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,TC||(function u9(n){TC=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(ee(yt),ee(wC),ee(Uy))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),wC=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return TC?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Wa=null;const a1=new fe("AllowMultipleToken"),CC=new fe("PlatformDestroyListeners"),DC=new fe("appBootstrapListener");class c1{constructor(e,t){this.name=e,this.token=t}}function d1(n,e,t=[]){const r=`Platform: ${e}`,i=new fe(r);return(s=[])=>{let o=AC();if(!o||o.injector.get(a1,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function d9(n){if(Wa&&!Wa.get(a1,!1))throw new I(400,!1);(function u1(){!function Km(n){Wm=n}(()=>{throw new I(600,!1)})})(),Wa=n;const e=n.get(f1);(function l1(n){n.get(mP,null)?.forEach(t=>t())})(n)}(function h1(n=[],e){return zr.create({name:e,providers:[{provide:rT,useValue:"platform"},{provide:CC,useValue:new Set([()=>Wa=null])},...n]})}(a,r))}return function f9(n){const e=AC();if(!e)throw new I(401,!1);return e}()}}function AC(){return Wa?.get(f1)??null}let f1=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function p9(n="zone.js",e){return"noop"===n?new KH:"zone.js"===n?new yt(e):n}(r?.ngZone,function p1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function Dz(n,e,t){return new tC(n,e,t)}(t.moduleType,this.injector,function v1(n){return[{provide:yt,useFactory:n},{provide:qf,multi:!0,useFactory:()=>{const e=Ee(m9,{optional:!0});return()=>e.initialize()}},{provide:y1,useFactory:g9},{provide:OP,useFactory:kP}]}(()=>i)),o=s.injector.get(Uo,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{By(this._modules,s),a.unsubscribe()})}),function g1(n,e,t){try{const r=t();return op(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(yC);return a.runInitializers(),a.donePromise.then(()=>(function kN(n){vi(n,"Expected localeId to be defined"),"string"==typeof n&&(ON=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(zo,fd)||fd),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=m1({},r);return function c9(n,e,t){const r=new nC(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Go);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new I(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new I(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(CC,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(ee(zr))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function m1(n,e){return Array.isArray(e)?e.reduce(m1,n):{...n,...e}}let Go=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ee(y1),this.zoneIsStable=Ee(OP),this.componentTypes=[],this.components=[],this.isStable=Ee(t1).hasPendingTasks.pipe(Ge(t=>t?H(!1):this.zoneIsStable),xn(),xe()),this._injector=Ee(os)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof wP;if(!this._injector.get(yC).done)throw!i&&function Cs(n){const e=at(n)||On(n)||er(n);return null!==e&&e.standalone}(t),new I(405,!1);let o;o=i?t:this._injector.get(Wf).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function l9(n){return n.isBoundToModule}(o)?void 0:this._injector.get(hc),d=o.create(zr.NULL,[],r||o.selector,a),f=d.location.nativeElement,g=d.injector.get(o1,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),By(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new I(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;By(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(DC,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>By(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new I(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function By(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const y1=new fe("",{providedIn:"root",factory:()=>Ee(Uo).handleError.bind(void 0)});function g9(){const n=Ee(yt),e=Ee(Uo);return t=>n.runOutsideAngular(()=>e.handleError(t))}let m9=(()=>{class n{constructor(){this.zone=Ee(yt),this.applicationRef=Ee(Go)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let jy=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=y9}return n})();function y9(n){return function v9(n,e,t){if(Da(n)&&!t){const r=Fn(n.index,e);return new Jf(r,r)}return 47&n.type?new Jf(e[on],e):null}(Vn(),te(),16==(16&n))}class C1{constructor(){}supports(e){return wy(e)}create(e){return new D9(e)}}const C9=(n,e)=>e;class D9{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||C9}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<A1(r,i,s)?t:r,a=A1(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,f=u-i;if(d!=f){for(let _=0;_<d;_++){const y=_<s.length?s[_]:s[_]=0,E=y+_;f<=E&&E<d&&(s[_]=y+1)}s[o.previousIndex]=f-d}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!wy(e))throw new I(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function i3(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new A9(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new D1),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new D1),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class A9{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class b9{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class D1{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new b9,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function A1(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class b1{constructor(){}supports(e){return e instanceof Map||FT(e)}create(){return new S9}}class S9{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||FT(e)))throw new I(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new R9(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class R9{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function S1(){return new qy([new C1])}let qy=(()=>{class n{static#e=this.\u0275prov=ve({token:n,providedIn:"root",factory:S1});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||S1()),deps:[[n,new Vl,new qa]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new I(901,!1)}}return n})();function R1(){return new _p([new b1])}let _p=(()=>{class n{static#e=this.\u0275prov=ve({token:n,providedIn:"root",factory:R1});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||R1()),deps:[[n,new Vl,new qa]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new I(901,!1)}}return n})();const N9=d1(null,"core",[]);let x9=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Go))};static#t=this.\u0275mod=dr({type:n});static#n=this.\u0275inj=Cr({})}return n})();function md(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let NC=null;function Ka(){return NC}class W9{}const gr=new fe("DocumentToken");let xC=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:function(){return Ee(Z9)},providedIn:"platform"})}return n})();const K9=new fe("Location Initialized");let Z9=(()=>{class n extends xC{constructor(){super(),this._doc=Ee(gr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ka().getBaseHref(this._doc)}onPopState(t){const r=Ka().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Ka().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function OC(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function L1(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Wo(n){return n&&"?"!==n[0]?"?"+n:n}let mc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:function(){return Ee(B1)},providedIn:"root"})}return n})();const U1=new fe("appBaseHref");let B1=(()=>{class n extends mc{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ee(gr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return OC(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Wo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Wo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Wo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(xC),ee(U1,8))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Q9=(()=>{class n extends mc{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=OC(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Wo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Wo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(xC),ee(U1,8))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),kC=(()=>{class n{constructor(t){this._subject=new Sn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function X9(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(L1(j1(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Wo(r))}normalize(t){return n.stripTrailingSlash(function J9(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,j1(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=Wo;static#t=this.joinWithSlash=OC;static#n=this.stripTrailingSlash=L1;static#r=this.\u0275fac=function(r){return new(r||n)(ee(mc))};static#i=this.\u0275prov=ve({token:n,factory:function(){return function Y9(){return new kC(ee(mc))}()},providedIn:"root"})}return n})();function j1(n){return n.replace(/\/index.html$/,"")}var ci=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(ci||{}),Zt=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Zt||{}),Hi=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Hi||{}),Ln=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Ln||{});function Wy(n,e){return cs(ai(n)[Xt.DateFormat],e)}function Ky(n,e){return cs(ai(n)[Xt.TimeFormat],e)}function Zy(n,e){return cs(ai(n)[Xt.DateTimeFormat],e)}function us(n,e){const t=ai(n),r=t[Xt.NumberSymbols][e];if(typeof r>"u"){if(e===Ln.CurrencyDecimal)return t[Xt.NumberSymbols][Ln.Decimal];if(e===Ln.CurrencyGroup)return t[Xt.NumberSymbols][Ln.Group]}return r}function H1(n){if(!n[Xt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Xt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function cs(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function VC(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const f5=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,yp={},p5=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ko=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Ko||{}),At=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(At||{}),bt=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(bt||{});function g5(n,e,t,r){let i=function C5(n){if(G1(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,o=1]=n.split("-").map(a=>+a);return Qy(i,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(f5))return function D5(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),d=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,u,d),e}(r)}const e=new Date(n);if(!G1(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Zo(t,e)||e;let a,o=[];for(;e;){if(a=p5.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const f=o.pop();if(!f)break;e=f}}let u=i.getTimezoneOffset();r&&(u=z1(r,u),i=function T5(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function w5(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(z1(e,i)-i))}(i,r,!0));let d="";return o.forEach(f=>{const g=function I5(n){if(UC[n])return UC[n];let e;switch(n){case"G":case"GG":case"GGG":e=en(bt.Eras,Zt.Abbreviated);break;case"GGGG":e=en(bt.Eras,Zt.Wide);break;case"GGGGG":e=en(bt.Eras,Zt.Narrow);break;case"y":e=Wn(At.FullYear,1,0,!1,!0);break;case"yy":e=Wn(At.FullYear,2,0,!0,!0);break;case"yyy":e=Wn(At.FullYear,3,0,!1,!0);break;case"yyyy":e=Wn(At.FullYear,4,0,!1,!0);break;case"Y":e=ev(1);break;case"YY":e=ev(2,!0);break;case"YYY":e=ev(3);break;case"YYYY":e=ev(4);break;case"M":case"L":e=Wn(At.Month,1,1);break;case"MM":case"LL":e=Wn(At.Month,2,1);break;case"MMM":e=en(bt.Months,Zt.Abbreviated);break;case"MMMM":e=en(bt.Months,Zt.Wide);break;case"MMMMM":e=en(bt.Months,Zt.Narrow);break;case"LLL":e=en(bt.Months,Zt.Abbreviated,ci.Standalone);break;case"LLLL":e=en(bt.Months,Zt.Wide,ci.Standalone);break;case"LLLLL":e=en(bt.Months,Zt.Narrow,ci.Standalone);break;case"w":e=LC(1);break;case"ww":e=LC(2);break;case"W":e=LC(1,!0);break;case"d":e=Wn(At.Date,1);break;case"dd":e=Wn(At.Date,2);break;case"c":case"cc":e=Wn(At.Day,1);break;case"ccc":e=en(bt.Days,Zt.Abbreviated,ci.Standalone);break;case"cccc":e=en(bt.Days,Zt.Wide,ci.Standalone);break;case"ccccc":e=en(bt.Days,Zt.Narrow,ci.Standalone);break;case"cccccc":e=en(bt.Days,Zt.Short,ci.Standalone);break;case"E":case"EE":case"EEE":e=en(bt.Days,Zt.Abbreviated);break;case"EEEE":e=en(bt.Days,Zt.Wide);break;case"EEEEE":e=en(bt.Days,Zt.Narrow);break;case"EEEEEE":e=en(bt.Days,Zt.Short);break;case"a":case"aa":case"aaa":e=en(bt.DayPeriods,Zt.Abbreviated);break;case"aaaa":e=en(bt.DayPeriods,Zt.Wide);break;case"aaaaa":e=en(bt.DayPeriods,Zt.Narrow);break;case"b":case"bb":case"bbb":e=en(bt.DayPeriods,Zt.Abbreviated,ci.Standalone,!0);break;case"bbbb":e=en(bt.DayPeriods,Zt.Wide,ci.Standalone,!0);break;case"bbbbb":e=en(bt.DayPeriods,Zt.Narrow,ci.Standalone,!0);break;case"B":case"BB":case"BBB":e=en(bt.DayPeriods,Zt.Abbreviated,ci.Format,!0);break;case"BBBB":e=en(bt.DayPeriods,Zt.Wide,ci.Format,!0);break;case"BBBBB":e=en(bt.DayPeriods,Zt.Narrow,ci.Format,!0);break;case"h":e=Wn(At.Hours,1,-12);break;case"hh":e=Wn(At.Hours,2,-12);break;case"H":e=Wn(At.Hours,1);break;case"HH":e=Wn(At.Hours,2);break;case"m":e=Wn(At.Minutes,1);break;case"mm":e=Wn(At.Minutes,2);break;case"s":e=Wn(At.Seconds,1);break;case"ss":e=Wn(At.Seconds,2);break;case"S":e=Wn(At.FractionalSeconds,1);break;case"SS":e=Wn(At.FractionalSeconds,2);break;case"SSS":e=Wn(At.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Jy(Ko.Short);break;case"ZZZZZ":e=Jy(Ko.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Jy(Ko.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Jy(Ko.Long);break;default:return null}return UC[n]=e,e}(f);d+=g?g(i,t,u):"''"===f?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function Qy(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Zo(n,e){const t=function t5(n){return ai(n)[Xt.LocaleId]}(n);if(yp[t]=yp[t]||{},yp[t][e])return yp[t][e];let r="";switch(e){case"shortDate":r=Wy(n,Hi.Short);break;case"mediumDate":r=Wy(n,Hi.Medium);break;case"longDate":r=Wy(n,Hi.Long);break;case"fullDate":r=Wy(n,Hi.Full);break;case"shortTime":r=Ky(n,Hi.Short);break;case"mediumTime":r=Ky(n,Hi.Medium);break;case"longTime":r=Ky(n,Hi.Long);break;case"fullTime":r=Ky(n,Hi.Full);break;case"short":const i=Zo(n,"shortTime"),s=Zo(n,"shortDate");r=Yy(Zy(n,Hi.Short),[i,s]);break;case"medium":const o=Zo(n,"mediumTime"),a=Zo(n,"mediumDate");r=Yy(Zy(n,Hi.Medium),[o,a]);break;case"long":const u=Zo(n,"longTime"),d=Zo(n,"longDate");r=Yy(Zy(n,Hi.Long),[u,d]);break;case"full":const f=Zo(n,"fullTime"),g=Zo(n,"fullDate");r=Yy(Zy(n,Hi.Full),[f,g])}return r&&(yp[t][e]=r),r}function Yy(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Os(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Wn(n,e,t=0,r=!1,i=!1){return function(s,o){let a=function _5(n,e){switch(n){case At.FullYear:return e.getFullYear();case At.Month:return e.getMonth();case At.Date:return e.getDate();case At.Hours:return e.getHours();case At.Minutes:return e.getMinutes();case At.Seconds:return e.getSeconds();case At.FractionalSeconds:return e.getMilliseconds();case At.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===At.Hours)0===a&&-12===t&&(a=12);else if(n===At.FractionalSeconds)return function m5(n,e){return Os(n,3).substring(0,e)}(a,e);const u=us(o,Ln.MinusSign);return Os(a,e,u,r,i)}}function en(n,e,t=ci.Format,r=!1){return function(i,s){return function y5(n,e,t,r,i,s){switch(t){case bt.Months:return function i5(n,e,t){const r=ai(n),s=cs([r[Xt.MonthsFormat],r[Xt.MonthsStandalone]],e);return cs(s,t)}(e,i,r)[n.getMonth()];case bt.Days:return function r5(n,e,t){const r=ai(n),s=cs([r[Xt.DaysFormat],r[Xt.DaysStandalone]],e);return cs(s,t)}(e,i,r)[n.getDay()];case bt.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const d=function u5(n){const e=ai(n);return H1(e),(e[Xt.ExtraData][2]||[]).map(r=>"string"==typeof r?VC(r):[VC(r[0]),VC(r[1])])}(e),f=function c5(n,e,t){const r=ai(n);H1(r);const s=cs([r[Xt.ExtraData][0],r[Xt.ExtraData][1]],e)||[];return cs(s,t)||[]}(e,i,r),g=d.findIndex(_=>{if(Array.isArray(_)){const[y,E]=_,T=o>=y.hours&&a>=y.minutes,A=o<E.hours||o===E.hours&&a<E.minutes;if(y.hours<E.hours){if(T&&A)return!0}else if(T||A)return!0}else if(_.hours===o&&_.minutes===a)return!0;return!1});if(-1!==g)return f[g]}return function n5(n,e,t){const r=ai(n),s=cs([r[Xt.DayPeriodsFormat],r[Xt.DayPeriodsStandalone]],e);return cs(s,t)}(e,i,r)[o<12?0:1];case bt.Eras:return function s5(n,e){return cs(ai(n)[Xt.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function Jy(n){return function(e,t,r){const i=-1*r,s=us(t,Ln.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Ko.Short:return(i>=0?"+":"")+Os(o,2,s)+Os(Math.abs(i%60),2,s);case Ko.ShortGMT:return"GMT"+(i>=0?"+":"")+Os(o,1,s);case Ko.Long:return"GMT"+(i>=0?"+":"")+Os(o,2,s)+":"+Os(Math.abs(i%60),2,s);case Ko.Extended:return 0===r?"Z":(i>=0?"+":"")+Os(o,2,s)+":"+Os(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const v5=0,Xy=4;function q1(n){return Qy(n.getFullYear(),n.getMonth(),n.getDate()+(Xy-n.getDay()))}function LC(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=q1(t),o=function E5(n){const e=Qy(n,v5,1).getDay();return Qy(n,0,1+(e<=Xy?Xy:Xy+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Os(i,n,us(r,Ln.MinusSign))}}function ev(n,e=!1){return function(t,r){return Os(q1(t).getFullYear(),n,us(r,Ln.MinusSign),e)}}const UC={};function z1(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function G1(n){return n instanceof Date&&!isNaN(n.valueOf())}const zC=/\s+/,Q1=[];let nv=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=Q1,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(zC):Q1}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(zC):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(zC).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(X(qy),X(_p),X(ji),X(Lo))};static#t=this.\u0275dir=je({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class U5{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ep=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new U5(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),J1(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{J1(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(X(xs),X(qo),X(qy))};static#t=this.\u0275dir=je({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function J1(n,e){n.context.$implicit=e.item}let Qo=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new B5,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){X1("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){X1("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(X(xs),X(qo))};static#t=this.\u0275dir=je({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class B5{constructor(){this.$implicit=null,this.ngIf=null}}function X1(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Mt(e)}'.`)}function ks(n,e){return new I(2100,!1)}class H5{createSubscription(e,t){return Zu(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Zu(()=>e.unsubscribe())}}class q5{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const z5=new q5,G5=new H5;let KC=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(op(t))return z5;if(BM(t))return G5;throw ks()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(X(jy,16))};static#t=this.\u0275pipe=hr({name:"async",type:n,pure:!1,standalone:!0})}return n})();const J5=new fe("DATE_PIPE_DEFAULT_TIMEZONE"),X5=new fe("DATE_PIPE_DEFAULT_OPTIONS");let ZC=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(null==t||""===t||t!=t)return null;try{return g5(t,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw ks()}}static#e=this.\u0275fac=function(r){return new(r||n)(X(zo,16),X(J5,24),X(X5,24))};static#t=this.\u0275pipe=hr({name:"date",type:n,pure:!0,standalone:!0})}return n})(),c6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=dr({type:n});static#n=this.\u0275inj=Cr({})}return n})();function rv(n){return"server"===n}let f6=(()=>{class n{static#e=this.\u0275prov=ve({token:n,providedIn:"root",factory:()=>new p6(ee(gr),window)})}return n})();class p6{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function g6(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class U6 extends W9{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class eD extends U6{static makeCurrent(){!function G9(n){NC||(NC=n)}(new eD)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function B6(){return wp=wp||document.querySelector("base"),wp?wp.getAttribute("href"):null}();return null==t?null:function j6(n){ov=ov||document.createElement("a"),ov.setAttribute("href",n);const e=ov.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){wp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function V5(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let ov,wp=null,H6=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac})}return n})();const tD=new fe("EventManagerPlugins");let aO=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new I(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(ee(tD),ee(yt))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac})}return n})();class uO{constructor(e){this._doc=e}}const nD="ng-app-id";let cO=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=rv(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${nD}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(nD),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(nD,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(gr),ee(cy),ee(yP,8),ee(Vo))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac})}return n})();const rD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},iD=/%COMP%/g,W6=new fe("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function dO(n,e){return e.map(t=>t.replace(iD,n))}let sD=(()=>{class n{constructor(t,r,i,s,o,a,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=rv(a),this.defaultRenderer=new oD(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Lr.ShadowDom&&(r={...r,encapsulation:Lr.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof fO?i.applyToHost(t):i instanceof aD&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Lr.Emulated:s=new fO(u,d,r,this.appId,f,o,a,g);break;case Lr.ShadowDom:return new Y6(u,d,t,r,o,a,this.nonce,g);default:s=new aD(u,d,r,f,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(ee(aO),ee(cO),ee(cy),ee(W6),ee(gr),ee(Vo),ee(yt),ee(yP))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac})}return n})();class oD{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(rD[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(hO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(hO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new I(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=rD[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=rD[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(za.DashCase|za.Important)?e.style.setProperty(t,r,i&za.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&za.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Ka().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function hO(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Y6 extends oD{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=dO(i.id,i.styles);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class aD extends oD{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?dO(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class fO extends aD{constructor(e,t,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,t,r,s,o,a,u,d),this.contentAttr=function K6(n){return"_ngcontent-%COMP%".replace(iD,n)}(d),this.hostAttr=function Z6(n){return"_nghost-%COMP%".replace(iD,n)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let J6=(()=>{class n extends uO{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(gr))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac})}return n})();const pO=["alt","control","meta","shift"],X6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},eW={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let tW=(()=>{class n extends uO{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ka().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),pO.forEach(d=>{const f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=X6[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),pO.forEach(o=>{o!==i&&(0,eW[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(ee(gr))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac})}return n})();const mO=[{provide:Vo,useValue:"browser"},{provide:mP,useValue:function nW(){eD.makeCurrent()},multi:!0},{provide:gr,useFactory:function iW(){return function U$(n){Kw=n}(document),document},deps:[]}],sW=d1(N9,"browser",mO),oW=new fe(""),_O=[{provide:Uy,useClass:class $6{addToWindow(e){jt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new I(5103,!1);return s},jt.getAllAngularTestabilities=()=>e.getAllTestabilities(),jt.getAllAngularRootElements=()=>e.getAllRootElements(),jt.frameworkStabilizers||(jt.frameworkStabilizers=[]),jt.frameworkStabilizers.push(r=>{const i=jt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Ka().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:o1,useClass:IC,deps:[yt,wC,Uy]},{provide:IC,useClass:IC,deps:[yt,wC,Uy]}],yO=[{provide:rT,useValue:"root"},{provide:Uo,useFactory:function rW(){return new Uo},deps:[]},{provide:tD,useClass:J6,multi:!0,deps:[gr,yt,Vo]},{provide:tD,useClass:tW,multi:!0,deps:[gr]},sD,cO,aO,{provide:Kf,useExisting:sD},{provide:class m6{},useClass:H6,deps:[]},[]];let vO=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:cy,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(ee(oW,12))};static#t=this.\u0275mod=dr({type:n});static#n=this.\u0275inj=Cr({providers:[...yO,..._O],imports:[c6,x9]})}return n})(),EO=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(ee(gr))};static#t=this.\u0275prov=ve({token:n,factory:function(r){let i=null;return i=r?new r:function uW(){return new EO(ee(gr))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;let TO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:function(r){let i=null;return i=r?new(r||n):ee(CO),i},providedIn:"root"})}return n})(),CO=(()=>{class n extends TO{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Bi.NONE:return r;case Bi.HTML:return Ys(r,"HTML")?Ui(r):oP(this._doc,String(r)).toString();case Bi.STYLE:return Ys(r,"Style")?Ui(r):r;case Bi.SCRIPT:if(Ys(r,"Script"))return Ui(r);throw new I(5200,!1);case Bi.URL:return Ys(r,"URL")?Ui(r):ny(String(r));case Bi.RESOURCE_URL:if(Ys(r,"ResourceURL"))return Ui(r);throw new I(5201,!1);default:throw new I(5202,!1)}}bypassSecurityTrustHtml(t){return function G$(n){return new B$(n)}(t)}bypassSecurityTrustStyle(t){return function W$(n){return new j$(n)}(t)}bypassSecurityTrustScript(t){return function K$(n){return new $$(n)}(t)}bypassSecurityTrustUrl(t){return function Z$(n){return new H$(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Q$(n){return new q$(n)}(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(gr))};static#t=this.\u0275prov=ve({token:n,factory:function(r){let i=null;return i=r?new r:function hW(n){return new CO(n.get(gr))}(ee(zr)),i},providedIn:"root"})}return n})();const{isArray:fW}=Array,{getPrototypeOf:pW,prototype:gW,keys:mW}=Object;function AO(n){if(1===n.length){const e=n[0];if(fW(e))return{args:e,keys:null};if(function _W(n){return n&&"object"==typeof n&&pW(n)===gW}(e)){const t=mW(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:yW}=Array;function bO(n){return Ae(e=>function vW(n,e){return yW(e)?n(...e):n(e)}(n,e))}function SO(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let RO=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(X(Lo),X(ji))};static#t=this.\u0275dir=je({type:n})}return n})(),_c=(()=>{class n extends RO{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=rr(n)))(i||n)}}();static#t=this.\u0275dir=je({type:n,features:[xt]})}return n})();const no=new fe("NgValueAccessor"),wW={provide:no,useExisting:Ct(()=>yd),multi:!0},CW=new fe("CompositionEventMode");let yd=(()=>{class n extends RO{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function TW(){const n=Ka()?Ka().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(X(Lo),X(ji),X(CW,8))};static#t=this.\u0275dir=je({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&_n("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[yn([wW]),xt]})}return n})();function Qa(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Wr=new fe("NgValidators"),Ya=new fe("NgAsyncValidators"),DW=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function OO(n){return Qa(n.value)?{required:!0}:null}function FO(n){return Qa(n.value)||DW.test(n.value)?null:{email:!0}}function av(n){return null}function BO(n){return null!=n}function jO(n){return op(n)?S(n):n}function $O(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function HO(n,e){return e.map(t=>t(n))}function qO(n){return n.map(e=>function AW(n){return!n.validate}(e)?e:t=>e.validate(t))}function cD(n){return null!=n?function zO(n){if(!n)return null;const e=n.filter(BO);return 0==e.length?null:function(t){return $O(HO(t,e))}}(qO(n)):null}function lD(n){return null!=n?function GO(n){if(!n)return null;const e=n.filter(BO);return 0==e.length?null:function(t){return function EW(...n){const e=Hn(n),{args:t,keys:r}=AO(n),i=new dt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,d=o;for(let f=0;f<o;f++){let g=!1;An(t[f]).subscribe(oe(s,_=>{g||(g=!0,d--),a[f]=_},()=>u--,void 0,()=>{(!u||!g)&&(d||s.next(r?SO(r,a):a),s.complete())}))}});return e?i.pipe(bO(e)):i}(HO(t,e).map(jO)).pipe(Ae($O))}}(qO(n)):null}function WO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function dD(n){return n?Array.isArray(n)?n:[n]:[]}function uv(n,e){return Array.isArray(n)?n.includes(e):n===e}function QO(n,e){const t=dD(e);return dD(n).forEach(i=>{uv(t,i)||t.push(i)}),t}function YO(n,e){return dD(e).filter(t=>!uv(n,t))}class JO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class li extends JO{get formDirective(){return null}get path(){return null}}class Ja extends JO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class XO{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let cv=(()=>{class n extends XO{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(X(Ja,2))};static#t=this.\u0275dir=je({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Sy("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[xt]})}return n})(),lv=(()=>{class n extends XO{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(X(li,10))};static#t=this.\u0275dir=je({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Sy("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[xt]})}return n})();const Tp="VALID",hv="INVALID",vd="PENDING",Cp="DISABLED";function pD(n){return(fv(n)?n.validators:n)||null}function gD(n,e){return(fv(e)?e.asyncValidators:n)||null}function fv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class rk{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Tp}get invalid(){return this.status===hv}get pending(){return this.status==vd}get disabled(){return this.status===Cp}get enabled(){return this.status!==Cp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(QO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(QO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(YO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(YO(e,this._rawAsyncValidators))}hasValidator(e){return uv(this._rawValidators,e)}hasAsyncValidator(e){return uv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=vd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Cp,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Tp,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tp||this.status===vd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cp:Tp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=vd,this._hasOwnPendingAsyncValidator=!0;const t=jO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Sn,this.statusChanges=new Sn}_calculateStatus(){return this._allControlsDisabled()?Cp:this.errors?hv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vd)?vd:this._anyControlsHaveStatus(hv)?hv:Tp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){fv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function PW(n){return Array.isArray(n)?cD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function MW(n){return Array.isArray(n)?lD(n):n||null}(this._rawAsyncValidators)}}class mD extends rk{constructor(e,t,r){super(pD(t),gD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function nk(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new I(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function tk(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new I(1e3,"");if(!r[t])throw new I(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Ed=new fe("CallSetDisabledState",{providedIn:"root",factory:()=>pv}),pv="always";function Dp(n,e,t=pv){_D(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function OW(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ik(n,e)})}(n,e),function FW(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function kW(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ik(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function xW(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function _v(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function _D(n,e){const t=function KO(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(WO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function ZO(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(WO(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();_v(e._rawValidators,i),_v(e._rawAsyncValidators,i)}function ik(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const jW={provide:li,useExisting:Ct(()=>Id)},Ap=(()=>Promise.resolve())();let Id=(()=>{class n extends li{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Sn,this.form=new mD({},cD(t),lD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ap.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Dp(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ap.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ap.then(()=>{const r=this._findContainer(t.path),i=new mD({});(function sk(n,e){_D(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ap.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ap.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function ok(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(X(Wr,10),X(Ya,10),X(Ed,8))};static#t=this.\u0275dir=je({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&_n("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[yn([jW]),xt]})}return n})();function ak(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function uk(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ck=class extends rk{constructor(e=null,t,r){super(pD(t),gD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=uk(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ak(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ak(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){uk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},qW={provide:Ja,useExisting:Ct(()=>bp)},hk=(()=>Promise.resolve())();let bp=(()=>{class n extends Ja{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new ck,this._registered=!1,this.name="",this.update=new Sn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function ED(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===yd?t=s:function UW(n){return Object.getPrototypeOf(n.constructor)===_c}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function vD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Dp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){hk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&md(r);hk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function gv(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(X(li,9),X(Wr,10),X(Ya,10),X(no,10),X(jy,8),X(Ed,8))};static#t=this.\u0275dir=je({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[yn([qW]),xt,Ii]})}return n})(),vv=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=je({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),pk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=dr({type:n});static#n=this.\u0275inj=Cr({})}return n})(),yc=(()=>{class n{constructor(){this._validator=av}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):av,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=je({type:n,features:[Ii]})}return n})();const u8={provide:Wr,useExisting:Ct(()=>wd),multi:!0};let wd=(()=>{class n extends yc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=md,this.createValidator=t=>OO}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=rr(n)))(i||n)}}();static#t=this.\u0275dir=je({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&bi("required",i._enabled?"":null)},inputs:{required:"required"},features:[yn([u8]),xt]})}return n})();const l8={provide:Wr,useExisting:Ct(()=>Sp),multi:!0};let Sp=(()=>{class n extends yc{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=md,this.createValidator=t=>FO}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=rr(n)))(i||n)}}();static#t=this.\u0275dir=je({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[yn([l8]),xt]})}return n})(),p8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=dr({type:n});static#n=this.\u0275inj=Cr({imports:[pk]})}return n})(),m8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ed,useValue:t.callSetDisabledState??pv}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=dr({type:n});static#n=this.\u0275inj=Cr({imports:[p8]})}return n})();class Mk{}class _8{}const Yo="*";function y8(n,e){return{type:7,name:n,definitions:e,options:{}}}function Nk(n,e=null){return{type:4,styles:e,timings:n}}function xk(n,e=null){return{type:2,steps:n,options:e}}function Rp(n){return{type:6,styles:n,offset:null}}function AD(n,e,t){return{type:0,name:n,styles:e,options:t}}function Ok(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}class Pp{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class kk{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Fk=["toast-component",""];function v8(n,e){if(1&n){const t=cd();q(0,"button",5),_n("click",function(){return Pa(t),Ma(zt().remove())}),q(1,"span",6),le(2,"\xd7"),Z()()}}function E8(n,e){if(1&n&&(ip(0),le(1),sp()),2&n){const t=zt(2);ae(1),oi("[",t.duplicatesCount+1,"]")}}function I8(n,e){if(1&n&&(q(0,"div"),le(1),ke(2,E8,2,1,"ng-container",4),Z()),2&n){const t=zt();$o(t.options.titleClass),bi("aria-label",t.title),ae(1),oi(" ",t.title," "),ae(1),_e("ngIf",t.duplicatesCount)}}function w8(n,e){if(1&n&&Pt(0,"div",7),2&n){const t=zt();$o(t.options.messageClass),_e("innerHTML",t.message,iy)}}function T8(n,e){if(1&n&&(q(0,"div",8),le(1),Z()),2&n){const t=zt();$o(t.options.messageClass),bi("aria-label",t.message),ae(1),oi(" ",t.message," ")}}function C8(n,e){if(1&n&&(q(0,"div"),Pt(1,"div",9),Z()),2&n){const t=zt();ae(1),dd("width",t.width+"%")}}class M8{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class N8{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class x8{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new L;_activate=new L;_manualClose=new L;_resetTimeout=new L;_countDuplicate=new L;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class Ev{toastId;config;message;title;toastType;toastRef;_onTap=new L;_onAction=new L;constructor(e,t,r,i,s,o){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const Lk=new fe("ToastConfig");class O8 extends N8{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let k8=(()=>{class n{_document=Ee(gr);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class F8{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let V8=(()=>{class n{_overlayContainer=Ee(k8);_componentFactoryResolver=Ee(Wf);_appRef=Ee(Go);_document=Ee(gr);_paneElements=new Map;create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new O8(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new F8(this._createPortalHost(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Iv=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,r,i,s,o){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=o,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},s=""){return this._preBuildNotification(s,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,s){const{includeTitleDuplicates:o}=this.toastrConfig;for(const a of this.toasts)if((!o||o&&a.title===t)&&a.message===r)return a.toastRef.onDuplicate(i,s),a;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,s)):this._buildNotification(t,r,i,s)}_buildNotification(t,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const u=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let d=r;r&&s.enableHtml&&(d=this.sanitizer.sanitize(Bi.HTML,r));const f=new x8(u),g=new Ev(this.index,s,d,i,t,f),y=zr.create({providers:[{provide:Ev,useValue:g}],parent:this._injector}),E=new M8(s.toastComponent,y),T=u.attach(E,s.newestOnTop);f.componentInstance=T.instance;const A={toastId:this.index,title:i||"",message:r||"",toastRef:f,onShown:f.afterActivate(),onHidden:f.afterClosed(),onTap:g.onTap(),onAction:g.onAction(),portal:T};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{A.toastRef.activate()})),this.toasts.push(A),A}static \u0275fac=function(r){return new(r||n)(ee(Lk),ee(V8),ee(zr),ee(TO),ee(yt))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const L8={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if("inactive"===this.state.value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(r){return new(r||n)(X(Iv),X(Ev),X(yt))};static \u0275cmp=wn({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){1&r&&_n("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),2&r&&(KT("@flyInOut",i.state),$o(i.toastClasses),dd("display",i.displayStyle))},standalone:!0,features:[Oy],attrs:Fk,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){1&r&&(ke(0,v8,3,0,"button",0),ke(1,I8,3,5,"div",1),ke(2,w8,1,3,"div",2),ke(3,T8,2,4,"div",3),ke(4,C8,2,2,"div",4)),2&r&&(_e("ngIf",i.options.closeButton),ae(1),_e("ngIf",i.title),ae(1),_e("ngIf",i.message&&i.options.enableHtml),ae(1),_e("ngIf",i.message&&!i.options.enableHtml),ae(1),_e("ngIf",i.options.progressBar))},dependencies:[Qo],encapsulation:2,data:{animation:[y8("flyInOut",[AD("inactive",Rp({opacity:0})),AD("active",Rp({opacity:1})),AD("removed",Rp({opacity:0})),Ok("inactive => active",Nk("{{ easeTime }}ms {{ easing }}")),Ok("active => removed",Nk("{{ easeTime }}ms {{ easing }}"))])]}})}return n})()},U8=(n={})=>function eT(n){return{\u0275providers:n}}([{provide:Lk,useValue:{default:L8,config:n}}]);let B8=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[U8(t)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=Cr({})}return n})();function Uk(n){return new I(3e3,!1)}function Xa(n){switch(n.length){case 0:return new Pp;case 1:return n[0];default:return new kk(n)}}function Bk(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(u=>{const d=u.get("offset"),f=d==o,g=f&&a||new Map;u.forEach((_,y)=>{let E=y,T=_;if("offset"!==y)switch(E=n.normalizePropertyName(E,i),T){case"!":T=t.get(y);break;case Yo:T=r.get(y);break;default:T=n.normalizeStyleValue(y,E,T,i)}g.set(E,T)}),f||s.push(g),a=g,o=d}),i.length)throw function c7(n){return new I(3502,!1)}();return s}function SD(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&RD(t,"start",n)));break;case"done":n.onDone(()=>r(t&&RD(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&RD(t,"destroy",n)))}}function RD(n,e,t){const s=PD(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function PD(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function qi(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function jk(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const I7=(()=>typeof document>"u"?null:document.documentElement)();function MD(n){const e=n.parentNode||n.host||null;return e===I7?null:e}let vc=null,$k=!1;function Hk(n,e){for(;e;){if(e===n)return!0;e=MD(e)}return!1}function qk(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let zk=(()=>{class n{validateStyleProperty(t){return function T7(n){vc||(vc=function C7(){return typeof document<"u"?document.body:null}()||{},$k=!!vc.style&&"WebkitAppearance"in vc.style);let e=!0;return vc.style&&!function w7(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in vc.style,!e&&$k&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in vc.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return Hk(t,r)}getParentElement(t){return MD(t)}query(t,r,i){return qk(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],u){return new Pp(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac})}return n})(),ND=(()=>{class n{static#e=this.NOOP=new zk}return n})();const D7=1e3,xD="ng-enter",wv="ng-leave",Tv="ng-trigger",Cv=".ng-trigger",Wk="ng-animating",OD=".ng-animating";function Jo(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:kD(parseFloat(e[1]),e[2])}function kD(n,e){return"s"===e?n*D7:n}function Dv(n,e,t){return n.hasOwnProperty("duration")?n:function b7(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(Uk()),{duration:0,delay:0,easing:""};i=kD(parseFloat(a[1]),a[2]);const u=a[3];null!=u&&(s=kD(parseFloat(u),a[4]));const d=a[5];d&&(o=d)}else i=n;if(!t){let a=!1,u=e.length;i<0&&(e.push(function j8(){return new I(3100,!1)}()),a=!0),s<0&&(e.push(function $8(){return new I(3101,!1)}()),a=!0),a&&e.splice(u,0,Uk())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Mp(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Kk(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function eu(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function ro(n,e,t){e.forEach((r,i)=>{const s=VD(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Ec(n,e){e.forEach((t,r)=>{const i=VD(r);n.style[i]=""})}function Np(n){return Array.isArray(n)?1==n.length?n[0]:xk(n):n}const FD=new RegExp("{{\\s*(.+?)\\s*}}","g");function Qk(n){let e=[];if("string"==typeof n){let t;for(;t=FD.exec(n);)e.push(t[1]);FD.lastIndex=0}return e}function xp(n,e,t){const r=n.toString(),i=r.replace(FD,(s,o)=>{let a=e[o];return null==a&&(t.push(function q8(n){return new I(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function Av(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const P7=/-+([a-z0-9])/g;function VD(n){return n.replace(P7,(...e)=>e[1].toUpperCase())}function zi(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function z8(n){return new I(3004,!1)}()}}function Yk(n,e){return window.getComputedStyle(n)[e]}const bv="*";function x7(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function O7(n,e,t){if(":"==n[0]){const u=function k7(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function s7(n){return new I(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof u)return void e.push(u);n=u}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function i7(n){return new I(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(Jk(i,o));"<"==s[0]&&!(i==bv&&o==bv)&&e.push(Jk(o,i))}(r,t,e)):t.push(n),t}const Sv=new Set(["true","1"]),Rv=new Set(["false","0"]);function Jk(n,e){const t=Sv.has(n)||Rv.has(n),r=Sv.has(e)||Rv.has(e);return(i,s)=>{let o=n==bv||n==i,a=e==bv||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?Sv.has(n):Rv.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?Sv.has(e):Rv.has(e)),o&&a}}const F7=new RegExp("s*:selfs*,?","g");function LD(n,e,t,r){return new V7(n).build(e,t,r)}class V7{constructor(e){this._driver=e}build(e,t,r){const i=new B7(t);return this._resetContextStyleTimingState(i),zi(this,Np(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function W8(){return new I(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const u=a,d=u.name;d.toString().split(/\s*,\s*/).forEach(f=>{u.name=f,s.push(this.visitState(u,t))}),u.name=d}else if(1==a.type){const u=this.visitTransition(a,t);r+=u.queryCount,i+=u.depCount,o.push(u)}else t.errors.push(function K8(){return new I(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(u=>{Qk(u).forEach(d=>{o.hasOwnProperty(d)||s.add(d)})})}),s.size&&(Av(s.values()),t.errors.push(function Z8(n,e){return new I(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=zi(this,Np(e.animation),t);return{type:1,matchers:x7(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ic(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>zi(this,r,t)),options:Ic(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=zi(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:Ic(e.options)}}visitAnimate(e,t){const r=function $7(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return UD(Dv(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=UD(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=Dv(t,e);return UD(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Rp({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const d={};r.easing&&(d.easing=r.easing),o=Rp(d)}t.currentTime+=r.duration+r.delay;const u=this.visitStyle(o,t);u.isEmptyStep=a,i=u}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Yo?r.push(a):t.errors.push(new I(3002,!1)):r.push(Kk(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let u of a.values())if(u.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,u)=>{const d=t.collectedStyles.get(t.currentQuerySelector),f=d.get(u);let g=!0;f&&(s!=i&&s>=f.startTime&&i<=f.endTime&&(t.errors.push(function Y8(n,e,t,r,i){return new I(3010,!1)}()),g=!1),s=f.startTime),g&&d.set(u,{startTime:s,endTime:i}),t.options&&function R7(n,e,t){const r=e.params||{},i=Qk(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function H8(n){return new I(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function J8(){return new I(3011,!1)}()),r;let s=0;const o=[];let a=!1,u=!1,d=0;const f=e.steps.map(N=>{const R=this._makeStyleAst(N,t);let k=null!=R.offset?R.offset:function j7(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(R.styles),K=0;return null!=k&&(s++,K=R.offset=k),u=u||K<0||K>1,a=a||K<d,d=K,o.push(K),R});u&&t.errors.push(function X8(){return new I(3012,!1)}()),a&&t.errors.push(function e7(){return new I(3200,!1)}());const g=e.steps.length;let _=0;s>0&&s<g?t.errors.push(function t7(){return new I(3202,!1)}()):0==s&&(_=1/(g-1));const y=g-1,E=t.currentTime,T=t.currentAnimateTimings,A=T.duration;return f.forEach((N,R)=>{const k=_>0?R==y?1:_*R:o[R],K=k*A;t.currentTime=E+T.delay+K,T.duration=K,this._validateStyleAst(N,t),N.offset=k,r.styles.push(N)}),r}visitReference(e,t){return{type:8,animation:zi(this,Np(e.animation),t),options:Ic(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Ic(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Ic(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function L7(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(F7,"")),n=n.replace(/@\*/g,Cv).replace(/@\w+/g,t=>Cv+"-"+t.slice(1)).replace(/:animating/g,OD),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,qi(t.collectedStyles,t.currentQuerySelector,new Map);const a=zi(this,Np(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Ic(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function n7(){return new I(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Dv(e.timings,t.errors,!0);return{type:12,animation:zi(this,Np(e.animation),t),timings:r,options:null}}}class B7{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ic(n){return n?(n=Mp(n)).params&&(n.params=function U7(n){return n?Mp(n):null}(n.params)):n={},n}function UD(n,e,t){return{duration:n,delay:e,easing:t}}function BD(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Pv{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const z7=new RegExp(":enter","g"),W7=new RegExp(":leave","g");function jD(n,e,t,r,i,s=new Map,o=new Map,a,u,d=[]){return(new K7).buildKeyframes(n,e,t,r,i,s,o,a,u,d)}class K7{buildKeyframes(e,t,r,i,s,o,a,u,d,f=[]){d=d||new Pv;const g=new $D(e,t,d,i,s,f,[]);g.options=u;const _=u.delay?Jo(u.delay):0;g.currentTimeline.delayNextStep(_),g.currentTimeline.setStyles([o],null,g.errors,u),zi(this,r,g);const y=g.timelines.filter(E=>E.containsAnimation());if(y.length&&a.size){let E;for(let T=y.length-1;T>=0;T--){const A=y[T];if(A.element===t){E=A;break}}E&&!E.allowOnlyTimelineStyles()&&E.setStyles([a],null,g.errors,u)}return y.length?y.map(E=>E.buildKeyframes()):[BD(t,[],[],[],0,_,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:Jo(xp(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?Jo(r.duration):null,a=null!=r.delay?Jo(r.delay):null;return 0!==o&&e.forEach(u=>{const d=t.appendInstructionToTimeline(u,o,a);s=Math.max(s,d.duration+d.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),zi(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Mv);const o=Jo(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>zi(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Jo(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),zi(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Dv(t.params?xp(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(u=>{a.forwardTime((u.offset||0)*s),a.setStyles(u.styles,u.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Jo(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Mv);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let u=null;a.forEach((d,f)=>{t.currentQueryIndex=f;const g=t.createSubContext(e.options,d);s&&g.delayNextStep(s),d===t.element&&(u=g.currentTimeline),zi(this,e.animation,g),g.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,g.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let u=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=a-u;break;case"full":u=r.currentStaggerTime}const f=t.currentTimeline;u&&f.delayNextStep(u);const g=f.currentTime;zi(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-g+(i.startTime-r.currentTimeline.startTime)}}const Mv={};class $D{constructor(e,t,r,i,s,o,a,u){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Mv,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new Nv(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Jo(r.duration)),null!=r.delay&&(i.delay=Jo(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=xp(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new $D(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Mv,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Z7(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(z7,"."+this._enterClassName)).replace(W7,"."+this._leaveClassName);let d=this._driver.query(this.element,e,1!=r);0!==r&&(d=r<0?d.slice(d.length+r,d.length):d.slice(0,r)),a.push(...d)}return!s&&0==a.length&&o.push(function r7(n){return new I(3014,!1)}()),a}}class Nv{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Nv(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Yo),this._currentKeyframe.set(t,Yo);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function Q7(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Yo)}else eu(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,u]of o){const d=xp(u,s,r);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Yo),this._updateStyle(a,d)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,u)=>{const d=eu(a,new Map,this._backFill);d.forEach((f,g)=>{"!"===f?e.add(g):f===Yo&&t.add(g)}),r||d.set("offset",u/this.duration),i.push(d)});const s=e.size?Av(e.values()):[],o=t.size?Av(t.values()):[];if(r){const a=i[0],u=new Map(a);a.set("offset",0),u.set("offset",1),i=[a,u]}return BD(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class Z7 extends Nv{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,u=eu(e[0]);u.set("offset",0),s.push(u);const d=eu(e[0]);d.set("offset",tF(a)),s.push(d);const f=e.length-1;for(let g=1;g<=f;g++){let _=eu(e[g]);const y=_.get("offset");_.set("offset",tF((t+y*r)/o)),s.push(_)}r=o,t=0,i="",e=s}return BD(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function tF(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class HD{}const Y7=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class J7 extends HD{normalizePropertyName(e,t){return VD(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(Y7.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function G8(n,e){return new I(3005,!1)}())}return o+s}}function nF(n,e,t,r,i,s,o,a,u,d,f,g,_){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:d,postStyleProps:f,totalTime:g,errors:_}}const qD={};class rF{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function X7(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,u,d,f){const g=[],_=this.ast.options&&this.ast.options.params||qD,E=this.buildStyles(r,a&&a.params||qD,g),T=u&&u.params||qD,A=this.buildStyles(i,T,g),N=new Set,R=new Map,k=new Map,K="void"===i,ce={params:eK(T,_),delay:this.ast.options?.delay},Me=f?[]:jD(e,t,this.ast.animation,s,o,E,A,ce,d,g);let ze=0;if(Me.forEach(gi=>{ze=Math.max(gi.duration+gi.delay,ze)}),g.length)return nF(t,this._triggerName,r,i,K,E,A,[],[],R,k,ze,g);Me.forEach(gi=>{const xi=gi.element,RI=qi(R,xi,new Set);gi.preStyleProps.forEach(Yc=>RI.add(Yc));const dm=qi(k,xi,new Set);gi.postStyleProps.forEach(Yc=>dm.add(Yc)),xi!==t&&N.add(xi)});const Vt=Av(N.values());return nF(t,this._triggerName,r,i,K,E,A,Me,Vt,R,k,ze)}}function eK(n,e){const t=Mp(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class tK{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Mp(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=xp(o,i,t));const u=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,u,o,t),r.set(a,o)})}),r}}class rK{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new tK(i.style,i.options&&i.options.params||{},r))}),iF(this.states,"true","1"),iF(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new rF(e,i,this.states))}),this.fallbackTransition=function iK(n,e,t){return new rF(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function iF(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const sK=new Pv;class oK{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=LD(this._driver,t,r,[]);if(r.length)throw function l7(n){return new I(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=Bk(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=jD(this._driver,t,s,xD,wv,new Map,new Map,r,sK,i),o.forEach(f=>{const g=qi(a,f.element,new Map);f.postStyleProps.forEach(_=>g.set(_,null))})):(i.push(function d7(){return new I(3300,!1)}()),o=[]),i.length)throw function h7(n){return new I(3504,!1)}();a.forEach((f,g)=>{f.forEach((_,y)=>{f.set(y,this._driver.computeStyle(g,y,Yo))})});const d=Xa(o.map(f=>{const g=a.get(f.element);return this._buildPlayer(f,new Map,g)}));return this._playersById.set(e,d),d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function f7(n){return new I(3301,!1)}();return t}listen(e,t,r,i){const s=PD(t,"","","");return SD(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const sF="ng-animate-queued",zD="ng-animate-disabled",dK=[],oF={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},hK={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Fs="__ng_removed";class GD{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function mK(n){return n??null}(r?e.value:e),r){const s=Mp(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Op="void",WD=new GD(Op);class fK{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ls(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function p7(n,e){return new I(3302,!1)}();if(null==r||0==r.length)throw function g7(n){return new I(3303,!1)}();if(!function _K(n){return"start"==n||"done"==n}(r))throw function m7(n,e){return new I(3400,!1)}();const s=qi(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=qi(this._engine.statesByElement,e,new Map);return a.has(t)||(ls(e,Tv),ls(e,Tv+"-"+t),a.set(t,WD)),()=>{this._engine.afterFlush(()=>{const u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function _7(n){return new I(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new KD(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(ls(e,Tv),ls(e,Tv+"-"+t),this._engine.statesByElement.set(e,a=new Map));let u=a.get(t);const d=new GD(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&u&&d.absorbOptions(u.options),a.set(t,d),u||(u=WD),d.value!==Op&&u.value===d.value){if(!function EK(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(u.params,d.params)){const T=[],A=s.matchStyles(u.value,u.params,T),N=s.matchStyles(d.value,d.params,T);T.length?this._engine.reportError(T):this._engine.afterFlush(()=>{Ec(e,A),ro(e,N)})}return}const _=qi(this._engine.playersByElement,e,[]);_.forEach(T=>{T.namespaceId==this.id&&T.triggerName==t&&T.queued&&T.destroy()});let y=s.matchTransition(u.value,d.value,e,d.params),E=!1;if(!y){if(!i)return;y=s.fallbackTransition,E=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:u,toState:d,player:o,isFallbackTransition:E}),E||(ls(e,sF),o.onStart(()=>{Td(e,sF)})),o.onDone(()=>{let T=this.players.indexOf(o);T>=0&&this.players.splice(T,1);const A=this._engine.playersByElement.get(e);if(A){let N=A.indexOf(o);N>=0&&A.splice(N,1)}}),this.players.push(o),_.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Cv,!0);r.forEach(i=>{if(i[Fs])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((u,d)=>{if(o.set(d,u.value),this._triggers.has(d)){const f=this.trigger(e,d,Op,i);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Xa(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const u=this._triggers.get(o).fallbackTransition,d=r.get(o)||WD,f=new GD(Op),g=new KD(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:u,fromState:d,toState:f,player:g,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Fs];(!s||s===oF)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ls(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const u=PD(s,r.triggerName,r.fromState.value,r.toState.value);u._data=e,SD(r.player,a.phase,u,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class pK{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new fK(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const u=i.get(a);if(u){const d=r.indexOf(u);r.splice(d+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(xv(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!xv(t))return;const s=t[Fs];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ls(e,zD)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Td(e,zD))}removeNode(e,t,r){if(xv(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Fs]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return xv(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Cv,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,OD,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Xa(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Fs];if(t&&t.setForRemoval){if(e[Fs]=oF,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(zD)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ls(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Xa(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function y7(n){return new I(3402,!1)}()}_flushAnimations(e,t){const r=new Pv,i=[],s=new Map,o=[],a=new Map,u=new Map,d=new Map,f=new Set;this.disabledNodes.forEach(Se=>{f.add(Se);const Fe=this.driver.query(Se,".ng-animate-queued",!0);for(let $e=0;$e<Fe.length;$e++)f.add(Fe[$e])});const g=this.bodyNode,_=Array.from(this.statesByElement.keys()),y=cF(_,this.collectedEnterElements),E=new Map;let T=0;y.forEach((Se,Fe)=>{const $e=xD+T++;E.set(Fe,$e),Se.forEach(Tt=>ls(Tt,$e))});const A=[],N=new Set,R=new Set;for(let Se=0;Se<this.collectedLeaveElements.length;Se++){const Fe=this.collectedLeaveElements[Se],$e=Fe[Fs];$e&&$e.setForRemoval&&(A.push(Fe),N.add(Fe),$e.hasAnimation?this.driver.query(Fe,".ng-star-inserted",!0).forEach(Tt=>N.add(Tt)):R.add(Fe))}const k=new Map,K=cF(_,Array.from(N));K.forEach((Se,Fe)=>{const $e=wv+T++;k.set(Fe,$e),Se.forEach(Tt=>ls(Tt,$e))}),e.push(()=>{y.forEach((Se,Fe)=>{const $e=E.get(Fe);Se.forEach(Tt=>Td(Tt,$e))}),K.forEach((Se,Fe)=>{const $e=k.get(Fe);Se.forEach(Tt=>Td(Tt,$e))}),A.forEach(Se=>{this.processLeaveNode(Se)})});const ce=[],Me=[];for(let Se=this._namespaceList.length-1;Se>=0;Se--)this._namespaceList[Se].drainQueuedTransitions(t).forEach($e=>{const Tt=$e.player,Ir=$e.element;if(ce.push(Tt),this.collectedEnterElements.length){const ei=Ir[Fs];if(ei&&ei.setForMove){if(ei.previousTriggersValues&&ei.previousTriggersValues.has($e.triggerName)){const Jc=ei.previousTriggersValues.get($e.triggerName),ps=this.statesByElement.get($e.element);if(ps&&ps.has($e.triggerName)){const PI=ps.get($e.triggerName);PI.value=Jc,ps.set($e.triggerName,PI)}}return void Tt.destroy()}}const _o=!g||!this.driver.containsElement(g,Ir),Yi=k.get(Ir),Su=E.get(Ir),Dn=this._buildInstruction($e,r,Su,Yi,_o);if(Dn.errors&&Dn.errors.length)return void Me.push(Dn);if(_o)return Tt.onStart(()=>Ec(Ir,Dn.fromStyles)),Tt.onDestroy(()=>ro(Ir,Dn.toStyles)),void i.push(Tt);if($e.isFallbackTransition)return Tt.onStart(()=>Ec(Ir,Dn.fromStyles)),Tt.onDestroy(()=>ro(Ir,Dn.toStyles)),void i.push(Tt);const Yj=[];Dn.timelines.forEach(ei=>{ei.stretchStartingKeyframe=!0,this.disabledNodes.has(ei.element)||Yj.push(ei)}),Dn.timelines=Yj,r.append(Ir,Dn.timelines),o.push({instruction:Dn,player:Tt,element:Ir}),Dn.queriedElements.forEach(ei=>qi(a,ei,[]).push(Tt)),Dn.preStyleProps.forEach((ei,Jc)=>{if(ei.size){let ps=u.get(Jc);ps||u.set(Jc,ps=new Set),ei.forEach((PI,qS)=>ps.add(qS))}}),Dn.postStyleProps.forEach((ei,Jc)=>{let ps=d.get(Jc);ps||d.set(Jc,ps=new Set),ei.forEach((PI,qS)=>ps.add(qS))})});if(Me.length){const Se=[];Me.forEach(Fe=>{Se.push(function v7(n,e){return new I(3505,!1)}())}),ce.forEach(Fe=>Fe.destroy()),this.reportError(Se)}const ze=new Map,Vt=new Map;o.forEach(Se=>{const Fe=Se.element;r.has(Fe)&&(Vt.set(Fe,Fe),this._beforeAnimationBuild(Se.player.namespaceId,Se.instruction,ze))}),i.forEach(Se=>{const Fe=Se.element;this._getPreviousPlayers(Fe,!1,Se.namespaceId,Se.triggerName,null).forEach(Tt=>{qi(ze,Fe,[]).push(Tt),Tt.destroy()})});const gi=A.filter(Se=>dF(Se,u,d)),xi=new Map;uF(xi,this.driver,R,d,Yo).forEach(Se=>{dF(Se,u,d)&&gi.push(Se)});const dm=new Map;y.forEach((Se,Fe)=>{uF(dm,this.driver,new Set(Se),u,"!")}),gi.forEach(Se=>{const Fe=xi.get(Se),$e=dm.get(Se);xi.set(Se,new Map([...Fe?.entries()??[],...$e?.entries()??[]]))});const Yc=[],Zj=[],Qj={};o.forEach(Se=>{const{element:Fe,player:$e,instruction:Tt}=Se;if(r.has(Fe)){if(f.has(Fe))return $e.onDestroy(()=>ro(Fe,Tt.toStyles)),$e.disabled=!0,$e.overrideTotalTime(Tt.totalTime),void i.push($e);let Ir=Qj;if(Vt.size>1){let Yi=Fe;const Su=[];for(;Yi=Yi.parentNode;){const Dn=Vt.get(Yi);if(Dn){Ir=Dn;break}Su.push(Yi)}Su.forEach(Dn=>Vt.set(Dn,Ir))}const _o=this._buildAnimation($e.namespaceId,Tt,ze,s,dm,xi);if($e.setRealPlayer(_o),Ir===Qj)Yc.push($e);else{const Yi=this.playersByElement.get(Ir);Yi&&Yi.length&&($e.parentPlayer=Xa(Yi)),i.push($e)}}else Ec(Fe,Tt.fromStyles),$e.onDestroy(()=>ro(Fe,Tt.toStyles)),Zj.push($e),f.has(Fe)&&i.push($e)}),Zj.forEach(Se=>{const Fe=s.get(Se.element);if(Fe&&Fe.length){const $e=Xa(Fe);Se.setRealPlayer($e)}}),i.forEach(Se=>{Se.parentPlayer?Se.syncPlayerEvents(Se.parentPlayer):Se.destroy()});for(let Se=0;Se<A.length;Se++){const Fe=A[Se],$e=Fe[Fs];if(Td(Fe,wv),$e&&$e.hasAnimation)continue;let Tt=[];if(a.size){let _o=a.get(Fe);_o&&_o.length&&Tt.push(..._o);let Yi=this.driver.query(Fe,OD,!0);for(let Su=0;Su<Yi.length;Su++){let Dn=a.get(Yi[Su]);Dn&&Dn.length&&Tt.push(...Dn)}}const Ir=Tt.filter(_o=>!_o.destroyed);Ir.length?yK(this,Fe,Ir):this.processLeaveNode(Fe)}return A.length=0,Yc.forEach(Se=>{this.players.push(Se),Se.onDone(()=>{Se.destroy();const Fe=this.players.indexOf(Se);this.players.splice(Fe,1)}),Se.play()}),Yc}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const u=!s||s==Op;a.forEach(d=>{d.queued||!u&&d.triggerName!=i||o.push(d)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const u of t.timelines){const d=u.element,f=d!==s,g=qi(r,d,[]);this._getPreviousPlayers(d,f,o,a,t.toState).forEach(y=>{const E=y.getRealPlayer();E.beforeDestroy&&E.beforeDestroy(),y.destroy(),g.push(y)})}Ec(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,u=t.element,d=[],f=new Set,g=new Set,_=t.timelines.map(E=>{const T=E.element;f.add(T);const A=T[Fs];if(A&&A.removedBeforeQueried)return new Pp(E.duration,E.delay);const N=T!==u,R=function vK(n){const e=[];return lF(n,e),e}((r.get(T)||dK).map(ze=>ze.getRealPlayer())).filter(ze=>!!ze.element&&ze.element===T),k=s.get(T),K=o.get(T),ce=Bk(this._normalizer,E.keyframes,k,K),Me=this._buildPlayer(E,ce,R);if(E.subTimeline&&i&&g.add(T),N){const ze=new KD(e,a,T);ze.setRealPlayer(Me),d.push(ze)}return Me});d.forEach(E=>{qi(this.playersByQueriedElement,E.element,[]).push(E),E.onDone(()=>function gK(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,E.element,E))}),f.forEach(E=>ls(E,Wk));const y=Xa(_);return y.onDestroy(()=>{f.forEach(E=>Td(E,Wk)),ro(u,t.toStyles)}),g.forEach(E=>{qi(i,E,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Pp(e.duration,e.delay)}}class KD{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Pp,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>SD(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){qi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function xv(n){return n&&1===n.nodeType}function aF(n,e){const t=n.style.display;return n.style.display=e??"none",t}function uF(n,e,t,r,i){const s=[];t.forEach(u=>s.push(aF(u)));const o=[];r.forEach((u,d)=>{const f=new Map;u.forEach(g=>{const _=e.computeStyle(d,g,i);f.set(g,_),(!_||0==_.length)&&(d[Fs]=hK,o.push(d))}),n.set(d,f)});let a=0;return t.forEach(u=>aF(u,s[a++])),o}function cF(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let u=s.get(a);if(u)return u;const d=a.parentNode;return u=t.has(d)?d:i.has(d)?1:o(d),s.set(a,u),u}return e.forEach(a=>{const u=o(a);1!==u&&t.get(u).push(a)}),t}function ls(n,e){n.classList?.add(e)}function Td(n,e){n.classList?.remove(e)}function yK(n,e,t){Xa(t).onDone(()=>n.processLeaveNode(e))}function lF(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof kk?lF(r.players,e):e.push(r)}}function dF(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class Ov{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new pK(e,t,r),this._timelineEngine=new oK(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const u=[],f=LD(this._driver,s,u,[]);if(u.length)throw function u7(n,e){return new I(3404,!1)}();a=function nK(n,e,t){return new rK(n,e,t)}(i,f,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=jk(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=jk(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let wK=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ro(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ro(this._element,this._initialStyles),this._endStyles&&(ro(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ec(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ec(this._element,this._endStyles),this._endStyles=null),ro(this._element,this._initialStyles),this._state=3)}}return n})();function ZD(n){let e=null;return n.forEach((t,r)=>{(function TK(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class hF{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:Yk(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class CK{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Hk(e,t)}getParentElement(e){return MD(e)}query(e,t,r){return qk(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const u={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(u.easing=s);const d=new Map,f=o.filter(y=>y instanceof hF);(function M7(n,e){return 0===n||0===e})(r,i)&&f.forEach(y=>{y.currentSnapshot.forEach((E,T)=>d.set(T,E))});let g=function S7(n){return n.length?n[0]instanceof Map?n:n.map(e=>Kk(e)):[]}(t).map(y=>eu(y));g=function N7(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,Yk(n,a)))}}return e}(e,g,d);const _=function IK(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=ZD(e[0]),e.length>1&&(r=ZD(e[e.length-1]))):e instanceof Map&&(t=ZD(e)),t||r?new wK(n,t,r):null}(e,g);return new hF(e,g,u,_)}}let DK=(()=>{class n extends Mk{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Lr.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?xk(t):t;return fF(this._renderer,null,r,"register",[i]),new AK(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Kf),ee(gr))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac})}return n})();class AK extends _8{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new bK(this._id,e,t||{},this._renderer)}}class bK{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return fF(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function fF(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const pF="@.disabled";let SK=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let f=this._rendererCache.get(s);return f||(f=new gF("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,f)),f}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const u=f=>{Array.isArray(f)?f.forEach(u):this.engine.registerTrigger(o,a,t,f.name,f)};return r.data.animation.forEach(u),new RK(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Kf),ee(Ov),ee(yt))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac})}return n})();class gF{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==pF?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class RK extends gF{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==pF?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function PK(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function MK(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let NK=(()=>{class n extends Ov{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(ee(gr),ee(ND),ee(HD),ee(Go))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac})}return n})();const mF=[{provide:Mk,useClass:DK},{provide:HD,useFactory:function xK(){return new J7}},{provide:Ov,useClass:NK},{provide:Kf,useFactory:function OK(n,e,t){return new SK(n,e,t)},deps:[sD,Ov,yt]}],QD=[{provide:ND,useFactory:()=>new CK},{provide:_P,useValue:"BrowserAnimations"},...mF],_F=[{provide:ND,useClass:zk},{provide:_P,useValue:"NoopAnimations"},...mF];let kK=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?_F:QD}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=dr({type:n});static#n=this.\u0275inj=Cr({providers:QD,imports:[vO]})}return n})();var Cd=Qe(534);(0,Cd.registerVersion)("firebase","10.10.0","app");class LK extends mt{constructor(e,t){super()}schedule(e,t=0){return this}}const Fv={setInterval(n,e,...t){const{delegate:r}=Fv;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Fv;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class yF extends LK{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Fv.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Fv.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,B(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const YD={now:()=>(YD.delegate||Date).now(),delegate:void 0};class kp{constructor(e,t=kp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}kp.now=YD.now;class vF extends kp{constructor(e,t=kp.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const jK=new class BK extends vF{}(class UK extends yF{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),EF=new vF(yF);function Rr(n,e,t){const r=w(n)||e||t?{next:n,error:e,complete:t}:n;return r?j((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(oe(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):Wt}const JD=new Ql("ANGULARFIRE2_VERSION");class IF{constructor(){return((n,e)=>{const t=(0,Cd.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(HK)}}const HK="app-check";function Dd(){}class wF{zone;delegate;constructor(e,t=jK){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class qK{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dd,{},Dd,Dd)),t.pipe(Rr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let TF=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new wF(Zone.current)),this.insideAngular=t.run(()=>new wF(Zone.current,EF)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ee(yt))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gi(n){return function GK(n){return function(t){return(t=t.lift(new qK(n.ngZone))).pipe(Tr(n.outsideAngular),ri(n.insideAngular))}}(function Ad(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Xo=Qe(106);Xo.Z.registerVersion("firebase","10.10.0","app-compat");const QK=["ngOnDestroy"];class CF{constructor(e){return e}}const Vv=new fe("angularfire2.app.options"),Lv=new fe("angularfire2.app.name");function XD(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Xo.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Xo.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;XK("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new CF(o)}const XK=(n,...e)=>{},eZ={provide:CF,useFactory:XD,deps:[Vv,yt,[new qa,Lv]]};let tZ=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Vv,useValue:t},{provide:Lv,useValue:r}]}}constructor(t){Xo.Z.registerVersion("angularfire",JD.full,"core"),Xo.Z.registerVersion("angularfire",JD.full,"app-compat"),Xo.Z.registerVersion("angular",CP.full,t.toString())}static \u0275fac=function(r){return new(r||n)(ee(Vo))};static \u0275mod=dr({type:n});static \u0275inj=Cr({providers:[eZ]})}return n})();function DF(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function nZ(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(AF("error",`${e} was already initialized on the ${t} Firebase App with different settings.${rZ?" You may need to reload as Firebase is not HMR aware.":""}`),AF("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const rZ=typeof module<"u"&&!!module.hot,AF=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];const iZ_firebaseConfig={apiKey:"AIzaSyD7ipDa2pbuPMuS9sD2kNVgI26VfPJ3JJ4",authDomain:"angular-blog-ab62c.firebaseapp.com",projectId:"angular-blog-ab62c",storageBucket:"angular-blog-ab62c.appspot.com",messagingSenderId:"867511994887",appId:"1:867511994887:web:6ea43d5731945ac4ca78a2"};Qe(491);class sZ extends L{constructor(e=1/0,t=1/0,r=YD){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function bF(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,xe({connector:()=>new sZ(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Uv=Ue(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Vs(n,e){return j((t,r)=>{let i=0;t.subscribe(oe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function tu(n){return n<=0?()=>$n:j((e,t)=>{let r=0;e.subscribe(oe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Bv(n){return j((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function SF(n=oZ){return j((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function oZ(){return new Uv}function nu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Vs((i,s)=>n(i,s,r)):Wt,tu(1),t?Bv(e):SF(()=>new Uv))}function RF(n,e){return w(e)?Ge(()=>n,e):Ge(()=>n)}const PF=new fe("angularfire2.auth.use-emulator"),MF=new fe("angularfire2.auth.settings"),NF=new fe("angularfire2.auth.tenant-id"),xF=new fe("angularfire2.auth.langugage-code"),OF=new fe("angularfire2.auth.use-device-language"),kF=new fe("angularfire.auth.persistence"),FF=(n,e,t,r,i,s,o,a)=>DF(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,f]of Object.entries(o))u.settings[d]=f;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let e0=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,d,f,g,_,y){const E=new L,T=H(void 0).pipe(ri(o.outsideAngular),Ge(()=>s.runOutsideAngular(()=>Promise.resolve().then(Qe.bind(Qe,491)))),Ae(()=>XD(t,s,r)),Ae(A=>FF(A,s,a,d,f,g,u,_)),bF({bufferSize:1,refCount:!1}));if(rv(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=H(null);else{T.pipe(nu()).subscribe();const A=T.pipe(Ge(k=>k.getRedirectResult().then(K=>K,()=>null)),Gi,bF({bufferSize:1,refCount:!1})),N=T.pipe(Ge(k=>new dt(K=>({unsubscribe:s.runOutsideAngular(()=>k.onAuthStateChanged(ce=>K.next(ce),ce=>K.error(ce),()=>K.complete()))})))),R=T.pipe(Ge(k=>new dt(K=>({unsubscribe:s.runOutsideAngular(()=>k.onIdTokenChanged(ce=>K.next(ce),ce=>K.error(ce),()=>K.complete()))}))));this.authState=A.pipe(RF(N),Tr(o.outsideAngular),ri(o.insideAngular)),this.user=A.pipe(RF(R),Tr(o.outsideAngular),ri(o.insideAngular)),this.idToken=this.user.pipe(Ge(k=>k?S(k.getIdToken()):H(null))),this.idTokenResult=this.user.pipe(Ge(k=>k?S(k.getIdTokenResult()):H(null))),this.credential=Q(A,E,this.authState.pipe(Vs(k=>!k))).pipe(Ae(k=>k?.user?k:null),Tr(o.outsideAngular),ri(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(QK.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>t.run(()=>d)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(f=>{const g=f?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,g),g})})})}))(this,T,s,{spy:{apply:(A,N,R)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&R.then(k=>E.next(k))}}})}static \u0275fac=function(r){return new(r||n)(ee(Vv),ee(Lv,8),ee(Vo),ee(yt),ee(TF),ee(PF,8),ee(MF,8),ee(NF,8),ee(xF,8),ee(OF,8),ee(kF,8),ee(IF,8))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function t0(...n){return function uZ(){return Ji(1)}()(S(n,ys(n)))}function jv(...n){const e=ys(n);return j((t,r)=>{(e?t0(n,t,e):t0(n,t)).subscribe(r)})}function n0(){return j((n,e)=>{let t,r=!1;n.subscribe(oe(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function $v(n,e){return j(function cZ(n,e,t,r,i){return(s,o)=>{let a=t,u=e,d=0;s.subscribe(oe(o,f=>{const g=d++;u=a?n(u,f,g):(a=!0,f),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}var ye,W=Qe(861),VF=Qe(537),io=Qe(879),St=Qe(58),lZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ls={},r0=r0||{},Ye=lZ||self;function Hv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Fp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var s0="closure_uid_"+(1e9*Math.random()>>>0),hZ=0;function fZ(n,e,t){return n.call.apply(n.bind,arguments)}function pZ(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Kr(n,e,t){return(Kr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fZ:pZ).apply(null,arguments)}function qv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function mr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ru(){this.s=this.s,this.o=this.o}ru.prototype.s=!1,ru.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function dZ(n){Object.prototype.hasOwnProperty.call(n,s0)&&n[s0]||(n[s0]=++hZ)}(this)},ru.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const LF=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function o0(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function UF(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Hv(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Zr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Zr.prototype.h=function(){this.defaultPrevented=!0};var mZ=function(){if(!Ye.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};Ye.addEventListener("test",t,e),Ye.removeEventListener("test",t,e)}catch{}return n}();function Vp(n){return/^[\s\xa0]*$/.test(n)}function zv(){var n=Ye.navigator;return n&&(n=n.userAgent)?n:""}function so(n){return-1!=zv().indexOf(n)}function a0(n){return a0[" "](n),n}a0[" "]=function(){};var c0,n,yZ=so("Opera"),bd=so("Trident")||so("MSIE"),BF=so("Edge"),u0=BF||bd,jF=so("Gecko")&&!(-1!=zv().toLowerCase().indexOf("webkit")&&!so("Edge"))&&!(so("Trident")||so("MSIE"))&&!so("Edge"),vZ=-1!=zv().toLowerCase().indexOf("webkit")&&!so("Edge");function $F(){var n=Ye.document;return n?n.documentMode:void 0}e:{var l0="",d0=(n=zv(),jF?/rv:([^\);]+)(\)|;)/.exec(n):BF?/Edge\/([\d\.]+)/.exec(n):bd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):vZ?/WebKit\/(\S+)/.exec(n):yZ?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(d0&&(l0=d0?d0[1]:""),bd){var h0=$F();if(null!=h0&&h0>parseFloat(l0)){c0=String(h0);break e}}c0=l0}var EZ=Ye.document&&bd&&($F()||parseInt(c0,10))||void 0;function Lp(n,e){if(Zr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(jF){e:{try{a0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:IZ[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Lp.$.h.call(this)}}mr(Lp,Zr);var IZ={2:"touch",3:"pen",4:"mouse"};Lp.prototype.h=function(){Lp.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Up="closure_listenable_"+(1e6*Math.random()|0),wZ=0;function TZ(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++wZ,this.fa=this.ia=!1}function Gv(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function p0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function qF(n){const e={};for(const t in n)e[t]=n[t];return e}const zF="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function GF(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<zF.length;s++)t=zF[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Wv(n){this.src=n,this.g={},this.h=0}function g0(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=LF(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Gv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function m0(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}Wv.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=m0(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new TZ(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var _0="closure_lm_"+(1e6*Math.random()|0),y0={};function WF(n,e,t,r,i){if(r&&r.once)return ZF(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)WF(n,e[s],t,r,i);return null}return t=w0(t),n&&n[Up]?n.O(e,t,Fp(r)?!!r.capture:!!r,i):KF(n,e,t,!1,r,i)}function KF(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=Fp(i)?!!i.capture:!!i,a=E0(n);if(a||(n[_0]=a=new Wv(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function DZ(){const e=AZ;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)mZ||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(YF(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ZF(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ZF(n,e[s],t,r,i);return null}return t=w0(t),n&&n[Up]?n.P(e,t,Fp(r)?!!r.capture:!!r,i):KF(n,e,t,!0,r,i)}function QF(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)QF(n,e[s],t,r,i);else r=Fp(r)?!!r.capture:!!r,t=w0(t),n&&n[Up]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=m0(s=n.g[e],t,r,i))&&(Gv(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=E0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=m0(e,t,r,i)),(t=-1<n?e[n]:null)&&v0(t))}function v0(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Up])g0(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(YF(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=E0(e))?(g0(t,n),0==t.h&&(t.src=null,e[_0]=null)):Gv(n)}}}function YF(n){return n in y0?y0[n]:y0[n]="on"+n}function AZ(n,e){if(n.fa)n=!0;else{e=new Lp(e,this);var t=n.listener,r=n.la||n.src;n.ia&&v0(n),n=t.call(r,e)}return n}function E0(n){return(n=n[_0])instanceof Wv?n:null}var I0="__closure_events_fn_"+(1e9*Math.random()>>>0);function w0(n){return"function"==typeof n?n:(n[I0]||(n[I0]=function(e){return n.handleEvent(e)}),n[I0])}function _r(){ru.call(this),this.i=new Wv(this),this.S=this,this.J=null}function Pr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Zr(e,n);else if(e instanceof Zr)e.target=e.target||n;else{var i=e;GF(e=new Zr(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=Kv(o,r,!0,e)&&i}if(i=Kv(o=e.g=n,r,!0,e)&&i,i=Kv(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Kv(o=e.g=t[s],r,!1,e)&&i}function Kv(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,u=o.la||o.src;o.ia&&g0(n.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}mr(_r,ru),_r.prototype[Up]=!0,_r.prototype.removeEventListener=function(n,e,t,r){QF(this,n,e,t,r)},_r.prototype.N=function(){if(_r.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Gv(t[r]);delete n.g[e],n.h--}}this.J=null},_r.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},_r.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var T0=Ye.JSON.stringify;function SZ(){var n=C0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var JF=new class bZ{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new PZ,n=>n.reset());class PZ{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function MZ(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function NZ(n){Ye.setTimeout(()=>{throw n},0)}let Bp,jp=!1,C0=new class RZ{constructor(){this.h=this.g=null}add(e,t){const r=JF.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},XF=()=>{const n=Ye.Promise.resolve(void 0);Bp=()=>{n.then(xZ)}};var xZ=()=>{for(var n;n=SZ();){try{n.h.call(n.g)}catch(t){NZ(t)}var e=JF;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}jp=!1};function Zv(n,e){_r.call(this),this.h=n||1,this.g=e||Ye,this.j=Kr(this.qb,this),this.l=Date.now()}function D0(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function A0(n,e,t){if("function"==typeof n)t&&(n=Kr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Kr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ye.setTimeout(n,e||0)}function eV(n){n.g=A0(()=>{n.g=null,n.i&&(n.i=!1,eV(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}mr(Zv,_r),(ye=Zv.prototype).ga=!1,ye.T=null,ye.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Pr(this,"tick"),this.ga&&(D0(this),this.start()))}},ye.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ye.N=function(){Zv.$.N.call(this),D0(this),delete this.g};class OZ extends ru{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:eV(this)}N(){super.N(),this.g&&(Ye.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $p(n){ru.call(this),this.h=n,this.g={}}mr($p,ru);var tV=[];function nV(n,e,t,r){Array.isArray(t)||(t&&(tV[0]=t.toString()),t=tV);for(var i=0;i<t.length;i++){var s=WF(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function rV(n){p0(n.g,function(e,t){this.g.hasOwnProperty(t)&&v0(e)},n),n.g={}}function Qv(){this.g=!0}function Sd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function LZ(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return T0(t)}catch{return e}}(n,t)+(r?" "+r:"")})}$p.prototype.N=function(){$p.$.N.call(this),rV(this)},$p.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qv.prototype.Ea=function(){this.g=!1},Qv.prototype.info=function(){};var Tc={},iV=null;function Yv(){return iV=iV||new _r}function sV(n){Zr.call(this,Tc.Ta,n)}function Hp(n){const e=Yv();Pr(e,new sV(e))}function oV(n,e){Zr.call(this,Tc.STAT_EVENT,n),this.stat=e}function di(n){const e=Yv();Pr(e,new oV(e,n))}function aV(n,e){Zr.call(this,Tc.Ua,n),this.size=e}function qp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ye.setTimeout(function(){n()},e)}Tc.Ta="serverreachability",mr(sV,Zr),Tc.STAT_EVENT="statevent",mr(oV,Zr),Tc.Ua="timingevent",mr(aV,Zr);var Jv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},uV={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function b0(){}function lV(){}b0.prototype.h=null;var P0,zp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function S0(){Zr.call(this,"d")}function R0(){Zr.call(this,"c")}function Xv(){}function Gp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new $p(this),this.P=UZ,this.V=new Zv(n=u0?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new dV}function dV(){this.i=null,this.g="",this.h=!1}mr(S0,Zr),mr(R0,Zr),mr(Xv,b0),Xv.prototype.g=function(){return new XMLHttpRequest},Xv.prototype.i=function(){return{}},P0=new Xv;var UZ=45e3,hV={},M0={};function N0(n,e,t){n.L=1,n.A=rE(ea(e)),n.u=t,n.S=!0,fV(n,null)}function fV(n,e){n.G=Date.now(),Wp(n),n.B=ea(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),TV(t.i,"t",r),n.o=0,t=n.l.J,n.h=new dV,n.g=WV(n.l,t?e:null,!n.u),0<n.O&&(n.M=new OZ(Kr(n.Pa,n,n.g),n.O)),nV(n.U,n.g,"readystatechange",n.nb),e=n.I?qF(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Hp(),function kZ(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var d=a[u].split("=");if(1<d.length){var f=d[0];d=d[1];var g=f.split("_");o=2<=g.length&&"type"==g[1]?o+(f+"=")+d+"&":o+(f+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.v,n.B,n.m,n.W,n.u)}function pV(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function gV(n,e,t){let i,r=!0;for(;!n.J&&n.o<t.length;){if(i=BZ(n,t),i==M0){4==e&&(n.s=4,di(14),r=!1),Sd(n.j,n.m,null,"[Incomplete Response]");break}if(i==hV){n.s=4,di(15),Sd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Sd(n.j,n.m,i,null),x0(n,i)}pV(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,di(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),B0(e),e.M=!0,di(11))):(Sd(n.j,n.m,t,"[Invalid Chunked Response]"),Cc(n),Kp(n))}function BZ(n,e){var t=n.o,r=e.indexOf("\n",t);return-1==r?M0:(t=Number(e.substring(t,r)),isNaN(t)?hV:(r+=1)+t>e.length?M0:(e=e.slice(r,r+t),n.o=r+t,e))}function Wp(n){n.Y=Date.now()+n.P,mV(n,n.P)}function mV(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=qp(Kr(n.lb,n),e)}function eE(n){n.C&&(Ye.clearTimeout(n.C),n.C=null)}function Kp(n){0==n.l.H||n.J||HV(n.l,n)}function Cc(n){eE(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,D0(n.V),rV(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function x0(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||O0(t.i,n)))if(!n.K&&O0(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;cE(t),aE(t)}U0(t),di(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=qp(Kr(t.ib,t),6e3));if(1>=AV(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Ac(t,11)}else if((n.K||t.g==n)&&cE(t),!Vp(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let d=i[e];if(t.V=d[0],d=d[1],2==t.H)if("c"==d[0]){t.K=d[1],t.pa=d[2];const f=d[3];null!=f&&(t.ra=f,t.l.info("VER="+t.ra));const g=d[4];null!=g&&(t.Ga=g,t.l.info("SVER="+t.Ga));const _=d[5];null!=_&&"number"==typeof _&&0<_&&(t.L=r=1.5*_,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const y=n.g;if(y){const E=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(k0(s,s.h),s.h=null))}if(r.F){const T=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(r.Da=T,cn(r.I,r.F,T))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=GV(r,r.J?r.pa:null,r.Y),o.K){bV(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(eE(a),Wp(a)),r.g=o}else jV(r);0<t.j.length&&uE(t)}else"stop"!=d[0]&&"close"!=d[0]||Ac(t,7);else 3==t.H&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?Ac(t,7):L0(t):"noop"!=d[0]&&t.h&&t.h.Aa(d),t.A=0)}Hp()}catch{}}function _V(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Hv(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function $Z(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Hv(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function jZ(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Hv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(ye=Gp.prototype).setTimeout=function(n){this.P=n},ye.nb=function(n){n=n.target;const e=this.M;e&&3==oo(n)?e.l():this.Pa(n)},ye.Pa=function(n){try{if(n==this.g)e:{const f=oo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>f)&&(3!=f||u0||this.g&&(this.h.h||this.g.ja()||kV(this.g)))){this.J||4!=f||7==e||Hp(),eE(this);var t=this.g.da();this.ca=t;t:if(pV(this)){var r=kV(this.g);n="";var i=r.length,s=4==oo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Cc(this),Kp(this);var o="";break t}this.h.i=new Ye.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function FZ(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,f,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vp(a)){var d=a;break t}}d=null}if(!(t=d)){this.i=!1,this.s=3,di(12),Cc(this),Kp(this);break e}Sd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,x0(this,t)}this.S?(gV(this,f,o),u0&&this.i&&3==f&&(nV(this.U,this.V,"tick",this.mb),this.V.start())):(Sd(this.j,this.m,o,null),x0(this,o)),4==f&&Cc(this),this.i&&!this.J&&(4==f?HV(this.l,this):(this.i=!1,Wp(this)))}else(function oQ(n){const e={};n=(n.g&&2<=oo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Vp(n[r]))continue;var t=MZ(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function CZ(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.s=3,di(12)):(this.s=0,di(13)),Cc(this),Kp(this)}}}catch{}},ye.mb=function(){if(this.g){var n=oo(this.g),e=this.g.ja();this.o<e.length&&(eE(this),gV(this,n,e),this.i&&4!=n&&Wp(this))}},ye.cancel=function(){this.J=!0,Cc(this)},ye.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function VZ(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Hp(),di(17)),Cc(this),this.s=2,Kp(this)):mV(this,this.Y-n)};var yV=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Dc){this.h=n.h,tE(this,n.j),this.s=n.s,this.g=n.g,nE(this,n.m),this.l=n.l;var e=n.i,t=new Yp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),vV(this,t),this.o=n.o}else n&&(e=String(n).match(yV))?(this.h=!1,tE(this,e[1]||"",!0),this.s=Zp(e[2]||""),this.g=Zp(e[3]||"",!0),nE(this,e[4]),this.l=Zp(e[5]||"",!0),vV(this,e[6]||"",!0),this.o=Zp(e[7]||"")):(this.h=!1,this.i=new Yp(null,this.h))}function ea(n){return new Dc(n)}function tE(n,e,t){n.j=t?Zp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function nE(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function vV(n,e,t){e instanceof Yp?(n.i=e,function ZZ(n,e){e&&!n.j&&(iu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(IV(this,r),TV(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Qp(e,WZ)),n.i=new Yp(e,n.h))}function cn(n,e,t){n.i.set(e,t)}function rE(n){return cn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Zp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Qp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,qZ),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function qZ(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Dc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Qp(e,EV,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Qp(e,EV,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Qp(t,"/"==t.charAt(0)?GZ:zZ,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Qp(t,KZ)),n.join("")};var EV=/[#\/\?@]/g,zZ=/[#\?:]/g,GZ=/[#\?]/g,WZ=/[#\?@]/g,KZ=/#/g;function Yp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function iu(n){n.g||(n.g=new Map,n.h=0,n.i&&function HZ(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function IV(n,e){iu(n),e=Rd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function wV(n,e){return iu(n),e=Rd(n,e),n.g.has(e)}function TV(n,e,t){IV(n,e),0<t.length&&(n.i=null,n.g.set(Rd(n,e),o0(t)),n.h+=t.length)}function Rd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function CV(n){this.l=n||YZ,n=Ye.PerformanceNavigationTiming?0<(n=Ye.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ye.g&&Ye.g.Ka&&Ye.g.Ka()&&Ye.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ye=Yp.prototype).add=function(n,e){iu(this),this.i=null,n=Rd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ye.forEach=function(n,e){iu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ye.ta=function(){iu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},ye.Z=function(n){iu(this);let e=[];if("string"==typeof n)wV(this,n)&&(e=e.concat(this.g.get(Rd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ye.set=function(n,e){return iu(this),this.i=null,wV(this,n=Rd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ye.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var YZ=10;function DV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function AV(n){return n.h?1:n.g?n.g.size:0}function O0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function k0(n,e){n.g?n.g.add(e):n.h=e}function bV(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function SV(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return o0(n.i)}CV.prototype.cancel=function(){if(this.i=SV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var JZ=class{stringify(n){return Ye.JSON.stringify(n,void 0)}parse(n){return Ye.JSON.parse(n,void 0)}};function XZ(){this.g=new JZ}function eQ(n,e,t){const r=t||"";try{_V(n,function(i,s){let o=i;Fp(i)&&(o=T0(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function iE(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Jp(n){this.l=n.ec||null,this.j=n.ob||!1}function sE(n,e){_r.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=F0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mr(Jp,b0),Jp.prototype.g=function(){return new sE(this.l,this.j)},Jp.prototype.i=function(n){return function(){return n}}({}),mr(sE,_r);var F0=0;function RV(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Xp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,eg(n)}function eg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ye=sE.prototype).open=function(n,e){if(this.readyState!=F0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,eg(this)},ye.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ye).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Xp(this)),this.readyState=F0},ye.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,eg(this)),this.g&&(this.readyState=3,eg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ye.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;RV(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ye.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Xp(this):eg(this),3==this.readyState&&RV(this)}},ye.Za=function(n){this.g&&(this.response=this.responseText=n,Xp(this))},ye.Ya=function(n){this.g&&(this.response=n,Xp(this))},ye.ka=function(){this.g&&Xp(this)},ye.setRequestHeader=function(n,e){this.v.append(n,e)},ye.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ye.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(sE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var nQ=Ye.JSON.parse;function Pn(n){_r.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=PV,this.L=this.M=!1}mr(Pn,_r);var PV="",rQ=/^https?$/i,iQ=["POST","PUT"];function MV(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,NV(n),oE(n)}function NV(n){n.F||(n.F=!0,Pr(n,"complete"),Pr(n,"error"))}function xV(n){if(n.h&&typeof r0<"u"&&(!n.C[1]||4!=oo(n)||2!=n.da()))if(n.v&&4==oo(n))A0(n.La,0,n);else if(Pr(n,"readystatechange"),4==oo(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===o){var i=String(n.I).match(yV)[1]||null;!i&&Ye.self&&Ye.self.location&&(i=Ye.self.location.protocol.slice(0,-1)),r=!rQ.test(i?i.toLowerCase():"")}t=r}if(t)Pr(n,"complete"),Pr(n,"success");else{n.m=6;try{var s=2<oo(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",NV(n)}}finally{oE(n)}}}function oE(n,e){if(n.g){OV(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Pr(n,"ready");try{t.onreadystatechange=r}catch{}}}function OV(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ye.clearTimeout(n.A),n.A=null)}function oo(n){return n.g?n.g.readyState:0}function kV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case PV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function FV(n){let e="";return p0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function V0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=FV(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):cn(n,e,t))}function tg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function VV(n){this.Ga=0,this.j=[],this.l=new Qv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=tg("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=tg("baseRetryDelayMs",5e3,n),this.hb=tg("retryDelaySeedMs",1e4,n),this.eb=tg("forwardChannelMaxRetries",2,n),this.xa=tg("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new CV(n&&n.concurrentRequestLimit),this.Ja=new XZ,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function L0(n){if(LV(n),3==n.H){var e=n.W++,t=ea(n.I);if(cn(t,"SID",n.K),cn(t,"RID",e),cn(t,"TYPE","terminate"),ng(n,t),(e=new Gp(n,n.l,e)).L=2,e.A=rE(ea(t)),t=!1,Ye.navigator&&Ye.navigator.sendBeacon)try{t=Ye.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&Ye.Image&&((new Image).src=e.A,t=!0),t||(e.g=WV(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Wp(e)}zV(n)}function aE(n){n.g&&(B0(n),n.g.cancel(),n.g=null)}function LV(n){aE(n),n.u&&(Ye.clearTimeout(n.u),n.u=null),cE(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ye.clearTimeout(n.m),n.m=null)}function uE(n){if(!DV(n.i)&&!n.m){n.m=!0;var e=n.Na;Bp||XF(),jp||(Bp(),jp=!0),C0.add(e,n),n.C=0}}function UV(n,e){var t;t=e?e.m:n.W++;const r=ea(n.I);cn(r,"SID",n.K),cn(r,"RID",t),cn(r,"AID",n.V),ng(n,r),n.o&&n.s&&V0(r,n.o,n.s),t=new Gp(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=BV(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),k0(n.i,t),N0(t,r,e)}function ng(n,e){n.na&&p0(n.na,function(t,r){cn(e,r,t)}),n.h&&_V({},function(t,r){cn(e,r,t)})}function BV(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Kr(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<t;u++){let d=i[u].g;const f=i[u].map;if(d-=s,0>d)s=Math.max(0,i[u].g-100),a=!1;else try{eQ(f,o,"req"+d+"_")}catch{r&&r(f)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function jV(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Bp||XF(),jp||(Bp(),jp=!0),C0.add(e,n),n.A=0}}function U0(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=qp(Kr(n.Ma,n),qV(n,n.A)),n.A++,0))}function B0(n){null!=n.B&&(Ye.clearTimeout(n.B),n.B=null)}function $V(n){n.g=new Gp(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=ea(n.wa);cn(e,"RID","rpc"),cn(e,"SID",n.K),cn(e,"AID",n.V),cn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&cn(e,"TO",n.qa),cn(e,"TYPE","xmlhttp"),ng(n,e),n.o&&n.s&&V0(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=rE(ea(e)),t.u=null,t.S=!0,fV(t,n)}function cE(n){null!=n.v&&(Ye.clearTimeout(n.v),n.v=null)}function HV(n,e){var t=null;if(n.g==e){cE(n),B0(n),n.g=null;var r=2}else{if(!O0(n.i,e))return;t=e.F,bV(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.u?e.u.length:0,e=Date.now()-e.G;var i=n.C;Pr(r=Yv(),new aV(r,t)),uE(n)}else jV(n);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function aQ(n,e){return!(AV(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=qp(Kr(n.Na,n,e),qV(n,n.C)),n.C++,0)))}(n,e)||2==r&&U0(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Ac(n,5);break;case 4:Ac(n,10);break;case 3:Ac(n,6);break;default:Ac(n,2)}}function qV(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Ac(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Kr(n.pb,n);t||(t=new Dc("//www.google.com/images/cleardot.gif"),Ye.location&&"http"==Ye.location.protocol||tE(t,"https"),rE(t)),function tQ(n,e){const t=new Qv;if(Ye.Image){const r=new Image;r.onload=qv(iE,t,r,"TestLoadImage: loaded",!0,e),r.onerror=qv(iE,t,r,"TestLoadImage: error",!1,e),r.onabort=qv(iE,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=qv(iE,t,r,"TestLoadImage: timeout",!1,e),Ye.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else di(2);n.H=0,n.h&&n.h.za(e),zV(n),LV(n)}function zV(n){if(n.H=0,n.ma=[],n.h){const e=SV(n.i);(0!=e.length||0!=n.j.length)&&(UF(n.ma,e),UF(n.ma,n.j),n.i.i.length=0,o0(n.j),n.j.length=0),n.h.ya()}}function GV(n,e,t){var r=t instanceof Dc?ea(t):new Dc(t);if(""!=r.g)e&&(r.g=e+"."+r.g),nE(r,r.m);else{var i=Ye.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Dc(null);r&&tE(s,r),e&&(s.g=e),i&&nE(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&cn(r,t,e),cn(r,"VER",n.ra),ng(n,r),r}function WV(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pn(n.Ha&&!n.va?new Jp({ob:t}):n.va)).Oa(n.J),e}function KV(){}function lE(){if(bd&&!(10<=Number(EZ)))throw Error("Environmental error: no available transport.")}function Wi(n,e){_r.call(this),this.g=new VV(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Vp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vp(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Pd(this)}function ZV(n){S0.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function QV(){R0.call(this),this.status=1}function Pd(n){this.g=n}function Us(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function j0(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Ot(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(ye=Pn.prototype).Oa=function(n){this.M=n},ye.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():P0.g(),this.C=function cV(n){return n.h||(n.h=n.i())}(this.u?this.u:P0),this.g.onreadystatechange=Kr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void MV(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Ye.FormData&&n instanceof Ye.FormData,!(0<=LF(iQ,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{OV(this),0<this.B&&((this.L=function sQ(n){return bd&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kr(this.ua,this)):this.A=A0(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){MV(this,s)}},ye.ua=function(){typeof r0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pr(this,"timeout"),this.abort(8))},ye.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Pr(this,"complete"),Pr(this,"abort"),oE(this))},ye.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),oE(this,!0)),Pn.$.N.call(this)},ye.La=function(){this.s||(this.G||this.v||this.l?xV(this):this.kb())},ye.kb=function(){xV(this)},ye.isActive=function(){return!!this.g},ye.da=function(){try{return 2<oo(this)?this.g.status:-1}catch{return-1}},ye.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ye.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),nQ(e)}},ye.Ia=function(){return this.m},ye.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ye=VV.prototype).ra=8,ye.H=1,ye.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Gp(this,this.l,n);let s=this.s;if(this.U&&(s?(s=qF(s),GF(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=BV(this,i,e),cn(t=ea(this.I),"RID",n),cn(t,"CVER",22),this.F&&cn(t,"X-HTTP-Session-Id",this.F),ng(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(FV(s)))+"&"+e:this.o&&V0(t,this.o,s)),k0(this.i,i),this.bb&&cn(t,"TYPE","init"),this.P?(cn(t,"$req",e),cn(t,"SID","null"),i.aa=!0,N0(i,t,null)):N0(i,t,e),this.H=2}}else 3==this.H&&(n?UV(this,n):0==this.j.length||DV(this.i)||UV(this))},ye.Ma=function(){if(this.u=null,$V(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=qp(Kr(this.jb,this),n)}},ye.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,di(10),aE(this),$V(this))},ye.ib=function(){null!=this.v&&(this.v=null,aE(this),U0(this),di(19))},ye.pb=function(n){n?(this.l.info("Successfully pinged google.com"),di(2)):(this.l.info("Failed to ping google.com"),di(1))},ye.isActive=function(){return!!this.h&&this.h.isActive(this)},(ye=KV.prototype).Ba=function(){},ye.Aa=function(){},ye.za=function(){},ye.ya=function(){},ye.isActive=function(){return!0},ye.Va=function(){},lE.prototype.g=function(n,e){return new Wi(n,e)},mr(Wi,_r),Wi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;di(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=GV(n,null,n.Y),uE(n)},Wi.prototype.close=function(){L0(this.g)},Wi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=T0(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&uE(e)},Wi.prototype.N=function(){this.g.h=null,delete this.j,L0(this.g),delete this.g,Wi.$.N.call(this)},mr(ZV,S0),mr(QV,R0),mr(Pd,KV),Pd.prototype.Ba=function(){Pr(this.g,"a")},Pd.prototype.Aa=function(n){Pr(this.g,new ZV(n))},Pd.prototype.za=function(n){Pr(this.g,new QV)},Pd.prototype.ya=function(){Pr(this.g,"b")},mr(Us,function uQ(){this.blockSize=-1}),Us.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Us.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)j0(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){j0(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){j0(this,r),i=0;break}}this.h=i,this.i+=e},Us.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var cQ={};function $0(n){return-128<=n&&128>n?function _Z(n,e){var t=cQ;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Ot([0|e],0>e?-1:0)}):new Ot([0|n],0>n?-1:0)}function ao(n){if(isNaN(n)||!isFinite(n))return Md;if(0>n)return Mr(ao(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=H0;return new Ot(e,0)}var H0=4294967296,Md=$0(0),q0=$0(1),JV=$0(16777216);function ta(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ds(n){return-1==n.h}function Mr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Ot(t,~n.h).add(q0)}function dE(n,e){return n.add(Mr(e))}function hE(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function rg(n,e){this.g=n,this.h=e}function fE(n,e){if(ta(e))throw Error("division by zero");if(ta(n))return new rg(Md,Md);if(ds(n))return e=fE(Mr(n),e),new rg(Mr(e.g),Mr(e.h));if(ds(e))return e=fE(n,Mr(e)),new rg(Mr(e.g),e.h);if(30<n.g.length){if(ds(n)||ds(e))throw Error("slowDivide_ only works with positive integers.");for(var t=q0,r=e;0>=r.X(n);)t=XV(t),r=XV(r);var i=Nd(t,1),s=Nd(r,1);for(r=Nd(r,2),t=Nd(t,2);!ta(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=Nd(r,1),t=Nd(t,1)}return e=dE(n,i.R(e)),new rg(i,e)}for(i=Md;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=ao(t)).R(e);ds(o)||0<o.X(n);)o=(s=ao(t-=r)).R(e);ta(s)&&(s=q0),i=i.add(s),n=dE(n,o)}return new rg(i,n)}function XV(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Ot(t,n.h)}function Nd(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Ot(i,n.h)}(ye=Ot.prototype).ea=function(){if(ds(this))return-Mr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:H0+r)*e,e*=H0}return n},ye.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ta(this))return"0";if(ds(this))return"-"+Mr(this).toString(n);for(var e=ao(Math.pow(n,6)),t=this,r="";;){var i=fE(t,e).g,s=((0<(t=dE(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ta(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ye.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ye.X=function(n){return ds(n=dE(this,n))?-1:ta(n)?0:1},ye.abs=function(){return ds(this)?Mr(this):this},ye.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new Ot(t,-2147483648&t[t.length-1]?-1:0)},ye.R=function(n){if(ta(this)||ta(n))return Md;if(ds(this))return ds(n)?Mr(this).R(Mr(n)):Mr(Mr(this).R(n));if(ds(n))return Mr(this.R(Mr(n)));if(0>this.X(JV)&&0>n.X(JV))return ao(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=n.D(i)>>>16,u=65535&n.D(i);t[2*r+2*i]+=o*u,hE(t,2*r+2*i),t[2*r+2*i+1]+=s*u,hE(t,2*r+2*i+1),t[2*r+2*i+1]+=o*a,hE(t,2*r+2*i+1),t[2*r+2*i+2]+=s*a,hE(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Ot(t,0)},ye.gb=function(n){return fE(this,n).h},ye.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Ot(t,this.h&n.h)},ye.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Ot(t,this.h|n.h)},ye.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Ot(t,this.h^n.h)},lE.prototype.createWebChannel=lE.prototype.g,Wi.prototype.send=Wi.prototype.u,Wi.prototype.open=Wi.prototype.m,Wi.prototype.close=Wi.prototype.close,Jv.NO_ERROR=0,Jv.TIMEOUT=8,Jv.HTTP_ERROR=6,uV.COMPLETE="complete",lV.EventType=zp,zp.OPEN="a",zp.CLOSE="b",zp.ERROR="c",zp.MESSAGE="d",_r.prototype.listen=_r.prototype.O,Pn.prototype.listenOnce=Pn.prototype.P,Pn.prototype.getLastError=Pn.prototype.Sa,Pn.prototype.getLastErrorCode=Pn.prototype.Ia,Pn.prototype.getStatus=Pn.prototype.da,Pn.prototype.getResponseJson=Pn.prototype.Wa,Pn.prototype.getResponseText=Pn.prototype.ja,Pn.prototype.send=Pn.prototype.ha,Pn.prototype.setWithCredentials=Pn.prototype.Oa,Us.prototype.digest=Us.prototype.l,Us.prototype.reset=Us.prototype.reset,Us.prototype.update=Us.prototype.j,Ot.prototype.add=Ot.prototype.add,Ot.prototype.multiply=Ot.prototype.R,Ot.prototype.modulo=Ot.prototype.gb,Ot.prototype.compare=Ot.prototype.X,Ot.prototype.toNumber=Ot.prototype.ea,Ot.prototype.toString=Ot.prototype.toString,Ot.prototype.getBits=Ot.prototype.D,Ot.fromNumber=ao,Ot.fromString=function YV(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Mr(YV(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ao(Math.pow(e,8)),r=Md,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=ao(Math.pow(e,s)),r=r.R(s).add(ao(o))):r=(r=r.R(t)).add(ao(o))}return r};var lQ=Ls.createWebChannelTransport=function(){return new lE},dQ=Ls.getStatEventTarget=function(){return Yv()},z0=Ls.ErrorCode=Jv,hQ=Ls.EventType=uV,fQ=Ls.Event=Tc,eL=Ls.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},pE=(Ls.FetchXmlHttpFactory=Jp,Ls.WebChannel=lV),pQ=Ls.XhrIo=Pn,gQ=Ls.Md5=Us,xd=Ls.Integer=Ot;const tL="@firebase/firestore";class yr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yr.UNAUTHENTICATED=new yr(null),yr.GOOGLE_CREDENTIALS=new yr("google-credentials-uid"),yr.FIRST_PARTY=new yr("first-party-uid"),yr.MOCK_USER=new yr("mock-user");let Od="10.10.0";const su=new io.Yd("@firebase/firestore");function kd(){return su.logLevel}function ie(n,...e){if(su.logLevel<=io.in.DEBUG){const t=e.map(G0);su.debug(`Firestore (${Od}): ${n}`,...t)}}function Un(n,...e){if(su.logLevel<=io.in.ERROR){const t=e.map(G0);su.error(`Firestore (${Od}): ${n}`,...t)}}function Pi(n,...e){if(su.logLevel<=io.in.WARN){const t=e.map(G0);su.warn(`Firestore (${Od}): ${n}`,...t)}}function G0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function De(n="Unexpected state"){const e=`FIRESTORE (${Od}) INTERNAL ASSERTION FAILED: `+n;throw Un(e),new Error(e)}function Re(n,e){n||De()}function he(n,e){return n}const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends St.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class sr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class nL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yr.UNAUTHENTICATED))}shutdown(){}}class vQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class EQ{constructor(e){this.t=e,this.currentUser=yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new sr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,W.Z)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new sr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re("string"==typeof r.accessToken),new nL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Re(null===e||"string"==typeof e),new yr(e)}}class IQ{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=yr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wQ{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new IQ(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TQ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Re("string"==typeof t.token),this.R=t.token,new rL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function CQ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class iL{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=CQ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Ze(n,e){return n<e?-1:n>e?1:0}function Fd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function sL(n){return n+"\0"}class vn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ne(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vn.fromMillis(Date.now())}static fromDate(e){return vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new vn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new vn(0,0))}static max(){return new Pe(new vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ig{constructor(e,t,r){void 0===t?t=0:t>e.length&&De(),void 0===r?r=e.length-t:r>e.length-t&&De(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ig.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ig?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pt extends ig{construct(e,t,r){return new pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new pt(t)}static emptyPath(){return new pt([])}}const DQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends ig{construct(e,t,r){return new ln(e,t,r)}static isValidIdentifier(e){return DQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ln(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ne(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ne(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ne(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}class pe{constructor(e){this.path=e}static fromPath(e){return new pe(pt.fromString(e))}static fromName(e){return new pe(pt.fromString(e).popFirst(5))}static empty(){return new pe(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new pt(e.slice()))}}class Vd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function W0(n){return n.fields.find(e=>2===e.kind)}function bc(n){return n.fields.filter(e=>2!==e.kind)}Vd.UNKNOWN_ID=-1;class Sc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ld{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ld(0,Ki.min())}}function oL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Pe.fromTimestamp(1e9===r?new vn(t+1,0):new vn(t,r));return new Ki(i,pe.empty(),e)}function aL(n){return new Ki(n.readTime,n.key,-1)}class Ki{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ki(Pe.min(),pe.empty(),-1)}static max(){return new Ki(Pe.max(),pe.empty(),-1)}}function K0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=pe.comparator(n.documentKey,e.documentKey),0!==t?t:Ze(n.largestBatchId,e.largestBatchId))}const uL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ou(n){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,W.Z)(function*(n){if(n.code!==V.FAILED_PRECONDITION||n.message!==uL)throw n;ie("LocalStore","Unexpectedly lost primary lease")}),Z0.apply(this,arguments)}class x{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new x((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof x?t:x.resolve(t)}catch(t){return x.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):x.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):x.reject(t)}static resolve(e){return new x((t,r)=>{t(e)})}static reject(e){return new x((t,r)=>{r(e)})}static waitFor(e){return new x((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=x.resolve(!1);for(const r of e)t=t.next(i=>i?x.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new x((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;t(e[d]).next(f=>{o[d]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new x((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class gE{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new sr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new sg(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Q0(r.target.error);this.V.reject(new sg(e,i))}}static open(e,t,r,i){try{return new gE(t,e.transaction(i,r))}catch(s){throw new sg(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ie("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new RQ(t)}}class hs{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===hs.S((0,St.z$)())&&Un("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ie("SimpleDb","Removing database:",e),Rc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,St.hl)())return!1;if(hs.C())return!0;const e=(0,St.z$)(),t=hs.S(e),r=0<t&&t<10,i=hs.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,W.Z)(function*(){return t.db||(ie("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new sg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new ne(V.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ne(V.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new sg(e,a))},s.onupgradeneeded=o=>{ie("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.N(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{ie("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.L&&(t.db.onversionchange=r=>t.L(r)),t.db})()}B(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,W.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.O(e);const u=gE.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),x.reject(f))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,f="FirebaseError"!==d.name&&a<3;if(ie("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),s.close(),!f)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class SQ{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Rc(this.k.delete())}}class sg extends ne{constructor(e,t){super(V.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function au(n){return"IndexedDbTransactionError"===n.name}class RQ{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ie("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ie("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Rc(r)}add(e){return ie("SimpleDb","ADD",this.store.name,e,e),Rc(this.store.add(e))}get(e){return Rc(this.store.get(e)).next(t=>(void 0===t&&(t=null),ie("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ie("SimpleDb","DELETE",this.store.name,e),Rc(this.store.delete(e))}count(){return ie("SimpleDb","COUNT",this.store.name),Rc(this.store.count())}W(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new x((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,u)=>{o.push(u)}).next(()=>o)}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new x((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,t){ie("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Z(e){const t=this.cursor({});return new x((r,i)=>{t.onerror=s=>{const o=Q0(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,t){const r=[];return new x((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new SQ(a),d=t(a.primaryKey,a.value,u);if(d instanceof x){const f=d.catch(g=>(u.done(),x.reject(g)));r.push(f)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>x.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Rc(n){return new x((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Q0(r.target.error);t(i)}})}let lL=!1;function Q0(n){const e=hs.S((0,St.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lL||(lL=!0,setTimeout(()=>{throw r},0)),r}}return n}class PQ{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;ie("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,W.Z)(function*(){t.task=null;try{ie("IndexBackfiller",`Documents written: ${yield t.X.te()}`)}catch(r){au(r)?ie("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield ou(r)}yield t.ee(6e4)}))}}class MQ{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,W.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.ne(r,e))})()}ne(e,t){const r=new Set;let i=t,s=!0;return x.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ie("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}re(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(ie("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ie(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=aL(s);K0(o,r)>0&&(r=o)}),new Ki(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Zi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function og(n){return null==n}function ag(n){return 0===n&&1/n==-1/0}function dL(n){return"number"==typeof n&&Number.isInteger(n)&&!ag(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Qr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hL(e)),e=NQ(n.get(t),e);return hL(e)}function NQ(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function hL(n){return n+"\x01\x01"}function uo(n){const e=n.length;if(Re(e>=2),2===e)return Re("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),pt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&De(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:De()}s=o+2}return new pt(r)}const fL=["userId","batchId"];function mE(n,e){return[n,Qr(e)]}function pL(n,e,t){return[n,Qr(e),t]}const xQ={},OQ=["prefixPath","collectionGroup","readTime","documentId"],kQ=["prefixPath","collectionGroup","documentId"],FQ=["collectionGroup","readTime","prefixPath","documentId"],VQ=["canonicalId","targetId"],LQ=["targetId","path"],UQ=["path","targetId"],BQ=["collectionId","parent"],jQ=["indexId","uid"],$Q=["uid","sequenceNumber"],HQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qQ=["indexId","uid","orderedDocumentKey"],zQ=["userId","collectionPath","documentId"],GQ=["userId","collectionPath","largestBatchId"],WQ=["userId","collectionGroup","largestBatchId"],gL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],KQ=[...gL,"documentOverlays"],mL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_L=mL,ZQ=[..._L,"indexConfiguration","indexState","indexEntries"];class Y0 extends cL{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function vr(n,e){const t=he(n);return hs.M(t.ae,e)}function yL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function uu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class tn{constructor(e,t){this.comparator=e,this.root=t||Nr.EMPTY}insert(e,t){return new tn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _E(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _E(this.root,e,this.comparator,!1)}getReverseIterator(){return new _E(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _E(this.root,e,this.comparator,!0)}}class _E{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Nr.RED,this.left=i??Nr.EMPTY,this.right=s??Nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Nr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Nr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1,Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Nr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gt{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new EL(this.data.getIterator())}getIteratorFrom(e){return new EL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class EL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ud(n){return n.hasNext()?n.getNext():void 0}class Mi{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Mi([])}unionWith(e){let t=new Gt(ln.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Mi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class IL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new IL("Invalid base64 string: "+s):s}}(e);return new or(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}or.EMPTY_BYTE_STRING=new or("");const YQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cu(n){if(Re(!!n),"string"==typeof n){let e=0;const t=YQ.exec(n);if(Re(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mn(n.seconds),nanos:Mn(n.nanos)}}function Mn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function na(n){return"string"==typeof n?or.fromBase64String(n):or.fromUint8Array(n)}function yE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function vE(n){const e=n.mapValue.fields.__previous_value__;return yE(e)?vE(e):e}function ug(n){const e=cu(n.mapValue.fields.__local_write_time__.timestampValue);return new vn(e.seconds,e.nanos)}class JQ{constructor(e,t,r,i,s,o,a,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class lu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new lu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof lu&&e.projectId===this.projectId&&e.database===this.database}}const du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},EE={nullValue:"NULL_VALUE"};function hu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yE(n)?4:DL(n)?9007199254740991:10:De()}function co(n,e){if(n===e)return!0;const t=hu(n);if(t!==hu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ug(n).isEqual(ug(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=cu(i.timestampValue),a=cu(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,na(n.bytesValue).isEqual(na(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Mn(i.geoPointValue.latitude)===Mn(s.geoPointValue.latitude)&&Mn(i.geoPointValue.longitude)===Mn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Mn(i.integerValue)===Mn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Mn(i.doubleValue),a=Mn(s.doubleValue);return o===a?ag(o)===ag(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Fd(n.arrayValue.values||[],e.arrayValue.values||[],co);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(yL(o)!==yL(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!co(o[u],a[u])))return!1;return!0}(n,e);default:return De()}var s}function cg(n,e){return void 0!==(n.values||[]).find(t=>co(t,e))}function fu(n,e){if(n===e)return 0;const t=hu(n),r=hu(e);if(t!==r)return Ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ze(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Mn(s.integerValue||s.doubleValue),u=Mn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return wL(n.timestampValue,e.timestampValue);case 4:return wL(ug(n),ug(e));case 5:return Ze(n.stringValue,e.stringValue);case 6:return function(s,o){const a=na(s),u=na(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const f=Ze(a[d],u[d]);if(0!==f)return f}return Ze(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ze(Mn(s.latitude),Mn(o.latitude));return 0!==a?a:Ze(Mn(s.longitude),Mn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let d=0;d<a.length&&d<u.length;++d){const f=fu(a[d],u[d]);if(f)return f}return Ze(a.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===du.mapValue&&o===du.mapValue)return 0;if(s===du.mapValue)return 1;if(o===du.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const _=Ze(u[g],f[g]);if(0!==_)return _;const y=fu(a[u[g]],d[f[g]]);if(0!==y)return y}return Ze(u.length,f.length)}(n.mapValue,e.mapValue);default:throw De()}}function wL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ze(n,e);const t=cu(n),r=cu(e),i=Ze(t.seconds,r.seconds);return 0!==i?i:Ze(t.nanos,r.nanos)}function Bd(n){return J0(n)}function J0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=cu(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?na(n.bytesValue).toBase64():"referenceValue"in n?pe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=J0(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${J0(t.fields[o])}`;return i+"}"}(n.mapValue):De()}function Pc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function X0(n){return!!n&&"integerValue"in n}function lg(n){return!!n&&"arrayValue"in n}function TL(n){return!!n&&"nullValue"in n}function CL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wE(n){return!!n&&"mapValue"in n}function dg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return uu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function XQ(n){return"nullValue"in n?EE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Pc(lu.empty(),pe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:De()}function eY(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Pc(lu.empty(),pe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?du:De()}function AL(n,e){const t=fu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function bL(n,e){const t=fu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class xr{constructor(e){this.value=e}static empty(){return new xr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dg(t)}setAll(e){let t=ln.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=dg(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());wE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return co(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];wE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){uu(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new xr(dg(this.value))}}function SL(n){const e=[];return uu(n.fields,(t,r)=>{const i=new ln([t]);if(wE(r)){const s=SL(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Mi(e)}class dn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new dn(e,0,Pe.min(),Pe.min(),Pe.min(),xr.empty(),0)}static newFoundDocument(e,t,r,i){return new dn(e,1,t,Pe.min(),r,i,0)}static newNoDocument(e,t){return new dn(e,2,t,Pe.min(),Pe.min(),xr.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Pe.min(),Pe.min(),xr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pu{constructor(e,t){this.position=e,this.inclusive=t}}function RL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?pe.comparator(pe.fromName(o.referenceValue),t.key):fu(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function PL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!co(n.position[t],e.position[t]))return!1;return!0}class hg{constructor(e,t="asc"){this.field=e,this.dir=t}}function tY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class ML{}class gt extends ML{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new nY(e,t,r):"array-contains"===t?new sY(e,r):"in"===t?new VL(e,r):"not-in"===t?new oY(e,r):"array-contains-any"===t?new aY(e,r):new gt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new rY(e,r):new iY(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(fu(t,this.value)):null!==t&&hu(this.value)===hu(t)&&this.matchesComparison(fu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kt extends ML{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new kt(e,t)}matches(e){return jd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function jd(n){return"and"===n.op}function eA(n){return"or"===n.op}function tA(n){return NL(n)&&jd(n)}function NL(n){for(const e of n.filters)if(e instanceof kt)return!1;return!0}function nA(n){if(n instanceof gt)return n.field.canonicalString()+n.op.toString()+Bd(n.value);if(tA(n))return n.filters.map(e=>nA(e)).join(",");{const e=n.filters.map(t=>nA(t)).join(",");return`${n.op}(${e})`}}function xL(n,e){return n instanceof gt?(r=n,(i=e)instanceof gt&&r.op===i.op&&r.field.isEqual(i.field)&&co(r.value,i.value)):n instanceof kt?function(r,i){return i instanceof kt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&xL(o,i.filters[a]),!0)}(n,e):void De();var r,i}function OL(n,e){const t=n.filters.concat(e);return kt.create(t,n.op)}function kL(n){return n instanceof gt?`${(t=n).field.canonicalString()} ${t.op} ${Bd(t.value)}`:n instanceof kt?function(t){return t.op.toString()+" {"+t.getFilters().map(kL).join(" ,")+"}"}(n):"Filter";var t}class nY extends gt{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class rY extends gt{constructor(e,t){super(e,"in",t),this.keys=FL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iY extends gt{constructor(e,t){super(e,"not-in",t),this.keys=FL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function FL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>pe.fromName(r.referenceValue))}class sY extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lg(t)&&cg(t.arrayValue,this.value)}}class VL extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&cg(this.value.arrayValue,t)}}class oY extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(cg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!cg(this.value.arrayValue,t)}}class aY extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cg(this.value.arrayValue,r))}}class uY{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function rA(n,e=null,t=[],r=[],i=null,s=null,o=null){return new uY(n,e,t,r,i,s,o)}function Mc(n){const e=he(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>nA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),og(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bd(r)).join(",")),e.ce=t}return e.ce}function fg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!tY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!PL(n.startAt,e.startAt)&&PL(n.endAt,e.endAt)}function TE(n){return pe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function CE(n,e){return n.filters.filter(t=>t instanceof gt&&t.field.isEqual(e))}function LL(n,e,t){let r=EE,i=!0;for(const s of CE(n,e)){let o=EE,a=!0;switch(s.op){case"<":case"<=":o=XQ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=EE}AL({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];AL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function UL(n,e,t){let r=du,i=!0;for(const s of CE(n,e)){let o=du,a=!0;switch(s.op){case">=":case">":o=eY(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=du}bL({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];bL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class ra{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function BL(n,e,t,r,i,s,o,a){return new ra(n,e,t,r,i,s,o,a)}function $d(n){return new ra(n)}function jL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function iA(n){return null!==n.collectionGroup}function Hd(n){const e=he(n);if(null===e.le){e.le=[];const t=new Set;for(const s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Gt(ln.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new hg(s,r))}),t.has(ln.keyField().canonicalString())||e.le.push(new hg(ln.keyField(),r))}return e.le}function hi(n){const e=he(n);return e.he||(e.he=function $L(n,e){if("F"===n.limitType)return rA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new hg(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new pu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new pu(n.startAt.position,n.startAt.inclusive):null;return rA(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Hd(n))),e.he}function sA(n,e){const t=n.filters.concat([e]);return new ra(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function DE(n,e,t){return new ra(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pg(n,e){return fg(hi(n),hi(e))&&n.limitType===e.limitType}function HL(n){return`${Mc(hi(n))}|lt:${n.limitType}`}function qd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>kL(i)).join(", ")}]`),og(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Bd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Bd(i)).join(",")),`Target(${r})`}(hi(n))}; limitType=${n.limitType})`}function gg(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Hd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const d=RL(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,Hd(r),i)||r.endAt&&!function(o,a,u){const d=RL(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,Hd(r),i)));var r,i}function qL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zL(n){return(e,t)=>{let r=!1;for(const i of Hd(n)){const s=cY(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function cY(n,e,t){const r=n.field.isKeyField()?pe.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?fu(u,d):De()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return De()}}class ia{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){uu(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return vL(this.inner)}size(){return this.innerSize}}const lY=new tn(pe.comparator);function Ni(){return lY}const GL=new tn(pe.comparator);function mg(...n){let e=GL;for(const t of n)e=e.insert(t.key,t);return e}function WL(n){let e=GL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function lo(){return _g()}function KL(){return _g()}function _g(){return new ia(n=>n.toString(),(n,e)=>n.isEqual(e))}const dY=new tn(pe.comparator),hY=new Gt(pe.comparator);function et(...n){let e=hY;for(const t of n)e=e.add(t);return e}const fY=new Gt(Ze);function oA(){return fY}function ZL(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ag(e)?"-0":e}}function QL(n){return{integerValue:""+n}}function YL(n,e){return dL(e)?QL(e):ZL(n,e)}class AE{constructor(){this._=void 0}}function pY(n,e,t){return n instanceof zd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&yE(s)&&(s=vE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Nc?XL(n,e):n instanceof xc?e2(n,e):function(i,s){const o=JL(i,s),a=t2(o)+t2(i.Ie);return X0(o)&&X0(i.Ie)?QL(a):ZL(i.serializer,a)}(n,e)}function gY(n,e,t){return n instanceof Nc?XL(n,e):n instanceof xc?e2(n,e):t}function JL(n,e){return n instanceof Gd?X0(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class zd extends AE{}class Nc extends AE{constructor(e){super(),this.elements=e}}function XL(n,e){const t=n2(e);for(const r of n.elements)t.some(i=>co(i,r))||t.push(r);return{arrayValue:{values:t}}}class xc extends AE{constructor(e){super(),this.elements=e}}function e2(n,e){let t=n2(e);for(const r of n.elements)t=t.filter(i=>!co(i,r));return{arrayValue:{values:t}}}class Gd extends AE{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function t2(n){return Mn(n.integerValue||n.doubleValue)}function n2(n){return lg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class yg{constructor(e,t){this.field=e,this.transform=t}}class _Y{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class SE{}function r2(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Kd(n.key,En.none()):new Wd(n.key,n.data,En.none());{const t=n.data,r=xr.empty();let i=new Gt(ln.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new sa(n.key,r,new Mi(i.toArray()),En.none())}}function yY(n,e,t){n instanceof Wd?function(i,s,o){const a=i.value.clone(),u=o2(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof sa?function(i,s,o){if(!bE(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=o2(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(s2(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function vg(n,e,t,r){return n instanceof Wd?function(s,o,a,u){if(!bE(s.precondition,o))return a;const d=s.value.clone(),f=a2(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof sa?function(s,o,a,u){if(!bE(s.precondition,o))return a;const d=a2(s.fieldTransforms,u,o),f=o.data;return f.setAll(s2(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):(a=t,bE(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function vY(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=JL(r.transform,i||null);null!=s&&(null===t&&(t=xr.empty()),t.set(r.field,s))}return t||null}function i2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Fd(r,i,(s,o)=>function mY(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Nc&&i instanceof Nc||r instanceof xc&&i instanceof xc?Fd(r.elements,i.elements,co):r instanceof Gd&&i instanceof Gd?co(r.Ie,i.Ie):r instanceof zd&&i instanceof zd);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Wd extends SE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sa extends SE{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function s2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function o2(n,e,t){const r=new Map;Re(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,gY(o,a,t[i]))}return r}function a2(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,pY(s,o,e))}return r}class Kd extends SE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aA extends SE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class uA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&yY(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=vg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=vg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=KL();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=r2(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),et())}isEqual(e){return this.batchId===e.batchId&&Fd(this.mutations,e.mutations,(t,r)=>i2(t,r))&&Fd(this.baseMutations,e.baseMutations,(t,r)=>i2(t,r))}}class cA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Re(e.mutations.length===r.length);let i=dY;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new cA(e,t,r,i)}}class lA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class IY{constructor(e,t){this.count=e,this.unchangedNames=t}}var Kn,vt;function u2(n){switch(n){default:return De();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function c2(n){if(void 0===n)return Un("GRPC error has no .code"),V.UNKNOWN;switch(n){case Kn.OK:return V.OK;case Kn.CANCELLED:return V.CANCELLED;case Kn.UNKNOWN:return V.UNKNOWN;case Kn.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Kn.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Kn.INTERNAL:return V.INTERNAL;case Kn.UNAVAILABLE:return V.UNAVAILABLE;case Kn.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Kn.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Kn.NOT_FOUND:return V.NOT_FOUND;case Kn.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Kn.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Kn.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Kn.ABORTED:return V.ABORTED;case Kn.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Kn.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Kn.DATA_LOSS:return V.DATA_LOSS;default:return De()}}(vt=Kn||(Kn={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";function l2(){return new TextEncoder}const wY=new xd([4294967295,4294967295],0);function d2(n){const e=l2().encode(n),t=new gQ;return t.update(e),new Uint8Array(t.digest())}function h2(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new xd([t,r],0),new xd([i,s],0)]}class dA{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Eg(`Invalid padding: ${t}`);if(r<0)throw new Eg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Eg(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Eg(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=xd.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(xd.fromNumber(r)));return 1===i.compare(wY)&&(i=new xd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=d2(e),[r,i]=h2(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new dA(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const t=d2(e),[r,i]=h2(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Eg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ig{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,wg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ig(Pe.min(),i,new tn(Ze),Ni(),et())}}class wg{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new wg(r,t,et(),et(),et())}}class PE{constructor(e,t,r,i){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=i}}class f2{constructor(e,t){this.targetId=e,this.fe=t}}class p2{constructor(e,t,r=or.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class g2{constructor(){this.ge=0,this.pe=_2(),this.ye=or.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=et(),t=et(),r=et();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:De()}}),new wg(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=_2()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Re(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class TY{constructor(e){this.Be=e,this.ke=new Map,this.qe=Ni(),this.Qe=m2(),this.Ke=new tn(Ze)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:De()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.fe.count,i=this.Ye(t);if(i){const s=i.target;if(TE(s))if(0===r){const o=new pe(s.path);this.We(t,o,dn.newNoDocument(o,Pe.min()))}else Re(1===r);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(t),this.Ke=this.Ke.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=na(r).toUint8Array()}catch(u){if(u instanceof IL)return Pi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new dA(o,i,s)}catch(u){return Pi(u instanceof Eg?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Be.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&TE(a.target)){const u=new pe(a.target.path);null!==this.qe.get(u)||this.st(o,u)||this.We(o,u,dn.newNoDocument(u,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let r=et();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Ye(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new Ig(e,t,this.Ke,this.qe,r);return this.qe=Ni(),this.Qe=m2(),this.Ke=new tn(Ze),i}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new g2,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Gt(Ze),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||ie("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}He(e){this.ke.set(e,new g2),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function m2(){return new tn(pe.comparator)}function _2(){return new tn(pe.comparator)}const CY={asc:"ASCENDING",desc:"DESCENDING"},DY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AY={and:"AND",or:"OR"};class bY{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hA(n,e){return n.useProto3Json||og(e)?e:{value:e}}function Zd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function y2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function SY(n,e){return Zd(n,e.toTimestamp())}function Bn(n){return Re(!!n),Pe.fromTimestamp(function(t){const r=cu(t);return new vn(r.seconds,r.nanos)}(n))}function fA(n,e){return pA(n,e).canonicalString()}function pA(n,e){const t=(i=n,new pt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function v2(n){const e=pt.fromString(n);return Re(R2(e)),e}function Tg(n,e){return fA(n.databaseId,e.path)}function ho(n,e){const t=v2(e);if(t.get(1)!==n.databaseId.projectId)throw new ne(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ne(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(w2(t))}function E2(n,e){return fA(n.databaseId,e)}function I2(n){const e=v2(n);return 4===e.length?pt.emptyPath():w2(e)}function gA(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function w2(n){return Re(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function T2(n,e,t){return{name:Tg(n,e),fields:t.value.mapValue.fields}}function C2(n,e,t){const r=ho(n,e.name),i=Bn(e.updateTime),s=e.createTime?Bn(e.createTime):Pe.min(),o=new xr({mapValue:{fields:e.fields}}),a=dn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Cg(n,e){let t;if(e instanceof Wd)t={update:T2(n,e.key,e.value)};else if(e instanceof Kd)t={delete:Tg(n,e.key)};else if(e instanceof sa)t={update:T2(n,e.key,e.data),updateMask:FY(e.fieldMask)};else{if(!(e instanceof aA))return De();t={verify:Tg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof zd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Nc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gd)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw De()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:SY(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:De()),t;var s}function mA(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?En.updateTime(Bn(s.updateTime)):void 0!==s.exists?En.exists(s.exists):En.none():En.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Re("REQUEST_TIME"===a.setToServerValue),u=new zd):"appendMissingElements"in a?u=new Nc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new xc(a.removeAllFromArray.values||[]):"increment"in a?u=new Gd(o,a.increment):De();const d=ln.fromServerFormat(a.fieldPath);return new yg(d,u)}(n,i)):[];var s;if(e.update){const i=ho(n,e.update.name),s=new xr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Mi((e.updateMask.fieldPaths||[]).map(f=>ln.fromServerFormat(f)));return new sa(i,s,o,t,r)}return new Wd(i,s,t,r)}if(e.delete){const i=ho(n,e.delete);return new Kd(i,t)}if(e.verify){const i=ho(n,e.verify);return new aA(i,t)}return De()}function D2(n,e){return{documents:[E2(n,e.path)]}}function _A(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=E2(n,i);const s=function(d){if(0!==d.length)return S2(kt.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(d){if(0!==d.length)return d.map(f=>{return{field:gu((_=f).field),direction:xY(_.dir)};var _})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=hA(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ut:t,parent:i};var d}function A2(n){let e=I2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Re(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(g){const _=b2(g);return _ instanceof kt&&tA(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(_=>{return new hg(Qd((E=_).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;t.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,og(_)?null:_}(t.limit));let u=null;var g;t.startAt&&(u=new pu((g=t.startAt).values||[],!!g.before));let d=null;return t.endAt&&(d=function(g){return new pu(g.values||[],!g.before)}(t.endAt)),BL(e,i,o,s,a,"F",u,d)}function b2(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Qd(t.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qd(t.unaryFilter.field);return gt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qd(t.unaryFilter.field);return gt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qd(t.unaryFilter.field);return gt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(n):void 0!==n.fieldFilter?gt.create(Qd((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return kt.create(t.compositeFilter.filters.map(r=>b2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De()}}(t.compositeFilter.op))}(n):De();var t}function xY(n){return CY[n]}function OY(n){return DY[n]}function kY(n){return AY[n]}function gu(n){return{fieldPath:n.canonicalString()}}function Qd(n){return ln.fromServerFormat(n.fieldPath)}function S2(n){return n instanceof gt?function(t){if("=="===t.op){if(CL(t.value))return{unaryFilter:{field:gu(t.field),op:"IS_NAN"}};if(TL(t.value))return{unaryFilter:{field:gu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(CL(t.value))return{unaryFilter:{field:gu(t.field),op:"IS_NOT_NAN"}};if(TL(t.value))return{unaryFilter:{field:gu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gu(t.field),op:OY(t.op),value:t.value}}}(n):n instanceof kt?function(t){const r=t.getFilters().map(i=>S2(i));return 1===r.length?r[0]:{compositeFilter:{op:kY(t.op),filters:r}}}(n):De()}function FY(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function R2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class oa{constructor(e,t,r,i,s=Pe.min(),o=Pe.min(),a=or.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class P2{constructor(e){this.ct=e}}function M2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ME(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Tg(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Zd(s,o.version.toTimestamp()),createTime:Zd(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Oc(e.version)};else{if(!e.isUnknownDocument())return De();r.unknownDocument={path:t.path.toArray(),version:Oc(e.version)}}var s,o;return r}function ME(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Oc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function kc(n){const e=new vn(n.seconds,n.nanoseconds);return Pe.fromTimestamp(e)}function Fc(n,e){const t=(e.baseMutations||[]).map(s=>mA(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>mA(n.ct,s)),i=vn.fromMillis(e.localWriteTimeMs);return new uA(e.batchId,i,t,r)}function Dg(n){const e=kc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?kc(n.lastLimboFreeSnapshotVersion):Pe.min();let r;return r=void 0!==n.query.documents?(Re(1===(s=n.query).documents.length),hi($d(I2(s.documents[0])))):function(s){return hi(A2(s))}(n.query),new oa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,or.fromBase64String(n.resumeToken));var s}function N2(n,e){const t=Oc(e.snapshotVersion),r=Oc(e.lastLimboFreeSnapshotVersion);let i;i=TE(e.target)?D2(n.ct,e.target):_A(n.ct,e.target).ut;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mc(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function yA(n){const e=A2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?DE(e,e.limit,"L"):e}function vA(n,e){return new lA(e.largestBatchId,mA(n.ct,e.overlayMutation))}function x2(n,e){const t=e.path.lastSegment();return[n,Qr(e.path.popLast()),t]}function O2(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Oc(r.readTime),documentKey:Qr(r.documentKey.path),largestBatchId:r.largestBatchId}}class LY{getBundleMetadata(e,t){return k2(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:kc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return k2(e).put({bundleId:(i=t).id,createTime:Oc(Bn(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return F2(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:yA(s.bundledQuery),readTime:kc(s.readTime)};var s})}saveNamedQuery(e,t){return F2(e).put({name:(i=t).name,readTime:Oc(Bn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function k2(n){return vr(n,"bundles")}function F2(n){return vr(n,"namedQueries")}class NE{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new NE(e,t.uid||"")}getOverlay(e,t){return Ag(e).get(x2(this.userId,t)).next(r=>r?vA(this.serializer,r):null)}getOverlays(e,t){const r=lo();return x.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new lA(t,o);i.push(this.ht(e,a))}),x.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Qr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Ag(e).H("collectionPathOverlayIndex",a))}),x.waitFor(s)}getOverlaysForCollection(e,t,r){const i=lo(),s=Qr(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ag(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=vA(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=lo();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ag(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,d,f)=>{const g=vA(this.serializer,d);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return Ag(e).put(function(i,s,o){const[a,u,d]=x2(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Cg(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Ag(n){return vr(n,"documentOverlays")}class Vc{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Mn(e.integerValue));else if("doubleValue"in e){const r=Mn(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),ag(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At(`${r.seconds||""}`),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(na(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?DL(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):De()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),pe.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function UY(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function V2(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=UY(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Vc.bt=new Vc;class BY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=V2(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=V2(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class jY{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class $Y{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class bg{constructor(){this.Gt=new BY,this.zt=new jY(this.Gt),this.jt=new $Y(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Lc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Lc(this.indexId,this.documentKey,this.arrayValue,r)}}function mu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=L2(n.arrayValue,e.arrayValue),0!==t?t:(t=L2(n.directionalValue,e.directionalValue),0!==t?t:pe.comparator(n.documentKey,e.documentKey)))}function L2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class U2{constructor(e){this.Yt=new Gt((t,r)=>ln.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Re(e.collectionGroup===this.collectionId),this.en)return!1;const t=W0(e);if(void 0!==t&&!this.nn(t))return!1;const r=bc(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.rn(a,u)||!this.sn(this.Zt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new Gt(ln.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Sc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Sc(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Sc(r.field,"asc"===r.dir?0:1)));return new Vd(Vd.UNKNOWN_ID,this.collectionId,t,Ld.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function B2(n){var e,t;if(Re(n instanceof gt||n instanceof kt),n instanceof gt){if(n instanceof VL){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>gt.create(n.field,"==",s)))||[];return kt.create(i,"or")}return n}const r=n.filters.map(i=>B2(i));return kt.create(r,n.op)}function HY(n){if(0===n.getFilters().length)return[];const e=wA(B2(n));return Re(j2(e)),EA(e)||IA(e)?[e]:e.getFilters()}function EA(n){return n instanceof gt}function IA(n){return n instanceof kt&&tA(n)}function j2(n){return EA(n)||IA(n)||function(t){if(t instanceof kt&&eA(t)){for(const r of t.getFilters())if(!EA(r)&&!IA(r))return!1;return!0}return!1}(n)}function wA(n){if(Re(n instanceof gt||n instanceof kt),n instanceof gt)return n;if(1===n.filters.length)return wA(n.filters[0]);const e=n.filters.map(r=>wA(r));let t=kt.create(e,n.op);return t=xE(t),j2(t)?t:(Re(t instanceof kt),Re(jd(t)),Re(t.filters.length>1),t.filters.reduce((r,i)=>TA(r,i)))}function TA(n,e){let t;return Re(n instanceof gt||n instanceof kt),Re(e instanceof gt||e instanceof kt),t=n instanceof gt?e instanceof gt?kt.create([n,e],"and"):$2(n,e):e instanceof gt?$2(e,n):function(i,s){if(Re(i.filters.length>0&&s.filters.length>0),jd(i)&&jd(s))return OL(i,s.getFilters());const o=eA(i)?i:s,a=eA(i)?s:i,u=o.filters.map(d=>TA(d,a));return kt.create(u,"or")}(n,e),xE(t)}function $2(n,e){if(jd(e))return OL(e,n.getFilters());{const t=e.filters.map(r=>TA(n,r));return kt.create(t,"or")}}function xE(n){if(Re(n instanceof gt||n instanceof kt),n instanceof gt)return n;const e=n.getFilters();if(1===e.length)return xE(e[0]);if(NL(n))return n;const t=e.map(i=>xE(i)),r=[];return t.forEach(i=>{i instanceof gt?r.push(i):i instanceof kt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:kt.create(r,n.op)}class qY{constructor(){this._n=new CA}addToCollectionParentIndex(e,t){return this._n.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Ki.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}}class CA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Gt(pt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gt(pt.comparator)).toArray()}}const OE=new Uint8Array(0);class zY{constructor(e,t){this.databaseId=t,this.an=new CA,this.un=new ia(r=>Mc(r),(r,i)=>fg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:Qr(i)};return H2(e).put(s)}return x.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[sL(t),""],!1,!0);return H2(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(uo(o.parent))}return r})}addFieldIndex(e,t){const r=Sg(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Jd(e);return s.next(a=>{o.put(O2(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Sg(e),i=Jd(e),s=Yd(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Sg(e),r=Yd(e),i=Jd(e);return t.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,t){return x.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new U2(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Yd(e);let i=!0;const s=new Map;return x.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=et();const a=[];return x.forEach(s,(u,d)=>{var k;ie("IndexedDbIndexManager",`Using index ${k=u,`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`} to execute ${Mc(t)}`);const f=function(k,K){const ce=W0(K);if(void 0===ce)return null;for(const Me of CE(k,ce.fieldPath))switch(Me.op){case"array-contains-any":return Me.value.arrayValue.values||[];case"array-contains":return[Me.value]}return null}(d,u),g=function(k,K){const ce=new Map;for(const Me of bc(K))for(const ze of CE(k,Me.fieldPath))switch(ze.op){case"==":case"in":ce.set(Me.fieldPath.canonicalString(),ze.value);break;case"not-in":case"!=":return ce.set(Me.fieldPath.canonicalString(),ze.value),Array.from(ce.values())}return null}(d,u),_=function(k,K){const ce=[];let Me=!0;for(const ze of bc(K)){const Vt=0===ze.kind?LL(k,ze.fieldPath,k.startAt):UL(k,ze.fieldPath,k.startAt);ce.push(Vt.value),Me&&(Me=Vt.inclusive)}return new pu(ce,Me)}(d,u),y=function(k,K){const ce=[];let Me=!0;for(const ze of bc(K)){const Vt=0===ze.kind?UL(k,ze.fieldPath,k.endAt):LL(k,ze.fieldPath,k.endAt);ce.push(Vt.value),Me&&(Me=Vt.inclusive)}return new pu(ce,Me)}(d,u),E=this.hn(u,d,_),T=this.hn(u,d,y),A=this.Pn(u,d,g),N=this.In(u.indexId,f,E,_.inclusive,T,y.inclusive,A);return x.forEach(N,R=>r.j(R,t.limit).next(k=>{k.forEach(K=>{const ce=pe.fromSegments(K.documentKey);o.has(ce)||(o=o.add(ce),a.push(ce))})}))}).next(()=>a)}return x.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:HY(kt.create(e.filters,"and")).map(r=>rA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),d=u/(null!=t?t.length:1),f=[];for(let g=0;g<u;++g){const _=t?this.Tn(t[g/d]):OE,y=this.En(e,_,r[g%d],i),E=this.dn(e,_,s[g%d],o),T=a.map(A=>this.En(e,_,A,!0));f.push(...this.createRange(y,E,T))}return f}En(e,t,r,i){const s=new Lc(e,pe.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new Lc(e,pe.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new U2(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return x.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new Gt(ln.comparator),f=!1;for(const g of u.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?f=!0:d=d.add(_.field));for(const g of u.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new bg;for(const i of bc(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);Vc.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new bg;return Vc.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new bg;return Vc.bt.Pt(Pc(this.databaseId,t),r.Ht(function(s){const o=bc(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new bg);let s=0;for(const o of bc(e)){const a=r[s++];for(const u of i)if(this.Vn(t,o.fieldPath)&&lg(a))i=this.mn(i,o,a);else{const d=u.Ht(o.kind);Vc.bt.Pt(a,d)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new bg;u.seed(a.Wt()),Vc.bt.Pt(o,u.Ht(t.kind)),s.push(u)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof gt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Sg(e),i=Jd(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const o=[];return x.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(f,g){const _=g?new Ld(g.sequenceNumber,new Ki(kc(g.readTime),new pe(uo(g.documentKey)),g.largestBatchId)):Ld.empty(),y=f.fields.map(([E,T])=>new Sc(ln.fromServerFormat(E),T));return new Vd(f.indexId,f.collectionGroup,y,_)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Ze(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Sg(e),s=Jd(e);return this.gn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>x.forEach(a,u=>s.put(O2(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return x.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?x.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),x.forEach(a,u=>this.pn(e,i,u).next(d=>{const f=this.yn(s,u);return d.isEqual(f)?x.resolve():this.wn(e,s,u,d,f)}))))})}Sn(e,t,r,i){return Yd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Yd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=Yd(e);let s=new Gt(mu);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new Lc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new Gt(mu);const i=this.An(t,e);if(null==i)return r;const s=W0(t);if(null!=s){const o=e.data.field(s.fieldPath);if(lg(o))for(const a of o.arrayValue.values||[])r=r.add(new Lc(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Lc(t.indexId,e.key,OE,i));return r}wn(e,t,r,i,s){ie("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,d,f,g,_){const y=u.getIterator(),E=d.getIterator();let T=Ud(y),A=Ud(E);for(;T||A;){let N=!1,R=!1;if(T&&A){const k=f(T,A);k<0?R=!0:k>0&&(N=!0)}else null!=T?R=!0:N=!0;N?(g(A),A=Ud(E)):R?(_(T),T=Ud(y)):(T=Ud(y),A=Ud(E))}}(i,s,mu,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),x.waitFor(o)}gn(e){let t=1;return Jd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>mu(o,a)).filter((o,a,u)=>!a||0!==mu(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=mu(o,e),u=mu(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,OE,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,OE,[]]))}return s}Dn(e,t){return mu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(q2)}getMinOffset(e,t){return x.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||De())).next(q2)}}function H2(n){return vr(n,"collectionParents")}function Yd(n){return vr(n,"indexEntries")}function Sg(n){return vr(n,"indexConfiguration")}function Jd(n){return vr(n,"indexState")}function q2(n){Re(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;K0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ki(e.readTime,e.documentKey,t)}const z2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Yr(e,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function G2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.Y({range:o},(f,g,_)=>(a++,_.delete()));s.push(u.next(()=>{Re(1===a)}));const d=[];for(const f of t.mutations){const g=pL(e,f.key.path,t.batchId);s.push(i.delete(g)),d.push(f.key)}return x.waitFor(s).next(()=>d)}function kE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw De();e=n.noDocument}return JSON.stringify(e).length}Yr.DEFAULT_COLLECTION_PERCENTILE=10,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yr.DEFAULT=new Yr(41943040,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yr.DISABLED=new Yr(-1,0,0);class FE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){Re(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new FE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _u(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Xd(e),o=_u(e);return o.add({}).next(a=>{Re("number"==typeof a);const u=new uA(a,t,r,i),d=function(y,E,T){const A=T.baseMutations.map(R=>Cg(y.ct,R)),N=T.mutations.map(R=>Cg(y.ct,R));return{userId:E,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:A,mutations:N}}(this.serializer,this.userId,u),f=[];let g=new Gt((_,y)=>Ze(_.canonicalString(),y.canonicalString()));for(const _ of i){const y=pL(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),f.push(o.put(d)),f.push(s.put(y,xQ))}return g.forEach(_=>{f.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),x.waitFor(f).next(()=>u)})}lookupMutationBatch(e,t){return _u(e).get(t).next(r=>r?(Re(r.userId===this.userId),Fc(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?x.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return _u(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Re(a.batchId>=r),s=Fc(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return _u(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _u(e).W("userMutationsIndex",t).next(r=>r.map(i=>Fc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=mE(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Xd(e).Y({range:i},(o,a,u)=>{const[d,f,g]=o,_=uo(f);if(d===this.userId&&t.path.isEqual(_))return _u(e).get(g).next(y=>{if(!y)throw De();Re(y.userId===this.userId),s.push(Fc(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(Ze);const i=[];return t.forEach(s=>{const o=mE(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Xd(e).Y({range:a},(d,f,g)=>{const[_,y,E]=d,T=uo(y);_===this.userId&&s.path.isEqual(T)?r=r.add(E):g.done()});i.push(u)}),x.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=mE(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Gt(Ze);return Xd(e).Y({range:o},(u,d,f)=>{const[g,_,y]=u,E=uo(_);g===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(y)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(_u(e).get(s).next(o=>{if(null===o)throw De();Re(o.userId===this.userId),r.push(Fc(this.serializer,o))}))}),x.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return G2(e.ae,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),x.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return x.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Xd(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=uo(s[1]);i.push(u)}else a.done()}).next(()=>{Re(0===i.length)})})}containsKey(e,t){return W2(e,this.userId,t)}xn(e){return K2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function W2(n,e,t){const r=mE(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Xd(n).Y({range:s,J:!0},(a,u,d)=>{const[f,g,_]=a;f===e&&g===i&&(o=!0),d.done()}).next(()=>o)}function _u(n){return vr(n,"mutations")}function Xd(n){return vr(n,"documentMutations")}function K2(n){return vr(n,"mutationQueues")}class Uc{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Uc(0)}static Ln(){return new Uc(-1)}}class GY{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Uc(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Pe.fromTimestamp(new vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>eh(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(Re(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return eh(e).Y((o,a)=>{const u=Dg(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>x.waitFor(s)).next(()=>i)}forEachTarget(e,t){return eh(e).Y((r,i)=>{const s=Dg(i);t(s)})}Bn(e){return Z2(e).get("targetGlobalKey").next(t=>(Re(null!==t),t))}kn(e,t){return Z2(e).put("targetGlobalKey",t)}qn(e,t){return eh(e).put(N2(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Mc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return eh(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=Dg(a);fg(t,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=yu(e);return t.forEach(o=>{const a=Qr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),x.waitFor(i)}removeMatchingKeys(e,t,r){const i=yu(e);return x.forEach(t,s=>{const o=Qr(s.path);return x.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=yu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=yu(e);let s=et();return i.Y({range:r,J:!0},(o,a,u)=>{const d=uo(o[1]),f=new pe(d);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=Qr(t.path),i=IDBKeyRange.bound([r],[sL(r)],!1,!0);let s=0;return yu(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}_t(e,t){return eh(e).get(t).next(r=>r?Dg(r):null)}}function eh(n){return vr(n,"targets")}function Z2(n){return vr(n,"targetGlobal")}function yu(n){return vr(n,"targetDocuments")}function Q2([n,e],[t,r]){const i=Ze(n,t);return 0===i?Ze(e,r):i}class WY{constructor(e){this.Kn=e,this.buffer=new Gt(Q2),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Q2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Y2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;ie("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,W.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){au(r)?ie("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ou(r)}yield t.zn(3e5)}))}}class KY{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return x.resolve(Zi._e);const r=new WY(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(z2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z2):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),kd()<=io.in.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(d-u)+`ms\nTotal Duration: ${d-f}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class ZY{constructor(e,t){this.db=e,this.garbageCollector=function J2(n,e){return new KY(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return VE(e,r)}removeReference(e,t,r){return VE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return VE(e,t)}er(e,t){return function(i,s){let o=!1;return K2(i).Z(a=>W2(i,a,s).next(u=>(u&&(o=!0),x.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const u=this.er(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Pe.min()),yu(e).delete([0,Qr(o.path)])))});i.push(u)}}).next(()=>x.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return VE(e,t)}Xn(e,t){const r=yu(e);let i,s=Zi._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==Zi._e&&t(new pe(uo(i)),s),s=d,i=u):s=Zi._e}).next(()=>{s!==Zi._e&&t(new pe(uo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function VE(n,e){return yu(n).put((i=n.currentSequenceNumber,{targetId:0,path:Qr(e.path),sequenceNumber:i}));var i}class X2{constructor(){this.changes=new ia(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QY{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Bc(e).put(r)}removeEntry(e,t,r){return Bc(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ME(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=dn.newInvalidDocument(t);return Bc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Rg(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:dn.newInvalidDocument(t)};return Bc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Rg(t))},(i,s)=>{r={document:this.nr(t,s),size:kE(s)}}).next(()=>r)}getEntries(e,t){let r=Ni();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=Ni(),i=new tn(pe.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,kE(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return x.resolve();let i=new Gt(rU);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Rg(i.first()),Rg(i.last())),o=i.getIterator();let a=o.getNext();return Bc(e).Y({index:"documentKeyIndex",range:s},(u,d,f)=>{const g=pe.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&rU(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?f.U(Rg(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),ME(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bc(e).W(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let f=Ni();for(const g of d){const _=this.nr(pe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(gg(t,_)||i.has(_.key))&&(f=f.insert(_.key,_))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=Ni();const o=nU(t,r),a=nU(t,Ki.max());return Bc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,f)=>{const g=this.nr(pe.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new YY(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tU(e).get("remoteDocumentGlobalKey").next(t=>(Re(!!t),t))}tr(e,t){return tU(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function VY(n,e){let t;if(e.document)t=C2(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=pe.fromSegments(e.noDocument.path),i=kc(e.noDocument.readTime);t=dn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return De();{const r=pe.fromSegments(e.unknownDocument.path),i=kc(e.unknownDocument.version);t=dn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new vn(i[0],i[1]);return Pe.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Pe.min()))return r}return dn.newInvalidDocument(e)}}function eU(n){return new QY(n)}class YY extends X2{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ia(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Gt((s,o)=>Ze(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=M2(this.ar.serializer,o);i=i.add(s.path.popLast());const d=kE(u);r+=d-a.size,t.push(this.ar.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=M2(this.ar.serializer,o.convertToNoDocument(Pe.min()));t.push(this.ar.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),x.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function tU(n){return vr(n,"remoteDocumentGlobal")}function Bc(n){return vr(n,"remoteDocumentsV14")}function Rg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nU(n,e){const t=e.documentKey.path.toArray();return[n,ME(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rU(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Ze(t[s],r[s]),i)return i;return i=Ze(t.length,r.length),i||(i=Ze(t[t.length-2],r[r.length-2]),i||Ze(t[t.length-1],r[r.length-1]))}class JY{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class iU{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&vg(r.mutation,i,Mi.empty(),vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,et()).next(()=>r))}getLocalViewOfDocuments(e,t,r=et()){const i=lo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=mg();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=lo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,et()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ni();const o=_g(),a=_g();return t.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(void 0===f||f.mutation instanceof sa)?s=s.insert(d.key,d):void 0!==f?(o.set(d.key,f.mutation.getFieldMask()),vg(f.mutation,d,f.mutation.getFieldMask(),vn.now())):o.set(d.key,Mi.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),t.forEach((d,f)=>{var g;return a.set(d,new JY(f,null!==(g=o.get(d))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,t){const r=_g();let i=new tn((o,a)=>o-a),s=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=t.get(u);if(null===d)return;let f=r.get(u)||Mi.empty();f=a.applyToLocalView(d,f),r.set(u,f);const g=(i.get(a.batchId)||et()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,f=u.value,g=KL();f.forEach(_=>{if(!s.has(_)){const y=r2(t.get(_),r.get(_));null!==y&&g.set(_,y),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return pe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):iA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):x.resolve(lo());let a=-1,u=s;return o.next(d=>x.forEach(d,(f,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(f)?x.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,et())).next(f=>({batchId:a,changes:WL(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(r=>{let i=mg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=mg();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,u=>{const d=(g=t,_=u.child(s),new ra(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,d)=>{const f=d.getKey();null===o.get(f)&&(o=o.insert(f,dn.newInvalidDocument(f)))});let a=mg();return o.forEach((u,d)=>{const f=s.get(u);void 0!==f&&vg(f.mutation,d,Mi.empty(),vn.now()),gg(t,d)&&(a=a.insert(u,d))}),a})}}class XY{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return x.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:Bn(i.createTime)}),x.resolve();var i}getNamedQuery(e,t){return x.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:yA(i.bundledQuery),readTime:Bn(i.readTime)}),x.resolve();var i}}class eJ{constructor(){this.overlays=new tn(pe.comparator),this.hr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){const r=lo();return x.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),x.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){const i=lo(),s=t.length+1,o=new pe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new tn((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=s.get(d.largestBatchId);null===f&&(f=lo(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=lo(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=i)););return x.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lA(t,r));let s=this.hr.get(t);void 0===s&&(s=et(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class DA{constructor(){this.Pr=new Gt(Er.Ir),this.Tr=new Gt(Er.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Er(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Er(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new pe(new pt([])),r=new Er(t,e),i=new Er(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new pe(new pt([])),r=new Er(t,e),i=new Er(t,e+1);let s=et();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Er(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Er{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return pe.comparator(e.key,t.key)||Ze(e.pr,t.pr)}static Er(e,t){return Ze(e.pr,t.pr)||pe.comparator(e.key,t.key)}}class tJ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Gt(Er.Ir)}checkEmpty(e){return x.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new uA(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Er(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,t){return x.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Er(t,0),i=new Er(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(Ze);return t.forEach(i=>{const s=new Er(i,0),o=new Er(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),x.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;pe.isDocumentKey(s)||(s=s.child(""));const o=new Er(new pe(s),0);let a=new Gt(Ze);return this.wr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.pr)),!0)},o),x.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Re(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return x.forEach(t.mutations,i=>{const s=new Er(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Er(t,0),i=this.wr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return x.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nJ{constructor(e){this.vr=e,this.docs=new tn(pe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=Ni();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():dn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ni();const o=t.path,a=new pe(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||K0(aL(f),r)<=0||(i.has(f.key)||gg(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,t,r,i){De()}Fr(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new rJ(this)}getSize(e){return x.resolve(this.size)}}class rJ extends X2{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class iJ{constructor(e){this.persistence=e,this.Mr=new ia(t=>Mc(t),fg),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new DA,this.targetCount=0,this.Lr=Uc.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),x.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Uc(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.qn(t),x.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),x.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.Nr.containsKey(t))}}class AA{constructor(e,t){this.Br={},this.overlays={},this.kr=new Zi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new iJ(this),this.indexManager=new qY,this.remoteDocumentCache=new nJ(r=>this.referenceDelegate.Kr(r)),this.serializer=new P2(t),this.$r=new XY(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eJ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new tJ(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);const i=new sJ(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return x.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class sJ extends cL{constructor(e){super(),this.currentSequenceNumber=e}}class LE{constructor(e){this.persistence=e,this.zr=new DA,this.jr=null}static Hr(e){return new LE(e)}get Jr(){if(this.jr)return this.jr;throw De()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),x.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Jr,r=>{const i=pe.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,Pe.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return x.or([()=>x.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class oJ{constructor(e){this.serializer=e}N(e,t,r,i){const s=new gE("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fL,{unique:!0}),u.createObjectStore("documentMutations"),sU(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=x.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),sU(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pe.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").W().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fL,{unique:!0});const g=d.store("mutations"),_=f.map(y=>g.put(y));return x.waitFor(_)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:zQ});d.createIndex("collectionPathOverlayIndex",GQ,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",WQ,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:OQ});d.createIndex("documentKeyIndex",kQ),d.createIndex("collectionGroupIndex",FQ)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:jQ}).createIndex("sequenceNumberIndex",$Q,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:HQ}).createIndex("documentKeyIndex",qQ,{unique:!1})}(e))),o}ei(e){let t=0;return e.store("remoteDocuments").Y((r,i)=>{t+=kE(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>x.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>x.forEach(a,u=>{Re(u.userId===s.userId);const d=Fc(this.serializer,u);return G2(e,s.userId,d).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const u=new pt(o),d=[0,Qr(u)];s.push(t.get(d).next(f=>f?x.resolve():t.put({targetId:0,path:Qr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>x.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:BQ});const r=t.store("collectionParents"),i=new CA,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Qr(u)})}};return t.store("remoteDocuments").Y({J:!0},(o,a)=>{const u=new pt(o);return s(u.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([o,a,u],d)=>{const f=uo(a);return s(f.popLast())}))}ri(e){const t=e.store("targets");return t.Y((r,i)=>{const s=Dg(i),o=N2(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(g=o,g.document?new pe(pt.fromString(g.document.name).popFirst(5)):g.noDocument?pe.fromSegments(g.noDocument.path):g.unknownDocument?pe.fromSegments(g.unknownDocument.path):De()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(d))}).next(()=>x.waitFor(i))}si(e,t){const r=t.store("mutations"),i=eU(this.serializer),s=new AA(LE.Hr,this.serializer.ct);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var d;let f=null!==(d=a.get(u.userId))&&void 0!==d?d:et();Fc(this.serializer,u).keys().forEach(g=>f=f.add(g)),a.set(u.userId,f)}),x.forEach(a,(u,d)=>{const f=new yr(d),g=NE.lt(this.serializer,f),_=s.getIndexManager(f),y=FE.lt(f,this.serializer,_,s.referenceDelegate);return new iU(i,y,g,_).recalculateAndSaveOverlaysForDocumentKeys(new Y0(t,Zi._e),u).next()})})}}function sU(n){n.createObjectStore("targetDocuments",{keyPath:LQ}).createIndex("documentTargetsIndex",UQ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",VQ,{unique:!0}),n.createObjectStore("targetGlobal")}const bA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class SA{constructor(e,t,r,i,s,o,a,u,d,f,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=d,this.ai=f,this.ui=g,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=_=>Promise.resolve(),!SA.D())throw new ne(V.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZY(this,i),this.Ti=t+"main",this.serializer=new P2(u),this.Ei=new hs(this.Ti,this.ui,new oJ(this.serializer)),this.Qr=new GY(this.referenceDelegate,this.serializer),this.remoteDocumentCache=eU(this.serializer),this.$r=new LY,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&Un("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ne(V.FAILED_PRECONDITION,bA);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Zi(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,W.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(function(){var t=(0,W.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,W.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>BE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(au(e))return ie("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ie("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Pg(e).get("owner").next(t=>x.resolve(this.Si(t)))}bi(e){return BE(e).delete(this.clientId)}Di(){var e=this;return(0,W.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=vr(r,"clientMetadata");return i.W().next(s=>{const o=e.vi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return x.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?x.resolve(!0):Pg(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new ne(V.FAILED_PRECONDITION,bA);return!1}}return!(!this.networkEnabled||!this.inForeground)||BE(e).W().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ie("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,W.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Y0(t,Zi._e);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>BE(e).W().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return FE.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zY(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return NE.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){ie("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(u=this.ui)?ZQ:14===u?_L:13===u?mL:12===u?KQ:11===u?gL:void De();var u;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new Y0(a,this.kr?this.kr.next():Zi._e),"readwrite-primary"===t?this.gi(o).next(u=>!!u||this.pi(o)).next(u=>{if(!u)throw Un(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new ne(V.FAILED_PRECONDITION,uL);return r(o)}).next(u=>this.wi(o).next(()=>u)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return Pg(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ne(V.FAILED_PRECONDITION,bA)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pg(e).put("owner",t)}static D(){return hs.D()}yi(e){const t=Pg(e);return t.get("owner").next(r=>this.Si(r)?(ie("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):x.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(Un(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,St.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return ie("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Un("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Un("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Pg(n){return vr(n,"owner")}function BE(n){return vr(n,"clientMetadata")}function RA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class PA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=et(),i=et();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new PA(e,t.fromCache,r,i)}}class aJ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class oU{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,St.G6)()?8:hs.v((0,St.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new aJ;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(kd()<=io.in.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",qd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),x.resolve()):(kd()<=io.in.DEBUG&&ie("QueryEngine","Query:",qd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(kd()<=io.in.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",qd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(t))):x.resolve())}ji(e,t){if(jL(t))return x.resolve(null);let r=hi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=DE(t,null,"F"),r=hi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=et(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Zi(t,a);return this.Xi(t,d,o,u.readTime)?this.ji(e,DE(t,null,"F")):this.es(e,d,t,u)}))})))}Hi(e,t,r,i){return jL(t)||i.isEqual(Pe.min())?x.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?x.resolve(null):(kd()<=io.in.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qd(t)),this.es(e,o,t,oL(i,-1)).next(a=>a))})}Zi(e,t){let r=new Gt(zL(e));return t.forEach((i,s)=>{gg(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return kd()<=io.in.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",qd(t)),this.zi.getDocumentsMatchingQuery(e,t,Ki.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class uJ{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new tn(Ze),this.rs=new ia(s=>Mc(s),fg),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iU(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function aU(n,e,t,r){return new uJ(n,e,t,r)}function uU(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,W.Z)(function*(n,e){const t=he(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=et();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(d=>({us:d,removedBatchIds:o,addedBatchIds:a}))})})}),MA.apply(this,arguments)}function cU(n){const e=he(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function lU(n,e,t){let r=et(),i=et();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ni();return t.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Pe.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{cs:o,ls:i}})}function dJ(n,e){const t=he(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function th(n,e){const t=he(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new oa(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function nh(n,e,t){return NA.apply(this,arguments)}function NA(){return NA=(0,W.Z)(function*(n,e,t){const r=he(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!au(o))throw o;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),NA.apply(this,arguments)}function jE(n,e,t){const r=he(n);let i=Pe.min(),s=et();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const g=he(u),_=g.rs.get(f);return void 0!==_?x.resolve(g.ns.get(_)):g.Qr.getTargetData(d,f)}(r,o,hi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:Pe.min(),t?s:et())).next(a=>(fU(r,qL(e),a),{documents:a,hs:s})))}function dU(n,e){const t=he(n),r=he(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function hU(n,e){const t=he(n),r=t.ss.get(e)||Pe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,oL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(fU(t,e,i),i))}function fU(n,e,t){let r=n.ss.get(e)||Pe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function xA(){return xA=(0,W.Z)(function*(n,e,t,r){const i=he(n);let s=et(),o=Ni();for(const d of t){const f=e.Ps(d.metadata.name);d.document&&(s=s.add(f));const g=e.Is(d);g.setReadTime(e.Ts(d.metadata.readTime)),o=o.insert(f,g)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield th(i,(f=r,hi($d(pt.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>lU(d,a,o).next(f=>(a.apply(d),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.Qr.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,f.cs,f.ls)).next(()=>f.cs)))}),xA.apply(this,arguments)}function fJ(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,W.Z)(function*(n,e,t=et()){const r=yield th(n,hi(yA(e.bundledQuery))),i=he(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Bn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(or.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}),OA.apply(this,arguments)}function pU(n,e){return`firestore_clients_${n}_${e}`}function gU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function kA(n,e){return`firestore_targets_${n}_${e}`}class $E{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new ne(i.error.code,i.error.message))),o?new $E(e,t,i.state,s):(Un("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ne(r.error.code,r.error.message))),s?new Mg(e,r.state,i):(Un("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class HE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=oA();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=dL(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new HE(e,s):(Un("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class FA{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new FA(t.clientId,t.onlineState):(Un("SharedClientState",`Failed to parse online state: ${e}`),null)}}class VA{constructor(){this.activeTargetIds=oA()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LA{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new tn(Ze),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=pU(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new VA),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,W.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(pU(e.persistenceKey,i));if(s){const o=HE.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(kA(this.persistenceKey,e));if(r){const i=Mg.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kA(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ie("SharedClientState","READ",e,t),t}setItem(e,t){ie("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ie("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ie("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void Un("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,W.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=Zi._e;if(null!=o)try{const u=JSON.parse(o);Re("number"==typeof u),a=u}catch(u){Un("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Zi._e&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new $E(this.currentUser,e,t,r),s=gU(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=gU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=kA(this.persistenceKey,e),s=new Mg(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return HE.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return $E.Es(new yr(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return Mg.Es(i,t)}xs(e){return FA.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,W.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);ie("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=oA();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class mU{constructor(){this.no=new VA,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new VA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pJ{io(e){}shutdown(){}}class _U{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let qE=null;function UA(){return null===qE?qE=268435456+Math.round(2147483648*Math.random()):qE++,"0x"+qE.toString(16)}const gJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mJ{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Jr="WebChannelConnection";class _J extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${i}/databases/${s}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(t,r,i,s,o){const a=UA(),u=this.bo(t,r.toUriEncodedString());ie("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(d,s,o),this.Co(t,u,d,i).then(f=>(ie("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Pi("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}vo(t,r,i,s,o,a){return this.So(t,r,i,s,o)}Do(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Od,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}bo(t,r){return`${this.fo}/v1/${r}:${gJ[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,i){const s=UA();return new Promise((o,a)=>{const u=new pQ;u.setWithCredentials(!0),u.listenOnce(hQ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case z0.NO_ERROR:const f=u.getResponseJson();ie(Jr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case z0.TIMEOUT:ie(Jr,`RPC '${e}' ${s} timed out`),a(new ne(V.DEADLINE_EXCEEDED,"Request time out"));break;case z0.HTTP_ERROR:const g=u.getStatus();if(ie(Jr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const y=_?.error;if(y&&y.status&&y.message){const E=function(A){const N=A.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(N)>=0?N:V.UNKNOWN}(y.status);a(new ne(E,y.message))}else a(new ne(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ne(V.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{ie(Jr,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);ie(Jr,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Fo(e,t,r){const i=UA(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=lQ(),a=dQ(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const f=s.join("");ie(Jr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const g=o.createWebChannel(f,u);let _=!1,y=!1;const E=new mJ({lo:A=>{y?ie(Jr,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(_||(ie(Jr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),ie(Jr,`RPC '${e}' stream ${i} sending:`,A),g.send(A))},ho:()=>g.close()}),T=(A,N,R)=>{A.listen(N,k=>{try{R(k)}catch(K){setTimeout(()=>{throw K},0)}})};return T(g,pE.EventType.OPEN,()=>{y||ie(Jr,`RPC '${e}' stream ${i} transport opened.`)}),T(g,pE.EventType.CLOSE,()=>{y||(y=!0,ie(Jr,`RPC '${e}' stream ${i} transport closed`),E.Vo())}),T(g,pE.EventType.ERROR,A=>{y||(y=!0,Pi(Jr,`RPC '${e}' stream ${i} transport errored:`,A),E.Vo(new ne(V.UNAVAILABLE,"The operation could not be completed")))}),T(g,pE.EventType.MESSAGE,A=>{var N;if(!y){const R=A.data[0];Re(!!R);const K=R.error||(null===(N=R[0])||void 0===N?void 0:N.error);if(K){ie(Jr,`RPC '${e}' stream ${i} received error:`,K);const ce=K.status;let Me=function(gi){const xi=Kn[gi];if(void 0!==xi)return c2(xi)}(ce),ze=K.message;void 0===Me&&(Me=V.INTERNAL,ze="Unknown error status: "+ce+" with message "+K.message),y=!0,E.Vo(new ne(Me,ze)),g.close()}else ie(Jr,`RPC '${e}' stream ${i} received:`,R),E.mo(R)}}),T(a,fQ.STAT_EVENT,A=>{A.stat===eL.PROXY?ie(Jr,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===eL.NOPROXY&&ie(Jr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ro()},0),E}}function yU(){return typeof window<"u"?window:null}function zE(){return typeof document<"u"?document:null}function Ng(n){return new bY(n,!0)}class BA{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class vU{constructor(e,t,r,i,s,o,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new BA(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,W.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,W.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,t){var r=this;return(0,W.Z)(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(Un(t.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):t&&t.code===V.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(t)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===t&&this.o_(r,i)},r=>{e(()=>{const i=new ne(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,t){const r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo((0,W.Z)(function*(){e.state=0,e.start()}))}__(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yJ extends vU{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function PY(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:De(),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(Re(void 0===f||"string"==typeof f),or.fromBase64String(f||"")):(Re(void 0===f||f instanceof Uint8Array),or.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=void 0===d.code?V.UNKNOWN:c2(d.code);return new ne(f,d.message||"")}(o);t=new p2(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ho(n,r.document.name),s=Bn(r.document.updateTime),o=r.document.createTime?Bn(r.document.createTime):Pe.min(),a=new xr({mapValue:{fields:r.document.fields}}),u=dn.newFoundDocument(i,s,o,a);t=new PE(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=ho(n,r.document),s=r.readTime?Bn(r.readTime):Pe.min(),o=dn.newNoDocument(i,s);t=new PE([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ho(n,r.document);t=new PE([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return De();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new IY(i,s);t=new f2(r.targetId,o)}}var d;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Pe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Pe.min():o.readTime?Bn(o.readTime):Pe.min()}(e);return this.listener.u_(t,r)}c_(e){const t={};t.database=gA(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=TE(u)?{documents:D2(s,u)}:{query:_A(s,u).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=y2(s,o.resumeToken);const d=hA(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Pe.min())>0){a.readTime=Zd(s,o.snapshotVersion.toTimestamp());const d=hA(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function NY(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.t_(t)}l_(e){const t={};t.database=gA(this.serializer),t.removeTarget=e,this.t_(t)}}class vJ extends vU{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function MY(n,e){return n&&n.length>0?(Re(void 0!==e),n.map(t=>function(i,s){let o=Bn(i.updateTime?i.updateTime:s);return o.isEqual(Pe.min())&&(o=Bn(s)),new _Y(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.T_(r,t)}return Re(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=gA(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Cg(this.serializer,r))};this.t_(t)}}class EJ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new ne(V.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,pA(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(V.UNKNOWN,s.toString())})}vo(e,t,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,pA(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(V.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class wJ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Un(t),this.g_=!1):ie("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class TJ{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(a=>{r.enqueueAndForget((0,W.Z)(function*(){var u;vu(o)&&(ie("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,W.Z)(function*(f){const g=he(f);g.v_.add(4),yield rh(g),g.x_.set("Unknown"),g.v_.delete(4),yield xg(g)}),function d(f){return u.apply(this,arguments)})(o))}))}),this.x_=new wJ(r,i)}}function xg(n){return $A.apply(this,arguments)}function $A(){return $A=(0,W.Z)(function*(n){if(vu(n))for(const e of n.F_)yield e(!0)}),$A.apply(this,arguments)}function rh(n){return HA.apply(this,arguments)}function HA(){return HA=(0,W.Z)(function*(n){for(const e of n.F_)yield e(!1)}),HA.apply(this,arguments)}function GE(n,e){const t=he(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),GA(t)?zA(t):oh(t).Jo()&&qA(t,e))}function ih(n,e){const t=he(n),r=oh(t);t.C_.delete(e),r.Jo()&&EU(t,e),0===t.C_.size&&(r.Jo()?r.Xo():vu(t)&&t.x_.set("Unknown"))}function qA(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}oh(n).c_(e)}function EU(n,e){n.O_.Oe(e),oh(n).l_(e)}function zA(n){n.O_=new TY({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),oh(n).start(),n.x_.p_()}function GA(n){return vu(n)&&!oh(n).Ho()&&n.C_.size>0}function vu(n){return 0===he(n).v_.size}function IU(n){n.O_=void 0}function CJ(n){return WA.apply(this,arguments)}function WA(){return WA=(0,W.Z)(function*(n){n.C_.forEach((e,t)=>{qA(n,e)})}),WA.apply(this,arguments)}function DJ(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,W.Z)(function*(n,e){IU(n),GA(n)?(n.x_.S_(e),zA(n)):n.x_.set("Unknown")}),KA.apply(this,arguments)}function AJ(n,e,t){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,W.Z)(function*(n,e,t){if(n.x_.set("Online"),e instanceof p2&&2===e.state&&e.cause)try{yield(r=(0,W.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.C_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.C_.delete(u),s.O_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield WE(n,r)}else if(e instanceof PE?n.O_.$e(e):e instanceof f2?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(Pe.min()))try{const r=yield cU(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.C_.get(d);f&&s.C_.set(d,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const f=s.C_.get(u);if(!f)return;s.C_.set(u,f.withResumeToken(or.EMPTY_BYTE_STRING,f.snapshotVersion)),EU(s,u);const g=new oa(f.target,u,d,f.sequenceNumber);qA(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ie("RemoteStore","Failed to raise snapshot:",r),yield WE(n,r)}var r}),ZA.apply(this,arguments)}function WE(n,e,t){return QA.apply(this,arguments)}function QA(){return QA=(0,W.Z)(function*(n,e,t){if(!au(e))throw e;n.v_.add(1),yield rh(n),n.x_.set("Offline"),t||(t=()=>cU(n.localStore)),n.asyncQueue.enqueueRetryable((0,W.Z)(function*(){ie("RemoteStore","Retrying IndexedDB access"),yield t(),n.v_.delete(1),yield xg(n)}))}),QA.apply(this,arguments)}function wU(n,e){return e().catch(t=>WE(n,t,e))}function sh(n){return YA.apply(this,arguments)}function YA(){return YA=(0,W.Z)(function*(n){const e=he(n),t=Eu(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;bJ(e);)try{const i=yield dJ(e.localStore,r);if(null===i){0===e.D_.length&&t.Xo();break}r=i.batchId,SJ(e,i)}catch(i){yield WE(e,i)}TU(e)&&CU(e)}),YA.apply(this,arguments)}function bJ(n){return vu(n)&&n.D_.length<10}function SJ(n,e){n.D_.push(e);const t=Eu(n);t.Jo()&&t.P_&&t.I_(e.mutations)}function TU(n){return vu(n)&&!Eu(n).Ho()&&n.D_.length>0}function CU(n){Eu(n).start()}function RJ(n){return JA.apply(this,arguments)}function JA(){return JA=(0,W.Z)(function*(n){Eu(n).d_()}),JA.apply(this,arguments)}function PJ(n){return XA.apply(this,arguments)}function XA(){return XA=(0,W.Z)(function*(n){const e=Eu(n);for(const t of n.D_)e.I_(t.mutations)}),XA.apply(this,arguments)}function MJ(n,e,t){return eb.apply(this,arguments)}function eb(){return eb=(0,W.Z)(function*(n,e,t){const r=n.D_.shift(),i=cA.from(r,e,t);yield wU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield sh(n)}),eb.apply(this,arguments)}function NJ(n,e){return tb.apply(this,arguments)}function tb(){return tb=(0,W.Z)(function*(n,e){var t;e&&Eu(n).P_&&(yield(t=(0,W.Z)(function*(i,s){if(u2(a=s.code)&&a!==V.ABORTED){const o=i.D_.shift();Eu(i).Zo(),yield wU(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield sh(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),TU(n)&&CU(n)}),tb.apply(this,arguments)}function DU(n,e){return nb.apply(this,arguments)}function nb(){return nb=(0,W.Z)(function*(n,e){const t=he(n);t.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const r=vu(t);t.v_.add(3),yield rh(t),r&&t.x_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),yield xg(t)}),nb.apply(this,arguments)}function rb(n,e){return ib.apply(this,arguments)}function ib(){return ib=(0,W.Z)(function*(n,e){const t=he(n);e?(t.v_.delete(2),yield xg(t)):e||(t.v_.add(2),yield rh(t),t.x_.set("Unknown"))}),ib.apply(this,arguments)}function oh(n){return n.N_||(n.N_=function(t,r,i){const s=he(t);return s.R_(),new yJ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:CJ.bind(null,n),To:DJ.bind(null,n),u_:AJ.bind(null,n)}),n.F_.push(function(){var e=(0,W.Z)(function*(t){t?(n.N_.Zo(),GA(n)?zA(n):n.x_.set("Unknown")):(yield n.N_.stop(),IU(n))});return function(t){return e.apply(this,arguments)}}())),n.N_}function Eu(n){return n.L_||(n.L_=function(t,r,i){const s=he(t);return s.R_(),new vJ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:RJ.bind(null,n),To:NJ.bind(null,n),E_:PJ.bind(null,n),T_:MJ.bind(null,n)}),n.F_.push(function(){var e=(0,W.Z)(function*(t){t?(n.L_.Zo(),yield sh(n)):(yield n.L_.stop(),n.D_.length>0&&(ie("RemoteStore",`Stopping write stream with ${n.D_.length} pending writes`),n.D_=[]))});return function(t){return e.apply(this,arguments)}}())),n.L_}class sb{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new sb(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ne(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ah(n,e){if(Un("AsyncQueue",`${e}: ${n}`),au(n))return new ne(V.UNAVAILABLE,`${e}: ${n}`);throw n}class uh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=mg(),this.sortedSet=new tn(this.comparator)}static emptySet(e){return new uh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof uh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new uh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class AU{constructor(){this.B_=new tn(pe.comparator)}track(e){const t=e.doc.key,r=this.B_.get(t);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(t):1===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):De():this.B_=this.B_.insert(t,e)}k_(){const e=[];return this.B_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ch{constructor(e,t,r,i,s,o,a,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new ch(e,t,uh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class xJ{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class OJ{constructor(){this.queries=new ia(e=>HL(e),pg),this.onlineState="Unknown",this.W_=new Set}}function ob(n,e){return ab.apply(this,arguments)}function ab(){return ab=(0,W.Z)(function*(n,e){const t=he(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new xJ,r=e.U_()?0:1);try{switch(r){case 0:s.q_=yield t.onListen(i,!0);break;case 1:s.q_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=ah(o,`Initialization of query '${qd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Q_.push(e),e.G_(t.onlineState),s.q_&&e.z_(s.q_)&&lb(t)}),ab.apply(this,arguments)}function ub(n,e){return cb.apply(this,arguments)}function cb(){return cb=(0,W.Z)(function*(n,e){const t=he(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),0===s.Q_.length?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}),cb.apply(this,arguments)}function kJ(n,e){const t=he(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&lb(t)}function FJ(n,e,t){const r=he(n),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(t);r.queries.delete(e)}function lb(n){n.W_.forEach(e=>{e.next()})}var db,bU;(bU=db||(db={})).j_="default",bU.Cache="cache";class hb{constructor(e,t,r){this.query=e,this.H_=t,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ch(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),t=!0):this.X_(e,this.onlineState)&&(this.ea(e),t=!0),this.Y_=e,t}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}X_(e,t){return!e.fromCache||!this.U_()||(!this.options.ta||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ea(e){e=ch.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==db.Cache}}class VJ{constructor(e,t){this.na=e,this.byteLength=t}ra(){return"metadata"in this.na}}class SU{constructor(e){this.serializer=e}Ps(e){return ho(this.serializer,e)}Is(e){return e.metadata.exists?C2(this.serializer,e.document,!1):dn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Bn(e)}}class LJ{constructor(e,t,r){this.ia=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=RU(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++t;const r=pt.fromString(e.na.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}oa(e){const t=new Map,r=new SU(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||et()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,W.Z)(function*(){const t=yield function hJ(n,e,t,r){return xA.apply(this,arguments)}(e.localStore,new SU(e.serializer),e.documents,e.ia.id),r=e.oa(e.documents);for(const i of e.queries)yield fJ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,_a:e.collectionGroups,aa:t}})()}}function RU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class PU{constructor(e){this.key=e}}class MU{constructor(e){this.key=e}}class NU{constructor(e,t){this.query=e,this.ua=t,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=et(),this.mutatedKeys=et(),this.ha=zL(e),this.Pa=new uh(this.ha)}get Ia(){return this.ua}Ta(e,t){const r=t?t.Ea:new AU,i=t?t.Pa:this.Pa;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{const _=i.get(f),y=gg(this.query,g)?g:null,E=!!_&&this.mutatedKeys.has(_.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let A=!1;_&&y?_.data.isEqual(y.data)?E!==T&&(r.track({type:3,doc:y}),A=!0):this.da(_,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.ha(y,u)>0||d&&this.ha(y,d)<0)&&(a=!0)):!_&&y?(r.track({type:0,doc:y}),A=!0):_&&!y&&(r.track({type:1,doc:_}),A=!0,(u||d)&&(a=!0)),A&&(y?(o=o.add(y),s=T?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((f,g)=>function(y,E){const T=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return T(y)-T(E)}(f.type,g.type)||this.ha(f.doc,g.doc)),this.Aa(r),i=null!=i&&i;const a=t&&!i?this.Ra():[],u=0===this.la.size&&this.current&&!i?1:0,d=u!==this.ca;return this.ca=u,0!==o.length||d?{snapshot:new ch(this.query,e.Pa,s,o,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new AU,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(t=>this.ua=this.ua.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ua=this.ua.delete(t)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=et(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const t=[];return e.forEach(r=>{this.la.has(r)||t.push(new MU(r))}),this.la.forEach(r=>{e.has(r)||t.push(new PU(r))}),t}fa(e){this.ua=e.hs,this.la=et();const t=this.Ta(e.documents);return this.applyChanges(t,!0)}ga(){return ch.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class UJ{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class BJ{constructor(e){this.key=e,this.pa=!1}}class jJ{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new ia(a=>HL(a),pg),this.Sa=new Map,this.ba=new Set,this.Da=new tn(pe.comparator),this.Ca=new Map,this.va=new DA,this.Fa={},this.Ma=new Map,this.xa=Uc.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}function $J(n,e){return fb.apply(this,arguments)}function fb(){return fb=(0,W.Z)(function*(n,e,t=!0){const r=KE(n);let i;const s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=yield xU(r,e,t,!0),i}),fb.apply(this,arguments)}function HJ(n,e){return pb.apply(this,arguments)}function pb(){return pb=(0,W.Z)(function*(n,e){const t=KE(n);yield xU(t,e,!0,!1)}),pb.apply(this,arguments)}function xU(n,e,t,r){return gb.apply(this,arguments)}function gb(){return gb=(0,W.Z)(function*(n,e,t,r){const i=yield th(n.localStore,hi(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield mb(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&GE(n.remoteStore,i),a}),gb.apply(this,arguments)}function mb(n,e,t,r,i){return _b.apply(this,arguments)}function _b(){return _b=(0,W.Z)(function*(n,e,t,r,i){n.Na=(g,_,y)=>{return(E=(0,W.Z)(function*(A,N,R,k){let K=N.view.Ta(R);K.Xi&&(K=yield jE(A.localStore,N.query,!1).then(({documents:Vt})=>N.view.Ta(Vt,K)));const ce=k&&k.targetChanges.get(N.targetId),Me=k&&null!=k.targetMismatches.get(N.targetId),ze=N.view.applyChanges(K,A.isPrimaryClient,ce,Me);return Sb(A,N.targetId,ze.Va),ze.snapshot}),function T(A,N,R,k){return E.apply(this,arguments)})(n,g,_,y);var E};const s=yield jE(n.localStore,e,!0),o=new NU(e,s.hs),a=o.Ta(s.documents),u=wg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),d=o.applyChanges(a,n.isPrimaryClient,u);Sb(n,t,d.Va);const f=new UJ(e,t,o);return n.wa.set(e,f),n.Sa.has(t)?n.Sa.get(t).push(e):n.Sa.set(t,[e]),d.snapshot}),_b.apply(this,arguments)}function qJ(n,e,t){return yb.apply(this,arguments)}function yb(){return yb=(0,W.Z)(function*(n,e,t){const r=he(n),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!pg(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield nh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ih(r.remoteStore,i.targetId),lh(r,i.targetId)}).catch(ou))):(lh(r,i.targetId),yield nh(r.localStore,i.targetId,!0))}),yb.apply(this,arguments)}function zJ(n,e){return vb.apply(this,arguments)}function vb(){return vb=(0,W.Z)(function*(n,e){const t=he(n),r=t.wa.get(e),i=t.Sa.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ih(t.remoteStore,r.targetId))}),vb.apply(this,arguments)}function Eb(){return Eb=(0,W.Z)(function*(n,e,t){const r=Ub(n);try{const i=yield function(o,a){const u=he(o),d=vn.now(),f=a.reduce((y,E)=>y.add(E.key),et());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=Ni(),T=et();return u.os.getEntries(y,f).next(A=>{E=A,E.forEach((N,R)=>{R.isValidDocument()||(T=T.add(N))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,E)).next(A=>{g=A;const N=[];for(const R of a){const k=vY(R,g.get(R.key).overlayedDocument);null!=k&&N.push(new sa(R.key,k,SL(k.value.mapValue),En.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,N,a)}).next(A=>{_=A;const N=A.applyToLocalDocumentSet(g,T);return u.documentOverlayCache.saveOverlays(y,A.batchId,N)})}).then(()=>({batchId:_.batchId,changes:WL(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Fa[o.currentUser.toKey()];d||(d=new tn(Ze)),d=d.insert(a,u),o.Fa[o.currentUser.toKey()]=d}(r,i.batchId,t),yield aa(r,i.changes),yield sh(r.remoteStore)}catch(i){const s=ah(i,"Failed to persist write");t.reject(s)}}),Eb.apply(this,arguments)}function OU(n,e){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,W.Z)(function*(n,e){const t=he(n);try{const r=yield function lJ(n,e){const t=he(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,g)=>{const _=i.get(g);if(!_)return;a.push(t.Qr.removeMatchingKeys(s,f.removedDocuments,g).next(()=>t.Qr.addMatchingKeys(s,f.addedDocuments,g)));let y=_.withSequenceNumber(s.currentSequenceNumber);var T,A,N;null!==e.targetMismatches.get(g)?y=y.withResumeToken(or.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(g,y),A=y,N=f,(0===(T=_).resumeToken.approximateByteSize()||A.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,y))});let u=Ni(),d=et();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(lU(s,o,e.documentUpdates).next(f=>{u=f.cs,d=f.ls})),!r.isEqual(Pe.min())){const f=t.Qr.getLastRemoteSnapshotVersion(s).next(g=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Ca.get(s);o&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?Re(o.pa):i.removedDocuments.size>0&&(Re(o.pa),o.pa=!1))}),yield aa(t,r,e)}catch(r){yield ou(r)}}),Ib.apply(this,arguments)}function kU(n,e,t){const r=he(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wa.forEach((s,o)=>{const a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=he(o);u.onlineState=a;let d=!1;u.queries.forEach((f,g)=>{for(const _ of g.Q_)_.G_(a)&&(d=!0)}),d&&lb(u)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function WJ(n,e,t){return wb.apply(this,arguments)}function wb(){return wb=(0,W.Z)(function*(n,e,t){const r=he(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ca.get(e),s=i&&i.key;if(s){let o=new tn(pe.comparator);o=o.insert(s,dn.newNoDocument(s,Pe.min()));const a=et().add(s),u=new Ig(Pe.min(),new Map,new tn(Ze),o,a);yield OU(r,u),r.Da=r.Da.remove(s),r.Ca.delete(e),Rb(r)}else yield nh(r.localStore,e,!1).then(()=>lh(r,e,t)).catch(ou)}),wb.apply(this,arguments)}function KJ(n,e){return Tb.apply(this,arguments)}function Tb(){return Tb=(0,W.Z)(function*(n,e){const t=he(n),r=e.batch.batchId;try{const i=yield function cJ(n,e){const t=he(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,u,d,f){const g=d.batch,_=g.keys();let y=x.resolve();return _.forEach(E=>{y=y.next(()=>f.getEntry(u,E)).next(T=>{const A=d.docVersions.get(E);Re(null!==A),T.version.compareTo(A)<0&&(g.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),f.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=et();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);bb(t,r,null),Ab(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield aa(t,i)}catch(i){yield ou(i)}}),Tb.apply(this,arguments)}function ZJ(n,e,t){return Cb.apply(this,arguments)}function Cb(){return Cb=(0,W.Z)(function*(n,e,t){const r=he(n);try{const i=yield function(o,a){const u=he(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,a).next(g=>(Re(null!==g),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);bb(r,e,t),Ab(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield aa(r,i)}catch(i){yield ou(i)}}),Cb.apply(this,arguments)}function Db(){return Db=(0,W.Z)(function*(n,e){const t=he(n);vu(t.remoteStore)||ie("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=he(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ma.get(r)||[];i.push(e),t.Ma.set(r,i)}catch(r){const i=ah(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Db.apply(this,arguments)}function Ab(n,e){(n.Ma.get(e)||[]).forEach(t=>{t.resolve()}),n.Ma.delete(e)}function bb(n,e,t){const r=he(n);let i=r.Fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function lh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Sa.get(e))n.wa.delete(r),t&&n.ya.La(r,t);n.Sa.delete(e),n.isPrimaryClient&&n.va.Vr(e).forEach(r=>{n.va.containsKey(r)||FU(n,r)})}function FU(n,e){n.ba.delete(e.path.canonicalString());const t=n.Da.get(e);null!==t&&(ih(n.remoteStore,t),n.Da=n.Da.remove(e),n.Ca.delete(t),Rb(n))}function Sb(n,e,t){for(const r of t)r instanceof PU?(n.va.addReference(r.key,e),YJ(n,r)):r instanceof MU?(ie("SyncEngine","Document no longer in limbo: "+r.key),n.va.removeReference(r.key,e),n.va.containsKey(r.key)||FU(n,r.key)):De()}function YJ(n,e){const t=e.key,r=t.path.canonicalString();n.Da.get(t)||n.ba.has(r)||(ie("SyncEngine","New document in limbo: "+t),n.ba.add(r),Rb(n))}function Rb(n){for(;n.ba.size>0&&n.Da.size<n.maxConcurrentLimboResolutions;){const e=n.ba.values().next().value;n.ba.delete(e);const t=new pe(pt.fromString(e)),r=n.xa.next();n.Ca.set(r,new BJ(t)),n.Da=n.Da.insert(t,r),GE(n.remoteStore,new oa(hi($d(t.path)),r,"TargetPurposeLimboResolution",Zi._e))}}function aa(n,e,t){return Pb.apply(this,arguments)}function Pb(){return Pb=(0,W.Z)(function*(n,e,t){const r=he(n),i=[],s=[],o=[];var a;r.wa.isEmpty()||(r.wa.forEach((a,u)=>{o.push(r.Na(u,e,t).then(d=>{if((d||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,d?.fromCache?"not-current":"current"),d){i.push(d);const f=PA.Ki(u.targetId,d);s.push(f)}}))}),yield Promise.all(o),r.ya.u_(i),yield(a=(0,W.Z)(function*(d,f){const g=he(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>x.forEach(f,y=>x.forEach(y.qi,E=>g.persistence.referenceDelegate.addReference(_,y.targetId,E)).next(()=>x.forEach(y.Qi,E=>g.persistence.referenceDelegate.removeReference(_,y.targetId,E)))))}catch(_){if(!au(_))throw _;ie("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of f){const y=_.targetId;if(!_.fromCache){const E=g.ns.get(y),A=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);g.ns=g.ns.insert(y,A)}}}),function u(d,f){return a.apply(this,arguments)})(r.localStore,s))}),Pb.apply(this,arguments)}function JJ(n,e){return Mb.apply(this,arguments)}function Mb(){return Mb=(0,W.Z)(function*(n,e){const t=he(n);if(!t.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const r=yield uU(t.localStore,e);t.currentUser=e,(s=t).Ma.forEach(a=>{a.forEach(u=>{u.reject(new ne(V.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ma.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield aa(t,r.us)}var s}),Mb.apply(this,arguments)}function XJ(n,e){const t=he(n),r=t.Ca.get(e);if(r&&r.pa)return et().add(r.key);{let i=et();const s=t.Sa.get(e);if(!s)return i;for(const o of s){const a=t.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function eX(n,e){return Nb.apply(this,arguments)}function Nb(){return Nb=(0,W.Z)(function*(n,e){const t=he(n),r=yield jE(t.localStore,e.query,!0),i=e.view.fa(r);return t.isPrimaryClient&&Sb(t,e.targetId,i.Va),i}),Nb.apply(this,arguments)}function tX(n,e){return xb.apply(this,arguments)}function xb(){return xb=(0,W.Z)(function*(n,e){const t=he(n);return hU(t.localStore,e).then(r=>aa(t,r))}),xb.apply(this,arguments)}function nX(n,e,t,r){return Ob.apply(this,arguments)}function Ob(){return Ob=(0,W.Z)(function*(n,e,t,r){const i=he(n),s=yield function(a,u){const d=he(a),f=he(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.vn(g,u).next(_=>_?d.localDocuments.getDocuments(g,_):x.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield sh(i.remoteStore):"acknowledged"===t||"rejected"===t?(bb(i,e,r||null),Ab(i,e),u=e,he(he(i.localStore).mutationQueue).Mn(u)):De(),yield aa(i,s)):ie("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ob.apply(this,arguments)}function kb(){return kb=(0,W.Z)(function*(n,e){const t=he(n);if(KE(t),Ub(t),!0===e&&!0!==t.Oa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield VU(t,r.toArray());t.Oa=!0,yield rb(t.remoteStore,!0);for(const s of i)GE(t.remoteStore,s)}else if(!1===e&&!1!==t.Oa){const r=[];let i=Promise.resolve();t.Sa.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(lh(t,o),nh(t.localStore,o,!0))),ih(t.remoteStore,o)}),yield i,yield VU(t,r),function(o){const a=he(o);a.Ca.forEach((u,d)=>{ih(a.remoteStore,d)}),a.va.mr(),a.Ca=new Map,a.Da=new tn(pe.comparator)}(t),t.Oa=!1,yield rb(t.remoteStore,!1)}}),kb.apply(this,arguments)}function VU(n,e,t){return Fb.apply(this,arguments)}function Fb(){return Fb=(0,W.Z)(function*(n,e,t){const r=he(n),i=[],s=[];for(const o of e){let a;const u=r.Sa.get(o);if(u&&0!==u.length){a=yield th(r.localStore,hi(u[0]));for(const d of u){const f=r.wa.get(d),g=yield eX(r,f);g.snapshot&&s.push(g.snapshot)}}else{const d=yield dU(r.localStore,o);a=yield th(r.localStore,d),yield mb(r,LU(d),o,!1,a.resumeToken)}i.push(a)}return r.ya.u_(s),i}),Fb.apply(this,arguments)}function LU(n){return BL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function iX(n){return t=he(n).localStore,he(he(t).persistence).Bi();var t}function sX(n,e,t,r){return Vb.apply(this,arguments)}function Vb(){return Vb=(0,W.Z)(function*(n,e,t,r){const i=he(n);if(i.Oa)return void ie("SyncEngine","Ignoring unexpected query state notification.");const s=i.Sa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield hU(i.localStore,qL(s[0])),a=Ig.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,or.EMPTY_BYTE_STRING);yield aa(i,o,a);break}case"rejected":yield nh(i.localStore,e,!0),lh(i,e,r);break;default:De()}}),Vb.apply(this,arguments)}function oX(n,e,t){return Lb.apply(this,arguments)}function Lb(){return Lb=(0,W.Z)(function*(n,e,t){const r=KE(n);if(r.Oa){for(const i of e){if(r.Sa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ie("SyncEngine","Adding an already active target "+i);continue}const s=yield dU(r.localStore,i),o=yield th(r.localStore,s);yield mb(r,LU(s),o.targetId,!1,o.resumeToken),GE(r.remoteStore,o)}for(const i of t)r.Sa.has(i)&&(yield nh(r.localStore,i,!1).then(()=>{ih(r.remoteStore,i),lh(r,i)}).catch(ou))}}),Lb.apply(this,arguments)}function KE(n){const e=he(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WJ.bind(null,e),e.ya.u_=kJ.bind(null,e.eventManager),e.ya.La=FJ.bind(null,e.eventManager),e}function Ub(n){const e=he(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZJ.bind(null,e),e}class Og{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,W.Z)(function*(){t.serializer=Ng(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return aU(this.persistence,new oU,e.initialUser,this.serializer)}createPersistence(e){return new AA(LE.Hr,this.serializer)}createSharedClientState(e){return new mU}terminate(){var e=this;return(0,W.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Bb extends Og{constructor(e,t,r){super(),this.ka=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield t().call(r,e),yield r.ka.initialize(r,e),yield Ub(r.ka.syncEngine),yield sh(r.ka.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return aU(this.persistence,new oU,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Y2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new MQ(t,this.persistence);return new PQ(e.asyncQueue,r)}createPersistence(e){const t=RA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Yr.withCacheSize(this.cacheSizeBytes):Yr.DEFAULT;return new SA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yU(),zE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new mU}}class UU extends Bb{constructor(e,t){super(e,t,!1),this.ka=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,W.Z)(function*(){yield t().call(r,e);const i=r.ka.syncEngine;r.sharedClientState instanceof LA&&(r.sharedClientState.syncEngine={Zs:nX.bind(null,i),Xs:sX.bind(null,i),eo:oX.bind(null,i),Bi:iX.bind(null,i),Ys:tX.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,W.Z)(function*(o){yield function rX(n,e){return kb.apply(this,arguments)}(r.ka.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=yU();if(!LA.D(t))throw new ne(V.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=RA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new LA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class dh{initialize(e,t){var r=this;return(0,W.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>kU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=JJ.bind(null,r.syncEngine),yield rb(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OJ}createDatastore(e){const t=Ng(e.databaseInfo.databaseId),r=new _J(e.databaseInfo);return new EJ(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>kU(this.syncEngine,t,0),a=_U.D()?new _U:new pJ,new TJ(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,u,d,f){const g=new jJ(i,s,o,a,u,d);return f&&(g.Oa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,W.Z)(function*(){var t,r;yield(r=(0,W.Z)(function*(s){const o=he(s);ie("RemoteStore","RemoteStore shutting down."),o.v_.add(5),yield rh(o),o.M_.shutdown(),o.x_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function BU(n,e=10240){let t=0;return{read:()=>(0,W.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,W.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ZE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cX{constructor(e,t){this.Ka=e,this.serializer=t,this.metadata=new sr,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then(r=>{r&&r.ra()?this.metadata.resolve(r.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.na)}`))},r=>this.metadata.reject(r))}close(){return this.Ka.cancel()}getMetadata(){var e=this;return(0,W.Z)(function*(){return e.metadata.promise})()}Ba(){var e=this;return(0,W.Z)(function*(){return yield e.getMetadata(),e.Ua()})()}Ua(){var e=this;return(0,W.Z)(function*(){const t=yield e.Wa();if(null===t)return null;const r=e.$a.decode(t),i=Number(r);isNaN(i)&&e.Ga(`length string (${r}) is not valid number`);const s=yield e.za(i);return new VJ(JSON.parse(s),t.length+i)})()}ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Wa(){var e=this;return(0,W.Z)(function*(){for(;e.ja()<0&&!(yield e.Ha()););if(0===e.buffer.length)return null;const t=e.ja();t<0&&e.Ga("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}za(e){var t=this;return(0,W.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ha())&&t.Ga("Reached the end of bundle when more is expected.");const r=t.$a.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ha(){var e=this;return(0,W.Z)(function*(){const t=yield e.Ka.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class lX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,W.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ne(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,W.Z)(function*(o,a){const u=he(o),d={documents:a.map(y=>Tg(u.serializer,y))},f=yield u.vo("BatchGetDocuments",u.serializer.databaseId,pt.emptyPath(),d,a.length),g=new Map;f.forEach(y=>{const E=function RY(n,e){return"found"in e?function(r,i){Re(!!i.found);const s=ho(r,i.found.name),o=Bn(i.found.updateTime),a=i.found.createTime?Bn(i.found.createTime):Pe.min(),u=new xr({mapValue:{fields:i.found.fields}});return dn.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){Re(!!i.missing),Re(!!i.readTime);const s=ho(r,i.missing),o=Bn(i.readTime);return dn.newNoDocument(s,o)}(n,e):De()}(u.serializer,y);g.set(E.key.toString(),E)});const _=[];return a.forEach(y=>{const E=g.get(y.toString());Re(!!E),_.push(E)}),_}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,W.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=pe.fromPath(i);e.mutations.push(new aA(s,e.precondition(s)))}),yield(r=(0,W.Z)(function*(s,o){const a=he(s),u={writes:o.map(d=>Cg(a.serializer,d))};yield a.So("Commit",a.serializer.databaseId,pt.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw De();t=Pe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ne(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Pe.min())?En.exists(!1):En.updateTime(t):En.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pe.min()))throw new ne(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return En.updateTime(t)}return En.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class dX{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Ja=r.maxAttempts,this.jo=new BA(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){var e=this;this.jo.qo((0,W.Z)(function*(){const t=new lX(e.datastore),r=e.Xa(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.eu(s)}))}).catch(i=>{e.eu(i)})}))}Xa(e){try{const t=this.updateFunction(e);return!og(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!u2(t)}return!1}}class hX{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yr.UNAUTHENTICATED,this.clientId=iL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,W.Z)(function*(a){ie("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ie("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ne(V.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=ah(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function QE(n,e){return jb.apply(this,arguments)}function jb(){return jb=(0,W.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,W.Z)(function*(s){r.isEqual(s)||(yield uU(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),jb.apply(this,arguments)}function $b(n,e){return Hb.apply(this,arguments)}function Hb(){return Hb=(0,W.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield qb(n);ie("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>DU(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>DU(e.remoteStore,i)),n._onlineComponents=e}),Hb.apply(this,arguments)}function jU(n){return"FirebaseError"===n.name?n.code===V.FAILED_PRECONDITION||n.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function qb(n){return zb.apply(this,arguments)}function zb(){return zb=(0,W.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{yield QE(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!jU(t))throw t;Pi("Error using user provided cache. Falling back to memory cache: "+t),yield QE(n,new Og)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),yield QE(n,new Og);return n._offlineComponents}),zb.apply(this,arguments)}function YE(n){return Gb.apply(this,arguments)}function Gb(){return Gb=(0,W.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),yield $b(n,n._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),yield $b(n,new dh))),n._onlineComponents}),Gb.apply(this,arguments)}function $U(n){return qb(n).then(e=>e.persistence)}function hh(n){return qb(n).then(e=>e.localStore)}function HU(n){return YE(n).then(e=>e.remoteStore)}function Wb(n){return YE(n).then(e=>e.syncEngine)}function fh(n){return Kb.apply(this,arguments)}function Kb(){return Kb=(0,W.Z)(function*(n){const e=yield YE(n),t=e.eventManager;return t.onListen=$J.bind(null,e.syncEngine),t.onUnlisten=qJ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HJ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zJ.bind(null,e.syncEngine),t}),Kb.apply(this,arguments)}function zU(n,e,t={}){const r=new sr;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(s,o,a,u,d){const f=new ZE({next:_=>{o.enqueueAndForget(()=>ub(s,g));const y=_.docs.has(a);!y&&_.fromCache?d.reject(new ne(V.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&_.fromCache&&u&&"server"===u.source?d.reject(new ne(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new hb($d(a.path),f,{includeMetadataChanges:!0,ta:!0});return ob(s,g)}(yield fh(n),n.asyncQueue,e,t,r)})),r.promise}function GU(n,e,t={}){const r=new sr;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function(s,o,a,u,d){const f=new ZE({next:_=>{o.enqueueAndForget(()=>ub(s,g)),_.fromCache&&"server"===u.source?d.reject(new ne(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new hb(a,f,{includeMetadataChanges:!0,ta:!0});return ob(s,g)}(yield fh(n),n.asyncQueue,e,t,r)})),r.promise}function WU(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const KU=new Map;function Zb(n,e,t){if(!t)throw new ne(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZU(n,e,t,r){if(!0===e&&!0===r)throw new ne(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QU(n){if(!pe.isDocumentKey(n))throw new ne(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function YU(n){if(pe.isDocumentKey(n))throw new ne(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":De()}function ft(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ne(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=JE(n);throw new ne(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function JU(n,e){if(e<=0)throw new ne(V.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class XU{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ne(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ne(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=WU(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new ne(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ne(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ne(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XU(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new yQ;switch(r.type){case"firstParty":return new wQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=KU.get(t);r&&(ie("ComponentProvider","Removing Datastore"),KU.delete(t),r.terminate())}(this),Promise.resolve()}}class Or{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Or(this.firestore,e,this._query)}}class hn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hn(this.firestore,e,this._key)}}class fo extends Or{constructor(e,t,r){super(e,t,$d(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new pe(e))}withConverter(e){return new fo(this.firestore,e,this._path)}}function tB(n,e,...t){if(n=(0,St.m9)(n),Zb("collection","path",e),n instanceof kg){const r=pt.fromString(e,...t);return YU(r),new fo(n,null,r)}{if(!(n instanceof hn||n instanceof fo))throw new ne(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return YU(r),new fo(n.firestore,null,r)}}function XE(n,e,...t){if(n=(0,St.m9)(n),1===arguments.length&&(e=iL.newId()),Zb("doc","path",e),n instanceof kg){const r=pt.fromString(e,...t);return QU(r),new hn(n,null,new pe(r))}{if(!(n instanceof hn||n instanceof fo))throw new ne(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return QU(r),new hn(n.firestore,n instanceof fo?n.converter:null,new pe(r))}}function nB(n,e){return n=(0,St.m9)(n),e=(0,St.m9)(e),(n instanceof hn||n instanceof fo)&&(e instanceof hn||e instanceof fo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Qb(n,e){return n=(0,St.m9)(n),e=(0,St.m9)(e),n instanceof Or&&e instanceof Or&&n.firestore===e.firestore&&pg(n._query,e._query)&&n.converter===e.converter}class CX{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new BA(this,"async_queue_retry"),this.cu=()=>{const t=zE();t&&ie("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=zE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=zE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const t=new sr;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){var e=this;return(0,W.Z)(function*(){if(0!==e.ru.length){try{yield e.ru[0](),e.ru.shift(),e.jo.reset()}catch(t){if(!au(t))throw t;ie("AsyncQueue","Operation failed with retryable error: "+t)}e.ru.length>0&&e.jo.qo(()=>e.Pu())}})()}hu(e){const t=this.nu.then(()=>(this._u=!0,e().catch(r=>{throw this.ou=r,this._u=!1,Un("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this._u=!1,r))));return this.nu=t,t}enqueueAfterDelay(e,t,r){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const i=sb.createAndSchedule(this,e,t,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&De()}verifyOperationInProgress(){}Tu(){var e=this;return(0,W.Z)(function*(){let t;do{t=e.nu,yield t}while(t!==e.nu)})()}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}function Yb(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class DX{constructor(){this._progressObserver={},this._taskCompletionResolver=new sr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nn extends kg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new CX,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||rB(this),this._firestoreClient.terminate()}}function Nn(n){return n._firestoreClient||rB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function rB(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new JQ(n._databaseId,u,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,WU(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;n._firestoreClient=new hX(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function iB(n,e,t){const r=new sr;return n.asyncQueue.enqueue((0,W.Z)(function*(){try{yield QE(n,t),yield $b(n,e),r.resolve()}catch(i){const s=i;if(!jU(s))throw s;Pi("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function sB(n){if(n._initialized||n._terminated)throw new ne(V.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new po(or.fromBase64String(e))}catch(t){throw new ne(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new po(or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ua{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ne(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jc{constructor(e){this._methodName=e}}class eI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}}const FX=/^__.*__$/;class VX{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new sa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wd(e,this.data,t,this.fieldTransforms)}}class oB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new sa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class tI{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new tI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return iI(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(aB(this.Vu)&&FX.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class LX{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ng(e)}Cu(e,t,r,i=!1){return new tI({Vu:e,methodName:t,Du:r,path:ln.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $c(n){const e=n._freezeSettings(),t=Ng(n._databaseId);return new LX(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nI(n,e,t,r,i,s={}){const o=n.Cu(s.merge||s.mergeFields?2:0,e,t,i);iS("Data must be an object, but it was:",o,r);const a=lB(r,o);let u,d;if(s.merge)u=new Mi(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const g of s.mergeFields){const _=Lg(e,g,t);if(!o.contains(_))throw new ne(V.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);hB(f,_)||f.push(_)}u=new Mi(f),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new VX(new xr(a),u,d)}class Vg extends jc{_toFieldTransform(e){if(2!==e.Vu)throw e.Su(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vg}}function uB(n,e,t){return new tI({Vu:3,Du:e.settings.Du,methodName:n._methodName,gu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Jb extends jc{_toFieldTransform(e){return new yg(e.path,new zd)}isEqual(e){return e instanceof Jb}}class Xb extends jc{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=uB(this,e,!0),r=this.vu.map(s=>Hc(s,t)),i=new Nc(r);return new yg(e.path,i)}isEqual(e){return e instanceof Xb&&(0,St.vZ)(this.vu,e.vu)}}class eS extends jc{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=uB(this,e,!0),r=this.vu.map(s=>Hc(s,t)),i=new xc(r);return new yg(e.path,i)}isEqual(e){return e instanceof eS&&(0,St.vZ)(this.vu,e.vu)}}class tS extends jc{constructor(e,t){super(e),this.Fu=t}_toFieldTransform(e){const t=new Gd(e.serializer,YL(e.serializer,this.Fu));return new yg(e.path,t)}isEqual(e){return e instanceof tS&&this.Fu===e.Fu}}function nS(n,e,t,r){const i=n.Cu(1,e,t);iS("Data must be an object, but it was:",i,r);const s=[],o=xr.empty();uu(r,(u,d)=>{const f=rI(e,u,t);d=(0,St.m9)(d);const g=i.yu(f);if(d instanceof Vg)s.push(f);else{const _=Hc(d,g);null!=_&&(s.push(f),o.set(f,_))}});const a=new Mi(s);return new oB(o,a,i.fieldTransforms)}function rS(n,e,t,r,i,s){const o=n.Cu(1,e,t),a=[Lg(e,r,t)],u=[i];if(s.length%2!=0)throw new ne(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(Lg(e,s[_])),u.push(s[_+1]);const d=[],f=xr.empty();for(let _=a.length-1;_>=0;--_)if(!hB(d,a[_])){const y=a[_];let E=u[_];E=(0,St.m9)(E);const T=o.yu(y);if(E instanceof Vg)d.push(y);else{const A=Hc(E,T);null!=A&&(d.push(y),f.set(y,A))}}const g=new Mi(d);return new oB(f,g,o.fieldTransforms)}function cB(n,e,t,r=!1){return Hc(t,n.Cu(r?4:3,e))}function Hc(n,e){if(dB(n=(0,St.m9)(n)))return iS("Unsupported field value:",e,n),lB(n,e);if(n instanceof jc)return function(r,i){if(!aB(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.gu&&4!==e.Vu)throw e.Su("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Hc(a,i.wu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,St.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return YL(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=vn.fromDate(r);return{timestampValue:Zd(i.serializer,s)}}if(r instanceof vn){const s=new vn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zd(i.serializer,s)}}if(r instanceof eI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof po)return{bytesValue:y2(i.serializer,r._byteString)};if(r instanceof hn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fA(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${JE(r)}`)}(n,e)}function lB(n,e){const t={};return vL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uu(n,(r,i)=>{const s=Hc(i,e.fu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function dB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof vn||n instanceof eI||n instanceof po||n instanceof hn||n instanceof jc)}function iS(n,e,t){if(!dB(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=JE(t);throw e.Su("an object"===r?n+" a custom object":n+" "+r)}var i}function Lg(n,e,t){if((e=(0,St.m9)(e))instanceof ua)return e._internalPath;if("string"==typeof e)return rI(n,e);throw iI("Field path arguments must be of type string or ",n,!1,void 0,t)}const UX=new RegExp("[~\\*/\\[\\]]");function rI(n,e,t){if(e.search(UX)>=0)throw iI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ua(...e.split("."))._internalPath}catch{throw iI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function iI(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ne(V.INVALID_ARGUMENT,a+n+u)}function hB(n,e){return n.some(t=>t.isEqual(e))}class Ug{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new BX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class BX extends Ug{data(){return super.data()}}function sI(n,e){return"string"==typeof e?rI(n,e):e instanceof ua?e._internalPath:e._delegate._internalPath}function fB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ne(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sS{}class Bg extends sS{}function Iu(n,e,...t){let r=[];e instanceof sS&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof ph).length,a=s.filter(u=>u instanceof jg).length;if(o>1||o>0&&a>0)throw new ne(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class jg extends Bg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new jg(e,t,r)}_apply(e){const t=this._parse(e);return _B(e._query,t),new Or(e.firestore,e.converter,sA(e._query,t))}_parse(e){const t=$c(e.firestore);return function(s,o,a,u,d,f,g){let _;if(d.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new ne(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){mB(g,f);const y=[];for(const E of g)y.push(gB(u,s,E));_={arrayValue:{values:y}}}else _=gB(u,s,g)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||mB(g,f),_=cB(a,"where",g,"in"===f||"not-in"===f);return gt.create(d,f,_)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ph extends sS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ph(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:kt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)_B(o,u),o=sA(o,u)}(e._query,t),new Or(e.firestore,e.converter,sA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class oS extends Bg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new oS(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new ne(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ne(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hg(s,o)}(e._query,this._field,this._direction);return new Or(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ra(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class oI extends Bg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new oI(e,t,r)}_apply(e){return new Or(e.firestore,e.converter,DE(e._query,this._limit,this._limitType))}}class aI extends Bg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new aI(e,t,r)}_apply(e){const t=pB(e,this.type,this._docOrFields,this._inclusive);return new Or(e.firestore,e.converter,(s=t,new ra((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class uI extends Bg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new uI(e,t,r)}_apply(e){const t=pB(e,this.type,this._docOrFields,this._inclusive);return new Or(e.firestore,e.converter,(s=t,new ra((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function pB(n,e,t,r){if(t[0]=(0,St.m9)(t[0]),t[0]instanceof Ug)return function(s,o,a,u,d){if(!u)throw new ne(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const g of Hd(s))if(g.field.isKeyField())f.push(Pc(o,u.key));else{const _=u.data.field(g.field);if(yE(_))throw new ne(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const y=g.field.canonicalString();throw new ne(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(_)}return new pu(f,d)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=$c(n.firestore);return function(o,a,u,d,f,g){const _=o.explicitOrderBy;if(f.length>_.length)throw new ne(V.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let E=0;E<f.length;E++){const T=f[E];if(_[E].field.isKeyField()){if("string"!=typeof T)throw new ne(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof T}`);if(!iA(o)&&-1!==T.indexOf("/"))throw new ne(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${T}' contains a slash.`);const A=o.path.child(pt.fromString(T));if(!pe.isDocumentKey(A))throw new ne(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const N=new pe(A);y.push(Pc(a,N))}else{const A=cB(u,d,T);y.push(A)}}return new pu(y,g)}(n._query,n.firestore._databaseId,i,e,t,r)}}function gB(n,e,t){if("string"==typeof(t=(0,St.m9)(t))){if(""===t)throw new ne(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iA(e)&&-1!==t.indexOf("/"))throw new ne(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pt.fromString(t));if(!pe.isDocumentKey(r))throw new ne(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pc(n,new pe(r))}if(t instanceof hn)return Pc(n,t._key);throw new ne(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${JE(t)}.`)}function mB(n,e){if(!Array.isArray(n)||0===n.length)throw new ne(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _B(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ne(V.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class aS{convertValue(e,t="none"){switch(hu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(na(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw De()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return uu(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new eI(Mn(e.latitude),Mn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=vE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ug(e));default:return null}}convertTimestamp(e){const t=cu(e);return new vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pt.fromString(e);Re(R2(r));const i=new lu(r.get(1),r.get(3)),s=new pe(r.popFirst(5));return i.isEqual(t)||Un(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function cI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ZX extends aS{constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,t)}}class qc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ca extends Ug{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $g(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class $g extends ca{data(e={}){return super.data(e)}}class wu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new qc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $g(this._firestore,this._userDataWriter,r.key,r,new qc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new $g(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new $g(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:YX(a.type),doc:u,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function YX(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}function vB(n,e){return n instanceof ca&&e instanceof ca?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof wu&&e instanceof wu&&n._firestore===e._firestore&&Qb(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Tu extends aS{constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,t)}}function EB(n,e,t){n=ft(n,hn);const r=ft(n.firestore,nn),i=cI(n.converter,e,t);return gh(r,[nI($c(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,En.none())])}function IB(n,e,t,...r){n=ft(n,hn);const i=ft(n.firestore,nn),s=$c(i);let o;return o="string"==typeof(e=(0,St.m9)(e))||e instanceof ua?rS(s,"updateDoc",n._key,e,t,r):nS(s,"updateDoc",n._key,e),gh(i,[o.toMutation(n._key,En.exists(!0))])}function wB(n,...e){var t,r,i;n=(0,St.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||Yb(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Yb(e[o])){const g=e[o];e[o]=null===(t=g.next)||void 0===t?void 0:t.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,d,f;if(n instanceof hn)d=ft(n.firestore,nn),f=$d(n._key.path),u={next:g=>{e[o]&&e[o](uS(d,n,g))},error:e[o+1],complete:e[o+2]};else{const g=ft(n,Or);d=ft(g.firestore,nn),f=g._query;const _=new Tu(d);u={next:y=>{e[o]&&e[o](new wu(d,_,g,y))},error:e[o+1],complete:e[o+2]},fB(n._query)}return function(_,y,E,T){const A=new ZE(T),N=new hb(y,A,E);return _.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return ob(yield fh(_),N)})),()=>{A.Qa(),_.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return ub(yield fh(_),N)}))}}(Nn(d),f,a,u)}function gh(n,e){return function(r,i){const s=new sr;return r.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function GJ(n,e,t){return Eb.apply(this,arguments)}(yield Wb(r),i,s)})),s.promise}(Nn(n),e)}function uS(n,e,t){const r=t.docs.get(e._key),i=new Tu(n);return new ca(n,i,e._key,r,new qc(t.hasPendingWrites,t.fromCache),e.converter)}const gee={maxAttempts:5};class TB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$c(e)}set(e,t,r){this._verifyNotCommitted();const i=Cu(e,this._firestore),s=cI(i.converter,t,r),o=nI(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,En.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Cu(e,this._firestore);let o;return o="string"==typeof(t=(0,St.m9)(t))||t instanceof ua?rS(this._dataReader,"WriteBatch.update",s._key,t,r,i):nS(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,En.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cu(e,this._firestore);return this._mutations=this._mutations.concat(new Kd(t._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ne(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cu(n,e){if((n=(0,St.m9)(n)).firestore!==e)throw new ne(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class mee extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=$c(t)}get(t){const r=Cu(t,this._firestore),i=new ZX(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return De();const o=s[0];if(o.isFoundDocument())return new Ug(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Ug(this._firestore,i,r._key,null,r.converter);throw De()})}set(t,r,i){const s=Cu(t,this._firestore),o=cI(s.converter,r,i),a=nI(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Cu(t,this._firestore);let a;return a="string"==typeof(r=(0,St.m9)(r))||r instanceof ua?rS(this._dataReader,"Transaction.update",o._key,r,i,s):nS(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Cu(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Cu(e,this._firestore),r=new Tu(this._firestore);return super.get(e).then(i=>new ca(this._firestore,r,t._key,i._document,new qc(!1,!1),t.converter))}}function lS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bB(){if(typeof Uint8Array>"u")throw new ne("unimplemented","Uint8Arrays are not available in this environment.")}function SB(){if(!function QQ(){return typeof atob<"u"}())throw new ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Od=Cd.SDK_VERSION,(0,Cd._registerComponent)(new VF.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new nn(new EQ(r.getProvider("auth-internal")),new TQ(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ne(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Cd.registerVersion)(tL,"4.5.1",e),(0,Cd.registerVersion)(tL,"4.5.1","esm2017")}();class Hg{constructor(e){this._delegate=e}static fromBase64String(e){return SB(),new Hg(po.fromBase64String(e))}static fromUint8Array(e){return bB(),new Hg(po.fromUint8Array(e))}toBase64(){return SB(),this._delegate.toBase64()}toUint8Array(){return bB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function dS(n){return function Aee(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class bee{enableIndexedDbPersistence(e,t){return function bX(n,e){sB(n=ft(n,nn));const t=Nn(n);if(t._uninitializedComponentsProvider)throw new ne(V.FAILED_PRECONDITION,"SDK cache is already specified.");Pi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new dh;return iB(t,i,new Bb(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function SX(n){sB(n=ft(n,nn));const e=Nn(n);if(e._uninitializedComponentsProvider)throw new ne(V.FAILED_PRECONDITION,"SDK cache is already specified.");Pi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new dh;return iB(e,r,new UU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function RX(n){if(n._initialized&&!n._terminated)throw new ne(V.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new sr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,W.Z)(function*(){try{yield(t=(0,W.Z)(function*(i){if(!hs.D())return Promise.resolve();const s=i+"main";yield hs.delete(s)}),function r(i){return t.apply(this,arguments)})(RA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class RB{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof lu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Pi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function eB(n,e,t,r={}){var i;const s=(n=ft(n,kg))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=yr.MOCK_USER;else{a=(0,St.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ne(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new yr(d)}n._authCredentials=new vQ(new nL(a,u))}}(this._delegate,e,t,r)}enableNetwork(){return function MX(n){return function fX(n){return n.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield $U(n),t=yield HU(n);return e.setNetworkEnabled(!0),function(i){const s=he(i);return s.v_.delete(0),xg(s)}(t)}))}(Nn(n=ft(n,nn)))}(this._delegate)}disableNetwork(){return function NX(n){return function pX(n){return n.asyncQueue.enqueue((0,W.Z)(function*(){const e=yield $U(n),t=yield HU(n);return e.setNetworkEnabled(!1),(r=(0,W.Z)(function*(s){const o=he(s);o.v_.add(0),yield rh(o),o.x_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Nn(n=ft(n,nn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ZU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function PX(n){return function(t){const r=new sr;return t.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return function QJ(n,e){return Db.apply(this,arguments)}(yield Wb(t),r)})),r.promise}(Nn(n=ft(n,nn)))}(this._delegate)}onSnapshotsInSync(e){return function oee(n,e){return function _X(n,e){const t=new ZE(e);return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return i=yield fh(n),s=t,he(i).W_.add(s),void s.next();var i,s})),()=>{t.Qa(),n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return i=yield fh(n),s=t,void he(i).W_.delete(s);var i,s}))}}(Nn(n=ft(n,nn)),Yb(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new mh(this,tB(this._delegate,e))}catch(t){throw fi(t,"collection()","Firestore.collection()")}}doc(e){try{return new fs(this,XE(this._delegate,e))}catch(t){throw fi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new pi(this,function TX(n,e){if(n=ft(n,kg),Zb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ne(V.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Or(n,null,(r=e,new ra(pt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw fi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function _ee(n,e,t){n=ft(n,nn);const r=Object.assign(Object.assign({},gee),t);return function(s){if(s.maxAttempts<1)throw new ne(V.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new sr;return s.asyncQueue.enqueueAndForget((0,W.Z)(function*(){const d=yield function qU(n){return YE(n).then(e=>e.datastore)}(s);new dX(s.asyncQueue,d,a,o,u).Ya()})),u.promise}(Nn(n),i=>e(new mee(n,i)),r)}(this._delegate,t=>e(new PB(this,t)))}batch(){return Nn(this._delegate),new MB(new TB(this._delegate,e=>gh(this._delegate,e)))}loadBundle(e){return function xX(n,e){const t=Nn(n=ft(n,nn)),r=new DX;return function yX(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?l2().encode(o):o,f=function(f,g){if(f instanceof Uint8Array)return BU(f,g);if(f instanceof ArrayBuffer)return BU(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new cX(f,a);var f}(t,Ng(e));n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){!function aX(n,e,t){const r=he(n);var i;(i=(0,W.Z)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(E,T){const A=he(E),N=Bn(T.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",R=>A.$r.getBundleMetadata(R,T.id)).then(R=>!!R&&R.createTime.compareTo(N)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(E=d).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);u._updateProgress(RU(d));const f=new LJ(d,o.localStore,a.serializer);let g=yield a.Ba();for(;g;){const y=yield f.sa(g);y&&u._updateProgress(y),g=yield a.Ba()}const _=yield f.complete();return yield aa(o,_.aa,void 0),yield function(E,T){const A=he(E);return A.persistence.runTransaction("Save bundle","readwrite",N=>A.$r.saveBundleMetadata(N,T))}(o.localStore,d),u._completeWith(_.progress),Promise.resolve(_._a)}catch(d){return Pi("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var E}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Wb(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function OX(n,e){return function vX(n,e){return n.asyncQueue.enqueue((0,W.Z)(function*(){return function(r,i){const s=he(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield hh(n),e)}))}(Nn(n=ft(n,nn)),e).then(t=>t?new Or(n,null,t.query):null)}(this._delegate,e).then(t=>t?new pi(this,t):null)}}class dI extends aS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hg(new po(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fs.forKey(t,this.firestore,null)}}class PB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new dI(e)}get(e){const t=Gc(e);return this._delegate.get(t).then(r=>new qg(this._firestore,new ca(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Gc(e);return r?(lS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Gc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Gc(e);return this._delegate.delete(t),this}}class MB{constructor(e){this._delegate=e}set(e,t,r){const i=Gc(e);return r?(lS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Gc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Gc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new $g(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zg(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=zc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new zc(e,new dI(e),t),i.set(t,s)),s}}zc.INSTANCES=new WeakMap;class fs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fs(t,new hn(t._delegate,r,new pe(e)))}static forKey(e,t,r){return new fs(t,new hn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new mh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new mh(this.firestore,tB(this._delegate,e))}catch(t){throw fi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,St.m9)(e))instanceof hn&&nB(this._delegate,e)}set(e,t){t=lS("DocumentReference.set",t);try{return t?EB(this._delegate,e,t):EB(this._delegate,e)}catch(r){throw fi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?IB(this._delegate,e):IB(this._delegate,e,t,...r)}catch(i){throw fi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function iee(n){return gh(ft(n.firestore,nn),[new Kd(n._key,En.none())])}(this._delegate)}onSnapshot(...e){const t=NB(e),r=xB(e,i=>new qg(this.firestore,new ca(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return wB(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function XX(n){n=ft(n,hn);const e=ft(n.firestore,nn),t=Nn(e),r=new Tu(e);return function gX(n,e){const t=new sr;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(s,o,a){try{const u=yield function(f,g){const _=he(f);return _.persistence.runTransaction("read document","readonly",y=>_.localDocuments.getDocument(y,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ne(V.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=ah(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield hh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ca(e,r,n._key,i,new qc(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function eee(n){n=ft(n,hn);const e=ft(n.firestore,nn);return zU(Nn(e),n._key,{source:"server"}).then(t=>uS(e,n,t))}(this._delegate):function JX(n){n=ft(n,hn);const e=ft(n.firestore,nn);return zU(Nn(e),n._key).then(t=>uS(e,n,t))}(this._delegate),t.then(r=>new qg(this.firestore,new ca(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new fs(this.firestore,this._delegate.withConverter(e?zc.getInstance(this.firestore,e):null))}}function fi(n,e,t){return n.message=n.message.replace(e,t),n}function NB(n){for(const e of n)if("object"==typeof e&&!dS(e))return e;return{}}function xB(n,e){var t,r;let i;return i=dS(n[0])?n[0]:dS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class qg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return vB(this._delegate,e._delegate)}}class zg extends qg{data(e){const t=this._delegate.data(e);return this._delegate._converter||function _Q(n,e){n||De()}(void 0!==t),t}}class pi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dI(e)}where(e,t,r){try{return new pi(this.firestore,Iu(this._delegate,function jX(n,e,t){const r=e,i=sI("where",n);return jg._create(i,r,t)}(e,t,r)))}catch(i){throw fi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new pi(this.firestore,Iu(this._delegate,function $X(n,e="asc"){const t=e,r=sI("orderBy",n);return oS._create(r,t)}(e,t)))}catch(r){throw fi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new pi(this.firestore,Iu(this._delegate,function HX(n){return JU("limit",n),oI._create("limit",n,"F")}(e)))}catch(t){throw fi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new pi(this.firestore,Iu(this._delegate,function qX(n){return JU("limitToLast",n),oI._create("limitToLast",n,"L")}(e)))}catch(t){throw fi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new pi(this.firestore,Iu(this._delegate,function zX(...n){return aI._create("startAt",n,!0)}(...e)))}catch(t){throw fi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new pi(this.firestore,Iu(this._delegate,function GX(...n){return aI._create("startAfter",n,!1)}(...e)))}catch(t){throw fi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new pi(this.firestore,Iu(this._delegate,function WX(...n){return uI._create("endBefore",n,!1)}(...e)))}catch(t){throw fi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new pi(this.firestore,Iu(this._delegate,function KX(...n){return uI._create("endAt",n,!0)}(...e)))}catch(t){throw fi(t,"endAt()","Query.endAt()")}}isEqual(e){return Qb(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function nee(n){n=ft(n,Or);const e=ft(n.firestore,nn),t=Nn(e),r=new Tu(e);return function mX(n,e){const t=new sr;return n.asyncQueue.enqueueAndForget((0,W.Z)(function*(){return(r=(0,W.Z)(function*(s,o,a){try{const u=yield jE(s,o,!0),d=new NU(o,u.hs),f=d.Ta(u.documents),g=d.applyChanges(f,!1);a.resolve(g.snapshot)}catch(u){const d=ah(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield hh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new wu(e,r,n,i))}(this._delegate):"server"===e?.source?function ree(n){n=ft(n,Or);const e=ft(n.firestore,nn),t=Nn(e),r=new Tu(e);return GU(t,n._query,{source:"server"}).then(i=>new wu(e,r,n,i))}(this._delegate):function tee(n){n=ft(n,Or);const e=ft(n.firestore,nn),t=Nn(e),r=new Tu(e);return fB(n._query),GU(t,n._query).then(i=>new wu(e,r,n,i))}(this._delegate),t.then(r=>new hS(this.firestore,new wu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=NB(e),r=xB(e,i=>new hS(this.firestore,new wu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return wB(this._delegate,t,r)}withConverter(e){return new pi(this.firestore,this._delegate.withConverter(e?zc.getInstance(this.firestore,e):null))}}class Ree{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new zg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class hS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new pi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new zg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ree(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new zg(this._firestore,r))})}isEqual(e){return vB(this._delegate,e._delegate)}}class mh extends pi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fs(this.firestore,e):null}doc(e){try{return new fs(this.firestore,void 0===e?XE(this._delegate):XE(this._delegate,e))}catch(t){throw fi(t,"doc()","CollectionReference.doc()")}}add(e){return function see(n,e){const t=ft(n.firestore,nn),r=XE(n),i=cI(n.converter,e);return gh(t,[nI($c(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,En.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new fs(this.firestore,t))}isEqual(e){return nB(this._delegate,e._delegate)}withConverter(e){return new mh(this.firestore,this._delegate.withConverter(e?zc.getInstance(this.firestore,e):null))}}function Gc(n){return ft(n,hn)}class fS{constructor(...e){this._delegate=new ua(...e)}static documentId(){return new fS(ln.keyField().canonicalString())}isEqual(e){return(e=(0,St.m9)(e))instanceof ua&&this._delegate._internalPath.isEqual(e._internalPath)}}class Wc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function vee(){return new Jb("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Wc(e)}static delete(){const e=function yee(){return new Vg("deleteField")}();return e._methodName="FieldValue.delete",new Wc(e)}static arrayUnion(...e){const t=function Eee(...n){return new Xb("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Wc(t)}static arrayRemove(...e){const t=function Iee(...n){return new eS("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Wc(t)}static increment(e){const t=function wee(n){return new tS("increment",n)}(e);return t._methodName="FieldValue.increment",new Wc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Pee={Firestore:RB,GeoPoint:eI,Timestamp:vn,Blob:Hg,Transaction:PB,WriteBatch:MB,DocumentReference:fs,DocumentSnapshot:qg,Query:pi,QueryDocumentSnapshot:zg,QuerySnapshot:hS,CollectionReference:mh,FieldPath:fS,FieldValue:Wc,setLogLevel:function See(n){!function mQ(n){su.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function OB(n,e){return function xee(n,e=EF){return new dt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function pS(n,e){return OB(n,e).pipe(Ae(t=>({payload:t,type:"query"})))}!function Nee(n){(function Mee(n,e){n.INTERNAL.registerComponent(new VF.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Pee)))})(n,(e,t)=>new RB(e,t,new bee)),n.registerVersion("@firebase/firestore-compat","0.3.28")}(Xo.Z);class kB{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=jB(r,t);return new LB(i,s,this.afs)}snapshotChanges(){return function Oee(n,e){return OB(n,e).pipe(jv(void 0),n0(),Ae(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Gi)}valueChanges(e={}){return this.snapshotChanges().pipe(Ae(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return S(this.ref.get(e)).pipe(Gi)}}function hI(n,e){return pS(n,e).pipe(jv(void 0),n0(),Ae(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(g=>g.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function FB(n,e,t){return hI(n,t).pipe($v((r,i)=>function kee(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Fee(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return gS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return gS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return gS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),xn(),Ae(r=>r.map(i=>({type:i.type,payload:i}))))}function gS(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function VB(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class LB{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=hI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Ae(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(jv(void 0),n0(),Vs(([r,i])=>i.length>0||!r),Ae(([,r])=>r),Gi)}auditTrail(e){return this.stateChanges(e).pipe($v((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=VB(e);return FB(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gi)}valueChanges(e={}){return pS(this.query,this.afs.schedulers.outsideAngular).pipe(Ae(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Gi)}get(e){return S(this.query.get(e)).pipe(Gi)}add(e){return this.ref.add(e)}doc(e){return new kB(this.ref.doc(e),this.afs)}}class Vee{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?hI(this.query,this.afs.schedulers.outsideAngular).pipe(Ae(t=>t.filter(r=>e.indexOf(r.type)>-1)),Vs(t=>t.length>0),Gi):hI(this.query,this.afs.schedulers.outsideAngular).pipe(Gi)}auditTrail(e){return this.stateChanges(e).pipe($v((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=VB(e);return FB(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gi)}valueChanges(e={}){return pS(this.query,this.afs.schedulers.outsideAngular).pipe(Ae(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Gi)}get(e){return S(this.query.get(e)).pipe(Gi)}}const UB=new fe("angularfire2.enableFirestorePersistence"),BB=new fe("angularfire2.firestore.persistenceSettings"),Lee=new fe("angularfire2.firestore.settings"),Uee=new fe("angularfire2.firestore.use-emulator");function jB(n,e=(t=>t)){return{query:e(n),ref:n}}let Gg=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,d,f,g,_,y,E,T,A,N,R){this.schedulers=u;const k=XD(t,a,r),K=f;g&&FF(k,a,_,E,T,A,y,N),[this.firestore,this.persistenceEnabled$]=DF(`${k.name}.firestore`,"AngularFirestore",k.name,()=>{const ce=a.runOutsideAngular(()=>k.firestore());if(s&&ce.settings(s),K&&ce.useEmulator(...K),i&&!rv(o)){const Me=()=>{try{return S(ce.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(ze){return typeof console<"u"&&console.warn(ze),H(!1)}};return[ce,a.runOutsideAngular(Me)]}return[ce,H(!1)]},[s,K,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=jB(i,r),a=this.schedulers.ngZone.run(()=>s);return new LB(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new Vee(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new kB(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(ee(Vv),ee(Lv,8),ee(UB,8),ee(Lee,8),ee(Vo),ee(yt),ee(TF),ee(BB,8),ee(Uee,8),ee(e0,8),ee(PF,8),ee(MF,8),ee(NF,8),ee(xF,8),ee(OF,8),ee(kF,8),ee(IF,8))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Bee=(()=>{class n{constructor(){Xo.Z.registerVersion("angularfire",JD.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:UB,useValue:!0},{provide:BB,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dr({type:n});static \u0275inj=Cr({providers:[Gg]})}return n})();function mS(...n){const e=ys(n),t=Hn(n),{args:r,keys:i}=AO(n);if(0===r.length)return S([],e);const s=new dt(function $ee(n,e,t=Wt){return r=>{$B(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)$B(e,()=>{const d=S(n[u],e);let f=!1;d.subscribe(oe(r,g=>{s[u]=g,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>SO(i,o):Wt));return t?s.pipe(bO(t)):s}function $B(n,e,t){n?ur(t,n,e):e()}function HB(n){return new dt(e=>{An(n()).subscribe(e)})}function Wg(n,e){const t=w(n)?n:()=>n,r=i=>i.error(t());return new dt(e?i=>e.schedule(r,0,i):r)}function _S(){return j((n,e)=>{let t=null;n._refCount++;const r=oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class qB extends dt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ue(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mt;const t=this.getSubject();e.add(this.source.subscribe(oe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mt.EMPTY)}return e}refCount(){return _S()(this)}}function Kg(n,e){return w(e)?Kt(n,e,1):Kt(n,1)}function Kc(n){return j((e,t)=>{let s,r=null,i=!1;r=e.subscribe(oe(t,void 0,void 0,o=>{s=An(n(o,Kc(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function yS(n){return n<=0?()=>$n:j((e,t)=>{let r=[];e.subscribe(oe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function vS(n){return j((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const tt="primary",Zg=Symbol("RouteTitle");class Gee{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function _h(n){return new Gee(n)}function Wee(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function go(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!zB(n[i],e[i]))return!1;return!0}function zB(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function GB(n){return n.length>0?n[n.length-1]:null}function Du(n){return function jee(n){return!!n&&(n instanceof dt||w(n.lift)&&w(n.subscribe))}(n)?n:op(n)?S(Promise.resolve(n)):H(n)}const Zee={exact:function ZB(n,e,t){if(!Zc(n.segments,e.segments)||!fI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ZB(n.children[r],e.children[r],t))return!1;return!0},subset:QB},WB={exact:function Qee(n,e){return go(n,e)},subset:function Yee(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zB(n[t],e[t]))},ignored:()=>!0};function KB(n,e,t){return Zee[t.paths](n.root,e.root,t.matrixParams)&&WB[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function QB(n,e,t){return YB(n,e,e.segments,t)}function YB(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Zc(i,t)||e.hasChildren()||!fI(i,t,r))}if(n.segments.length===t.length){if(!Zc(n.segments,t)||!fI(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!QB(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Zc(n.segments,i)&&fI(n.segments,i,r)&&n.children[tt])&&YB(n.children[tt],e,s,r)}}function fI(n,e,t){return e.every((r,i)=>WB[t](n[i].parameters,r.parameters))}class yh{constructor(e=new Ft([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_h(this.queryParams)),this._queryParamMap}toString(){return ete.serialize(this)}}class Ft{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pI(this)}}class Qg{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=_h(this.parameters)),this._parameterMap}toString(){return ej(this)}}function Zc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Yg=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:function(){return new ES},providedIn:"root"})}return n})();class ES{parse(e){const t=new dte(e);return new yh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Jg(e.root,!0)}`,r=function rte(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${gI(t)}=${gI(i)}`).join("&"):`${gI(t)}=${gI(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function tte(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const ete=new ES;function pI(n){return n.segments.map(e=>ej(e)).join("/")}function Jg(n,e){if(!n.hasChildren())return pI(n);if(e){const t=n.children[tt]?Jg(n.children[tt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==tt&&r.push(`${i}:${Jg(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Xee(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===tt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==tt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===tt?[Jg(n.children[tt],!1)]:[`${i}:${Jg(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[tt]?`${pI(n)}/${t[0]}`:`${pI(n)}/(${t.join("//")})`}}function JB(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gI(n){return JB(n).replace(/%3B/gi,";")}function IS(n){return JB(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mI(n){return decodeURIComponent(n)}function XB(n){return mI(n.replace(/\+/g,"%20"))}function ej(n){return`${IS(n.path)}${function nte(n){return Object.keys(n).map(e=>`;${IS(e)}=${IS(n[e])}`).join("")}(n.parameters)}`}const ite=/^[^\/()?;#]+/;function wS(n){const e=n.match(ite);return e?e[0]:""}const ste=/^[^\/()?;=#]+/,ate=/^[^=?&#]+/,cte=/^[^&#]+/;class dte{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ft([],{}):new Ft([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[tt]=new Ft(e,t)),r}parseSegment(){const e=wS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new I(4009,!1);return this.capture(e),new Qg(mI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function ote(n){const e=n.match(ste);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=wS(this.remaining);i&&(r=i,this.capture(r))}e[mI(t)]=mI(r)}parseQueryParam(e){const t=function ute(n){const e=n.match(ate);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function lte(n){const e=n.match(cte);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=XB(t),s=XB(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=wS(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new I(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=tt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[tt]:new Ft([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new I(4011,!1)}}function tj(n){return n.segments.length>0?new Ft([],{[tt]:n}):n}function nj(n){const e={};for(const r of Object.keys(n.children)){const s=nj(n.children[r]);if(r===tt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function hte(n){if(1===n.numberOfChildren&&n.children[tt]){const e=n.children[tt];return new Ft(n.segments.concat(e.segments),e.children)}return n}(new Ft(n.segments,e))}function Qc(n){return n instanceof yh}function rj(n){let e;const i=tj(function t(s){const o={};for(const u of s.children){const d=t(u);o[u.outlet]=d}const a=new Ft(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function ij(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return TS(i,i,i,t,r);const s=function pte(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new oj(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new oj(t,e,r)}(e);if(s.toRoot())return TS(i,i,new Ft([],{}),t,r);const o=function gte(n,e,t){if(n.isAbsolute)return new yI(e,!0,0);if(!t)return new yI(e,!1,NaN);if(null===t.parent)return new yI(t,!0,0);const r=_I(n.commands[0])?0:1;return function mte(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new I(4005,!1);i=r.segments.length}return new yI(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?em(o.segmentGroup,o.index,s.commands):aj(o.segmentGroup,o.index,s.commands);return TS(i,o.segmentGroup,a,t,r)}function _I(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Xg(n){return"object"==typeof n&&null!=n&&n.outlets}function TS(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`}),o=n===e?t:sj(n,e,t);const a=tj(nj(o));return new yh(a,s,i)}function sj(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:sj(s,e,t)}),new Ft(n.segments,r)}class oj{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&_I(r[0]))throw new I(4003,!1);const i=r.find(Xg);if(i&&i!==GB(r))throw new I(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yI{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function aj(n,e,t){if(n||(n=new Ft([],{})),0===n.segments.length&&n.hasChildren())return em(n,e,t);const r=function yte(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Xg(a))break;const u=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!cj(u,d,o))return s;r+=2}else{if(!cj(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Ft(n.segments.slice(0,r.pathIndex),{});return s.children[tt]=new Ft(n.segments.slice(r.pathIndex),n.children),em(s,0,i)}return r.match&&0===i.length?new Ft(n.segments,{}):r.match&&!n.hasChildren()?CS(n,e,t):r.match?em(n,0,i):CS(n,e,t)}function em(n,e,t){if(0===t.length)return new Ft(n.segments,{});{const r=function _te(n){return Xg(n[0])?n[0].outlets:{[tt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==tt)&&n.children[tt]&&1===n.numberOfChildren&&0===n.children[tt].segments.length){const s=em(n.children[tt],e,t);return new Ft(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=aj(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Ft(n.segments,i)}}function CS(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Xg(s)){const u=vte(s.outlets);return new Ft(r,u)}if(0===i&&_I(t[0])){r.push(new Qg(n.segments[e].path,uj(t[0]))),i++;continue}const o=Xg(s)?s.outlets[tt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&_I(a)?(r.push(new Qg(o,uj(a))),i+=2):(r.push(new Qg(o,{})),i++)}return new Ft(r,{})}function vte(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=CS(new Ft([],{}),0,r))}),e}function uj(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function cj(n,e,t){return n==t.path&&go(e,t.parameters)}const tm="imperative";class mo{constructor(e,t){this.id=e,this.url=t}}class vI extends mo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Au extends mo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nm extends mo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vh extends mo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class EI extends mo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class lj extends mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ete extends mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ite extends mo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wte extends mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tte extends mo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cte{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Dte{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ate{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bte{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ste{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rte{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dj{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class DS{}class AS{constructor(e){this.url=e}}class Pte{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new rm,this.attachRef=null}}let rm=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Pte,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class hj{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=bS(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=bS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=SS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return SS(e,this._root).map(t=>t.value)}}function bS(n,e){if(n===e.value)return e;for(const t of e.children){const r=bS(n,t);if(r)return r}return null}function SS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=SS(n,t);if(r.length)return r.unshift(e),r}return[]}class la{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Eh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class fj extends hj{constructor(e,t){super(e),this.snapshot=t,RS(this,e)}toString(){return this.snapshot.toString()}}function pj(n,e){const t=function Mte(n,e){const o=new II([],{},{},"",{},tt,e,null,{});return new mj("",new la(o,[]))}(0,e),r=new M([new Qg("",{})]),i=new M({}),s=new M({}),o=new M({}),a=new M(""),u=new bu(r,i,o,a,s,tt,e,t.root);return u.snapshot=t.root,new fj(new la(u,[]),t)}class bu{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Ae(d=>d[Zg]))??H(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ae(e=>_h(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ae(e=>_h(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gj(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Nte(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class II{get title(){return this.data?.[Zg]}constructor(e,t,r,i,s,o,a,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_h(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_h(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mj extends hj{constructor(e,t){super(t),this.url=e,RS(this,t)}toString(){return _j(this._root)}}function RS(n,e){e.value._routerState=n,e.children.forEach(t=>RS(n,t))}function _j(n){const e=n.children.length>0?` { ${n.children.map(_j).join(", ")} } `:"";return`${n.value}${e}`}function PS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,go(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),go(e.params,t.params)||n.paramsSubject.next(t.params),function Kee(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!go(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),go(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function MS(n,e){const t=go(n.params,e.params)&&function Jee(n,e){return Zc(n,e)&&n.every((t,r)=>go(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||MS(n.parent,e.parent))}let NS=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=tt,this.activateEvents=new Sn,this.deactivateEvents=new Sn,this.attachEvents=new Sn,this.detachEvents=new Sn,this.parentContexts=Ee(rm),this.location=Ee(xs),this.changeDetector=Ee(jy),this.environmentInjector=Ee(os),this.inputBinder=Ee(wI,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new I(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new xte(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=je({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ii]})}return n})();class xte{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===bu?this.route:e===rm?this.childContexts:this.parent.get(e,t)}}const wI=new fe("");let yj=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=mS([r.queryParams,r.params,r.data]).pipe(Ge(([s,o,a],u)=>(a={...s,...o,...a},0===u?H(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function z9(n){const e=at(n);if(!e)return null;const t=new Xf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac})}return n})();function im(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function kte(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return im(n,r,i);return im(n,r)})}(n,e,t);return new la(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>im(n,a)),o}}const r=function Fte(n){return new bu(new M(n.url),new M(n.params),new M(n.queryParams),new M(n.fragment),new M(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>im(n,s));return new la(r,i)}}const xS="ngNavigationCancelingError";function vj(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Qc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Ej(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Ej(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[xS]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Ij(n){return n&&n[xS]}let wj=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=wn({type:n,selectors:[["ng-component"]],standalone:!0,features:[Oy],decls:1,vars:0,template:function(r,i){1&r&&Pt(0,"router-outlet")},dependencies:[NS],encapsulation:2})}return n})();function OS(n){const e=n.children&&n.children.map(OS),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==tt&&(t.component=wj),t}function Bs(n){return n.outlet||tt}function sm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class qte{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),PS(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Eh(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Eh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Eh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Eh(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Rte(s.value.snapshot))}),e.children.length&&this.forwardEvent(new bte(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(PS(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),PS(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=sm(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class Tj{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class TI{constructor(e,t){this.component=e,this.route=t}}function zte(n,e,t){const r=n._root;return om(r,e?e._root:null,t,[r.value])}function Ih(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function VI(n){return null!==ya(n)}(n)?e.get(n):n:r}function om(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Eh(e);return n.children.forEach(o=>{(function Wte(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function Kte(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Zc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Zc(n.url,e.url)||!go(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!MS(n,e)||!go(n.queryParams,e.queryParams);default:return!MS(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Tj(r)):(s.data=o.data,s._resolvedData=o._resolvedData),om(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new TI(a.outlet.component,o))}else o&&am(e,a,i),i.canActivateChecks.push(new Tj(r)),om(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>am(a,t.getContext(o),i)),i}function am(n,e,t){const r=Eh(n),i=n.value;Object.entries(r).forEach(([s,o])=>{am(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new TI(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function um(n){return"function"==typeof n}function Cj(n){return n instanceof Uv||"EmptyError"===n?.name}const CI=Symbol("INITIAL_VALUE");function wh(){return Ge(n=>mS(n.map(e=>e.pipe(tu(1),jv(CI)))).pipe(Ae(e=>{for(const t of e)if(!0!==t){if(t===CI)return CI;if(!1===t||t instanceof yh)return t}return!0}),Vs(e=>e!==CI),tu(1)))}function Dj(n){return function ti(...n){return mi(n)}(Rr(e=>{if(Qc(e))throw vj(0,e)}),Ae(e=>!0===e))}class DI{constructor(e){this.segmentGroup=e||null}}class Aj{constructor(e){this.urlTree=e}}function Th(n){return Wg(new DI(n))}function bj(n){return Wg(new Aj(n))}class pne{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new I(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return H(r);if(i.numberOfChildren>1||!i.children[tt])return Wg(new I(4e3,!1));i=i.children[tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new yh(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Ft(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new I(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const kS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gne(n,e,t,r,i){const s=FS(n,e,t);return s.matched?(r=function Lte(n,e){return n.providers&&!n._injector&&(n._injector=rC(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function dne(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?H(i.map(o=>{const a=Ih(o,n);return Du(function ene(n){return n&&um(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(wh(),Dj()):H(!0)}(r,e,t).pipe(Ae(o=>!0===o?s:{...kS}))):H(s)}function FS(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...kS}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Wee)(t,n,e);if(!i)return{...kS};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Sj(n,e,t,r){return t.length>0&&function yne(n,e,t){return t.some(r=>AI(n,e,r)&&Bs(r)!==tt)}(n,t,r)?{segmentGroup:new Ft(e,_ne(r,new Ft(t,n.children))),slicedSegments:[]}:0===t.length&&function vne(n,e,t){return t.some(r=>AI(n,e,r))}(n,t,r)?{segmentGroup:new Ft(n.segments,mne(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ft(n.segments,n.children),slicedSegments:t}}function mne(n,e,t,r,i){const s={};for(const o of r)if(AI(n,t,o)&&!i[Bs(o)]){const a=new Ft([],{});s[Bs(o)]=a}return{...i,...s}}function _ne(n,e){const t={};t[tt]=e;for(const r of n)if(""===r.path&&Bs(r)!==tt){const i=new Ft([],{});t[Bs(r)]=i}return t}function AI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Tne{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new pne(this.urlSerializer,this.urlTree)}noMatchError(e){return new I(4002,!1)}recognize(){const e=Sj(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,tt).pipe(Kc(t=>{if(t instanceof Aj)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof DI?this.noMatchError(t):t}),Ae(t=>{const r=new II([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},tt,this.rootComponentType,null,{}),i=new la(r,t),s=new mj("",i),o=function fte(n,e,t=null,r=null){return ij(rj(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,tt).pipe(Kc(r=>{throw r instanceof DI?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=gj(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return S(i).pipe(Kg(s=>{const o=r.children[s],a=function $te(n,e){const t=n.filter(r=>Bs(r)===e);return t.push(...n.filter(r=>Bs(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),$v((s,o)=>(s.push(...o),s)),Bv(null),function Hee(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Vs((i,s)=>n(i,s,r)):Wt,yS(1),t?Bv(e):SF(()=>new Uv))}(),Kt(s=>{if(null===s)return Th(r);const o=Rj(s);return function Cne(n){n.sort((e,t)=>e.value.outlet===tt?-1:t.value.outlet===tt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),H(o)}))}processSegment(e,t,r,i,s,o){return S(t).pipe(Kg(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Kc(u=>{if(u instanceof DI)return H(null);throw u}))),nu(a=>!!a),Kc(a=>{if(Cj(a))return function Ine(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?H([]):Th(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function Ene(n,e,t,r){return!!(Bs(n)===r||r!==tt&&AI(e,t,n))&&("**"===n.path||FS(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Th(i):Th(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?bj(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Kt(o=>{const a=new Ft(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:f}=FS(t,i,s);if(!a)return Th(t);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f);return i.redirectTo.startsWith("/")?bj(g):this.applyRedirects.lineralizeSegments(i,g).pipe(Kt(_=>this.processSegment(e,r,t,_.concat(d),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?GB(i).parameters:{};a=H({snapshot:new II(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pj(r),Bs(r),r.component??r._loadedComponent??null,r,Mj(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=gne(t,r,i,e).pipe(Ae(({matched:u,consumedSegments:d,remainingSegments:f,parameters:g})=>u?{snapshot:new II(d,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pj(r),Bs(r),r.component??r._loadedComponent??null,r,Mj(r)),consumedSegments:d,remainingSegments:f}:null));return a.pipe(Ge(u=>null===u?Th(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Ge(({routes:d})=>{const f=r._loadedInjector??e,{snapshot:g,consumedSegments:_,remainingSegments:y}=u,{segmentGroup:E,slicedSegments:T}=Sj(t,_,y,d);if(0===T.length&&E.hasChildren())return this.processChildren(f,d,E).pipe(Ae(N=>null===N?null:[new la(g,N)]));if(0===d.length&&0===T.length)return H([new la(g,[])]);const A=Bs(r)===s;return this.processSegment(f,d,E,T,A?tt:s,!0).pipe(Ae(N=>[new la(g,N)]))}))))}getChildConfig(e,t,r){return t.children?H({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?H({routes:t._loadedRoutes,injector:t._loadedInjector}):function lne(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?H(!0):H(i.map(o=>{const a=Ih(o,n);return Du(function Qte(n){return n&&um(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(wh(),Dj())}(e,t,r).pipe(Kt(i=>i?this.configLoader.loadChildren(e,t).pipe(Rr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function fne(n){return Wg(Ej(!1,3))}())):H({routes:[],injector:e})}}function Dne(n){const e=n.value.routeConfig;return e&&""===e.path}function Rj(n){const e=[],t=new Set;for(const r of n){if(!Dne(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Rj(r.children);e.push(new la(r.value,i))}return e.filter(r=>!t.has(r))}function Pj(n){return n.data||{}}function Mj(n){return n.resolve||{}}function Nj(n){return"string"==typeof n.title||null===n.title}function VS(n){return Ge(e=>{const t=n(e);return t?S(t).pipe(Ae(()=>e)):H(e)})}const Ch=new fe("ROUTES");let LS=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ee(n1)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return H(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Du(t.loadComponent()).pipe(Ae(xj),Rr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),vS(()=>{this.componentLoaders.delete(t)})),i=new qB(r,()=>new L).pipe(_S());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return H({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function Nne(n,e,t,r){return Du(n.loadChildren()).pipe(Ae(xj),Kt(i=>i instanceof ox||Array.isArray(i)?H(i):S(e.compileModuleAsync(i))),Ae(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Ch,[],{optional:!0,self:!0}).flat()),{routes:o.map(OS),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(vS(()=>{this.childrenLoaders.delete(r)})),o=new qB(s,()=>new L).pipe(_S());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xj(n){return function xne(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let bI=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new L,this.transitionAbortSubject=new L,this.configLoader=Ee(LS),this.environmentInjector=Ee(os),this.urlSerializer=Ee(Yg),this.rootContexts=Ee(rm),this.inputBindingEnabled=null!==Ee(wI,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>H(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Dte(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Cte(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new M({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:tm,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Vs(s=>0!==s.id),Ae(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Ge(s=>{this.currentTransition=s;let o=!1,a=!1;return H(s).pipe(Rr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ge(u=>{const d=u.currentBrowserUrl.toString(),f=!t.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!f&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const _="";return this.events.next(new vh(u.id,this.urlSerializer.serialize(u.rawUrl),_,0)),u.resolve(null),$n}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return H(u).pipe(Ge(_=>{const y=this.transitions?.getValue();return this.events.next(new vI(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),y!==this.transitions?.getValue()?$n:Promise.resolve(_)}),function Ane(n,e,t,r,i,s){return Kt(o=>function wne(n,e,t,r,i,s,o="emptyOnly"){return new Tne(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Ae(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Rr(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const y=new lj(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(y)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:_,extractedUrl:y,source:E,restoredState:T,extras:A}=u,N=new vI(_,this.urlSerializer.serialize(y),E,T);this.events.next(N);const R=pj(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:R,urlAfterRedirects:y,extras:{...A,skipLocationChange:!1,replaceUrl:!1}},H(s)}{const _="";return this.events.next(new vh(u.id,this.urlSerializer.serialize(u.extractedUrl),_,1)),u.resolve(null),$n}}),Rr(u=>{const d=new Ete(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Ae(u=>(this.currentTransition=s={...u,guards:zte(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function nne(n,e){return Kt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?H({...t,guardsResult:!0}):function rne(n,e,t,r){return S(n).pipe(Kt(i=>function cne(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?H(s.map(a=>{const u=sm(e)??i,d=Ih(a,u);return Du(function Xte(n){return n&&um(n.canDeactivate)}(d)?d.canDeactivate(n,e,t,r):u.runInContext(()=>d(n,e,t,r))).pipe(nu())})).pipe(wh()):H(!0)}(i.component,i.route,t,e,r)),nu(i=>!0!==i,!0))}(o,r,i,n).pipe(Kt(a=>a&&function Zte(n){return"boolean"==typeof n}(a)?function ine(n,e,t,r){return S(e).pipe(Kg(i=>t0(function one(n,e){return null!==n&&e&&e(new Ate(n)),H(!0)}(i.route.parent,r),function sne(n,e){return null!==n&&e&&e(new Ste(n)),H(!0)}(i.route,r),function une(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Gte(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>HB(()=>H(o.guards.map(u=>{const d=sm(o.node)??t,f=Ih(u,d);return Du(function Jte(n){return n&&um(n.canActivateChild)}(f)?f.canActivateChild(r,n):d.runInContext(()=>f(r,n))).pipe(nu())})).pipe(wh())));return H(s).pipe(wh())}(n,i.path,t),function ane(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return H(!0);const i=r.map(s=>HB(()=>{const o=sm(e)??t,a=Ih(s,o);return Du(function Yte(n){return n&&um(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(nu())}));return H(i).pipe(wh())}(n,i.route,t))),nu(i=>!0!==i,!0))}(r,s,n,e):H(a)),Ae(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Rr(u=>{if(s.guardsResult=u.guardsResult,Qc(u.guardsResult))throw vj(0,u.guardsResult);const d=new Ite(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),Vs(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),VS(u=>{if(u.guards.canActivateChecks.length)return H(u).pipe(Rr(d=>{const f=new wte(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Ge(d=>{let f=!1;return H(d).pipe(function bne(n,e){return Kt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return H(t);let s=0;return S(i).pipe(Kg(o=>function Sne(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!Nj(i)&&(s[Zg]=i.title),function Rne(n,e,t,r){const i=function Pne(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return H({});const s={};return S(i).pipe(Kt(o=>function Mne(n,e,t,r){const i=sm(e)??r,s=Ih(n,i);return Du(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(nu(),Rr(a=>{s[o]=a}))),yS(1),function qee(n){return Ae(()=>n)}(s),Kc(o=>Cj(o)?$n:Wg(o)))}(s,n,e,r).pipe(Ae(o=>(n._resolvedData=o,n.data=gj(n,t).resolve,i&&Nj(i)&&(n.data[Zg]=i.title),null)))}(o.route,r,n,e)),Rr(()=>s++),yS(1),Kt(o=>s===i.length?H(t):$n))})}(t.paramsInheritanceStrategy,this.environmentInjector),Rr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",2)}}))}),Rr(d=>{const f=new Tte(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),VS(u=>{const d=f=>{const g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(Rr(_=>{f.component=_}),Ae(()=>{})));for(const _ of f.children)g.push(...d(_));return g};return mS(d(u.targetSnapshot.root)).pipe(Bv(),tu(1))}),VS(()=>this.afterPreactivation()),Ae(u=>{const d=function Ote(n,e,t){const r=im(n,e._root,t?t._root:void 0);return new fj(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:d},s}),Rr(()=>{this.events.next(new DS)}),((n,e,t,r)=>Ae(i=>(new qte(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),tu(1),Rr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Au(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function zee(n){return j((e,t)=>{An(n).subscribe(oe(t,()=>t.complete(),be)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Rr(u=>{throw u}))),vS(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Kc(u=>{if(a=!0,Ij(u))this.events.next(new nm(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function Vte(n){return Ij(n)&&Qc(n.url)}(u)?this.events.next(new AS(u.url)):s.resolve(!1);else{this.events.next(new EI(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(d){s.reject(d)}}return $n}))}))}cancelNavigationTransition(t,r,i){const s=new nm(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Oj(n){return n!==tm}let kj=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===tt);return r}getResolvedTitleForRoute(t){return t.data[Zg]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:function(){return Ee(One)},providedIn:"root"})}return n})(),One=(()=>{class n extends kj{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(EO))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kne=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:function(){return Ee(Vne)},providedIn:"root"})}return n})();class Fne{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Vne=(()=>{class n extends Fne{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=rr(n)))(i||n)}}();static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const SI=new fe("",{providedIn:"root",factory:()=>({})});let Lne=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:function(){return Ee(Une)},providedIn:"root"})}return n})(),Une=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var cm=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(cm||{});function Fj(n,e){n.events.pipe(Vs(t=>t instanceof Au||t instanceof nm||t instanceof EI||t instanceof vh),Ae(t=>t instanceof Au||t instanceof vh?cm.COMPLETE:t instanceof nm&&(0===t.code||1===t.code)?cm.REDIRECTING:cm.FAILED),Vs(t=>t!==cm.REDIRECTING),tu(1)).subscribe(()=>{e()})}function Bne(n){throw n}function jne(n,e,t){return e.parse("/")}const $ne={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hne={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Xr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ee(e1),this.isNgZoneEnabled=!1,this._events=new L,this.options=Ee(SI,{optional:!0})||{},this.pendingTasks=Ee(t1),this.errorHandler=this.options.errorHandler||Bne,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||jne,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ee(Lne),this.routeReuseStrategy=Ee(kne),this.titleStrategy=Ee(kj),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ee(Ch,{optional:!0})?.flat()??[],this.navigationTransitions=Ee(bI),this.urlSerializer=Ee(Yg),this.location=Ee(kC),this.componentInputBindingEnabled=!!Ee(wI,{optional:!0}),this.eventsSubscription=new mt,this.isNgZoneEnabled=Ee(yt)instanceof yt&&yt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new yh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=pj(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(Vj(r)&&this._events.next(r));if(r instanceof vI)Oj(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof vh)this.rawUrlTree=i.rawUrl;else if(r instanceof lj){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof DS)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof nm)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof AS){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Oj(i.source)};this.scheduleNavigation(s,tm,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof EI&&this.restoreHistory(i,!0),r instanceof Au&&(this.navigated=!0),Vj(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),tm,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(OS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let g,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{g=rj(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),g=this.currentUrlTree.root}return ij(g,t,f,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Qc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,tm,null,r)}navigate(t,r={skipLocationChange:!1}){return function qne(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new I(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...$ne}:!1===r?{...Hne}:r,Qc(t))return KB(this.currentUrlTree,t,i);const s=this.parseUrl(t);return KB(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((g,_)=>{a=g,u=_});const f=this.pendingTasks.add();return Fj(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Vj(n){return!(n instanceof DS||n instanceof AS)}let Qi=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new L,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof Au&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function uP(n,e,t){return function lH(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?aP:sy}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(X(Xr),X(bu),function Ol(n){return function Cf(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(xh(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Vn(),n)}("tabindex"),X(Lo),X(ji),X(mc))};static#t=this.\u0275dir=je({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&_n("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&bi("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",md],skipLocationChange:["skipLocationChange","skipLocationChange",md],replaceUrl:["replaceUrl","replaceUrl",md],routerLink:"routerLink"},standalone:!0,features:[wM,Ii]})}return n})();class Lj{}let Wne=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Vs(t=>t instanceof Au),Kg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=rC(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return S(i).pipe(Ji())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):H(null);const s=i.pipe(Kt(o=>null===o?H(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?S([s,this.loader.loadComponent(r)]).pipe(Ji()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Xr),ee(n1),ee(os),ee(Lj),ee(LS))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const US=new fe("");let Uj=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof vI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Au?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof vh&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof dj&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new dj(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function ZP(){throw new Error("invalid")}()};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac})}return n})();function da(n,e){return{\u0275kind:n,\u0275providers:e}}function jj(){const n=Ee(zr);return e=>{const t=n.get(Go);if(e!==t.components[0])return;const r=n.get(Xr),i=n.get($j);1===n.get(BS)&&r.initialNavigation(),n.get(Hj,null,ot.Optional)?.setUpPreloading(),n.get(US,null,ot.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const $j=new fe("",{factory:()=>new L}),BS=new fe("",{providedIn:"root",factory:()=>1}),Hj=new fe("");function Yne(n){return da(0,[{provide:Hj,useExisting:Wne},{provide:Lj,useExisting:n}])}const qj=new fe("ROUTER_FORROOT_GUARD"),Xne=[kC,{provide:Yg,useClass:ES},Xr,rm,{provide:bu,useFactory:function Bj(n){return n.routerState.root},deps:[Xr]},LS,[]];function ere(){return new c1("Router",Xr)}let zj=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Xne,[],{provide:Ch,multi:!0,useValue:t},{provide:qj,useFactory:ire,deps:[[Xr,new qa,new Vl]]},{provide:SI,useValue:r||{}},r?.useHash?{provide:mc,useClass:Q9}:{provide:mc,useClass:B1},{provide:US,useFactory:()=>{const n=Ee(f6),e=Ee(yt),t=Ee(SI),r=Ee(bI),i=Ee(Yg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Uj(i,r,n,e,t)}},r?.preloadingStrategy?Yne(r.preloadingStrategy).\u0275providers:[],{provide:c1,multi:!0,useFactory:ere},r?.initialNavigation?sre(r):[],r?.bindToComponentInputs?da(8,[yj,{provide:wI,useExisting:yj}]).\u0275providers:[],[{provide:Gj,useFactory:jj},{provide:DC,multi:!0,useExisting:Gj}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ch,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(ee(qj,8))};static#t=this.\u0275mod=dr({type:n});static#n=this.\u0275inj=Cr({})}return n})();function ire(n){return"guarded"}function sre(n){return["disabled"===n.initialNavigation?da(3,[{provide:_C,multi:!0,useFactory:()=>{const e=Ee(Xr);return()=>{e.setUpLocationChangeListener()}}},{provide:BS,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?da(2,[{provide:BS,useValue:0},{provide:_C,multi:!0,deps:[zr],useFactory:e=>{const t=e.get(K9,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Xr),s=e.get($j);Fj(i,()=>{r(!0)}),e.get(bI).afterPreactivation=()=>(r(!0),s.closed?H(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const Gj=new fe("");let are=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-header"]],decls:4,vars:0,consts:[[1,"navbar","navbar-expand-lg","fixed-top","bg-white"],[1,"container","justify-content-center"],["href","/","routerLink","/",1,"site-logo"]],template:function(r,i){1&r&&(q(0,"header",0)(1,"div",1)(2,"a",2),le(3,"Blogche"),Z()()())},dependencies:[Qi],styles:["header[_ngcontent-%COMP%]{height:100px}.site-logo[_ngcontent-%COMP%]{font-size:1.5rem}"]})}return n})(),ure=(()=>{class n{constructor(t){this.firestore=t}loadData(){return this.firestore.collection("categories").snapshotChanges().pipe(Ae(t=>t.map(r=>{const{id:i,...s}=r.payload.doc.data();return{id:r.payload.doc.id,...s}})))}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Gg))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dh=(()=>{class n{constructor(t,r,i,s){this.afAuth=t,this.afs=r,this.toastr=i,this.router=s,this.loggedIn=new M(!1),this.userEmail=new M(""),localStorage.getItem("user")&&this.loggedIn.next(!0)}register(t,r,i,s){var o=this;return(0,W.Z)(function*(){const u=(yield o.afAuth.createUserWithEmailAndPassword(i,s)).user;return u?(o.afAuth.signOut(),o.afs.collection("users").doc(u.uid).set({firstName:t,lastName:r,email:i})):Promise.reject("User is null")})()}login(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.toastr.success("Login Successful"),this.loadUser(),this.loggedIn.next(!0),this.router.navigate(["/"])}).catch(i=>{this.toastr.error("auth/wrong-password"===i.code||"auth/user-not-found"===i.code||"auth/invalid-email"===i.code||"auth/invalid-credential"===i.code?"Wrong credentials":i.message)})}loadUser(){this.afAuth.authState.subscribe(t=>{t?(localStorage.setItem("user",JSON.stringify(t)),this.loggedIn.next(!0),this.userEmail.next(t.email??"")):(localStorage.removeItem("user"),this.loggedIn.next(!1),this.userEmail.next(""))})}logout(){this.afAuth.signOut().then(()=>{this.toastr.success("Logout Successful"),localStorage.removeItem("user"),this.loggedIn.next(!1),this.router.navigate(["/login"])}).catch(t=>{this.toastr.error(t)})}isLoggedIn(){return this.loggedIn.asObservable()}static#e=this.\u0275fac=function(r){return new(r||n)(ee(e0),ee(Gg),ee(Iv),ee(Xr))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const cre=function(n,e){return["/category",n,e]};function lre(n,e){if(1&n&&(q(0,"ul",9)(1,"li",10)(2,"a",11),le(3),Z()()()),2&n){const t=e.$implicit;ae(2),_e("routerLink",px(2,cre,t.category,t.id)),ae(1),Ho(t.category)}}function dre(n,e){1&n&&(q(0,"a",12),le(1,"Login"),Z())}function hre(n,e){1&n&&(q(0,"a",13),le(1,"Register"),Z())}function fre(n,e){if(1&n){const t=cd();q(0,"div",14)(1,"a",15),le(2),Z(),q(3,"button",16),_n("click",function(){return Pa(t),Ma(zt().onLogout())}),le(4," Logout "),Z()()}if(2&n){const t=zt();ae(2),oi(" ",t.userEmail,"")}}let pre=(()=>{class n{constructor(t,r){this.categoryService=t,this.authService=r,this.categoryArray=[],this.userEmail=""}ngOnInit(){this.categoryService.loadData().subscribe(t=>{this.categoryArray=t}),this.authService.loadUser(),this.authService.userEmail.subscribe(t=>{this.userEmail=t}),this.isLoggedIn$=this.authService.isLoggedIn()}onLogout(){this.authService.logout()}static#e=this.\u0275fac=function(r){return new(r||n)(X(ure),X(Dh))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-category-navbar"]],decls:13,vars:10,consts:[[1,"navbar","navbar-expand-lg","fixed-top"],[1,"container"],[1,"collapse","navbar-collapse","justify-content-center"],["class","navbar-nav",4,"ngFor","ngForOf"],[1,"navbar-nav","ml-auto"],[1,"nav-item"],["class","nav-link","routerLink","/login",4,"ngIf"],["class","nav-link","routerLink","/register",4,"ngIf"],["class","container justify-content-center",4,"ngIf"],[1,"navbar-nav"],[1,"nav-item","ml-3"],[1,"nav-link",3,"routerLink"],["routerLink","/login",1,"nav-link"],["routerLink","/register",1,"nav-link"],[1,"container","justify-content-center"],["href","#",1,"mr-3"],[1,"btn","btn-sm","btn-info","bg-secondary-theme","text-theme-primary",3,"click"]],template:function(r,i){1&r&&(q(0,"nav",0)(1,"div",1)(2,"div",2),ke(3,lre,4,5,"ul",3),q(4,"ul",4)(5,"li",5),ke(6,dre,2,0,"a",6),fc(7,"async"),Z(),q(8,"li",5),ke(9,hre,2,0,"a",7),fc(10,"async"),Z(),ke(11,fre,5,1,"div",8),fc(12,"async"),Z()()()()),2&r&&(ae(3),_e("ngForOf",i.categoryArray),ae(3),_e("ngIf",!pc(7,4,i.isLoggedIn$)),ae(3),_e("ngIf",!pc(10,6,i.isLoggedIn$)),ae(2),_e("ngIf",pc(12,8,i.isLoggedIn$)))},dependencies:[Ep,Qo,Qi,KC],styles:["nav[_ngcontent-%COMP%]{margin-top:100px;height:50px;background-color:var(--navbar-footer-color)}.nav-link[_ngcontent-%COMP%]{text-transform:uppercase}"]})}return n})(),gre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-footer"]],decls:22,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-12","text-center"],[1,"site-logo"],[1,"nav","justify-content-center"],[1,"nav-item"],["href","/",1,"nav-link"],["href","/about",1,"nav-link"],["href","term-conditions",1,"nav-link"],["href","/contact",1,"nav-link"],[1,"mb-2","mt-2"]],template:function(r,i){1&r&&(q(0,"footer")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),le(5,"Blogche"),Z(),q(6,"div")(7,"ul",4)(8,"li",5)(9,"a",6),le(10,"Home"),Z()(),q(11,"li",5)(12,"a",7),le(13,"About"),Z()(),q(14,"li",5)(15,"a",8),le(16,"Terms & Conditions"),Z()(),q(17,"li",5)(18,"a",9),le(19,"Contact"),Z()()()(),q(20,"p",10),le(21,"Copyright 2024"),Z()()()()())},styles:["footer[_ngcontent-%COMP%]{height:130px;padding:15px;background-color:var(--navbar-footer-color)}.site-logo[_ngcontent-%COMP%]{font-size:1.2em}"]})}return n})(),mre=(()=>{class n{constructor(t){this.firebase=t}addSubs(t){this.firebase.collection("subscribers").add(t).then(()=>{console.log("Subscribed Successfully")})}checkSubs(t){return this.firebase.collection("subscribers",r=>r.where("email","==",t)).get()}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Gg))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _re(n,e){1&n&&(q(0,"div",7),le(1," Email already exists "),Z())}function yre(n,e){1&n&&(q(0,"div",8),le(1," Thank you for subscribing! "),Z())}function vre(n,e){1&n&&(q(0,"div"),le(1," Name is required "),Z())}function Ere(n,e){if(1&n&&(q(0,"div",19),ke(1,vre,2,0,"div",20),Z()),2&n){zt();const t=un(4);ae(1),_e("ngIf",t.errors&&t.errors.required)}}function Ire(n,e){1&n&&(q(0,"div"),le(1," Email is required "),Z())}function wre(n,e){1&n&&(q(0,"div"),le(1," Please enter a valid email address "),Z())}function Tre(n,e){if(1&n&&(q(0,"div",19),ke(1,Ire,2,0,"div",20),ke(2,wre,2,0,"div",20),Z()),2&n){zt();const t=un(8);ae(1),_e("ngIf",t.errors&&t.errors.required),ae(1),_e("ngIf",t.errors&&t.errors.email)}}const Wj=function(n){return{"is-invalid":n}};function Cre(n,e){if(1&n){const t=cd();q(0,"form",9,10),_n("ngSubmit",function(){Pa(t);const i=un(1);return Ma(zt().onSubmit(i.value))}),q(2,"div",11),Pt(3,"input",12,13),ke(5,Ere,2,1,"div",14),Z(),q(6,"div",11),Pt(7,"input",15,16),ke(9,Tre,3,2,"div",14),Z(),q(10,"div",17)(11,"button",18),le(12," SUBSCRIBE "),Z()()()}if(2&n){const t=un(1),r=un(4),i=un(8);ae(3),_e("ngClass",Ns(5,Wj,r.touched&&r.invalid)),ae(2),_e("ngIf",r.touched&&r.invalid),ae(2),_e("ngClass",Ns(7,Wj,i.touched&&i.invalid)),ae(2),_e("ngIf",i.touched&&i.invalid),ae(2),_e("disabled",t.invalid)}}let Dre=(()=>{class n{constructor(t){this.subService=t,this.isEmailError=!1,this.isSubscribed=!1}ngOnInit(){}onSubmit(t){const r={name:t.name,email:t.email};this.subService.checkSubs(r.email).subscribe(i=>{console.log(i),i.empty?(this.subService.addSubs(r),this.isSubscribed=!0):this.isEmailError=!0})}static#e=this.\u0275fac=function(r){return new(r||n)(X(mre))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-subscription-form"]],decls:10,vars:3,consts:[[1,"card","shadow-effect"],[1,"card-body"],[1,"text-center","mt-3","mb-5"],[1,"m-auto","subs-text"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],["class","form-inline mb-5 mt-5",3,"ngSubmit",4,"ngIf"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-info","mt-3"],[1,"form-inline","mb-5","mt-5",3,"ngSubmit"],["subForm","ngForm"],[1,"form-group","col-md-5"],["type","text","placeholder","Your name","name","name","ngModel","","required","",1,"form-control","shadow-effect",3,"ngClass"],["Name","ngModel"],["class","text-danger",4,"ngIf"],["type","email","placeholder","Email","name","email","ngModel","","required","","email","",1,"form-control","shadow-effect",3,"ngClass"],["Email","ngModel"],[1,"col-md-2"],[1,"btn","btn-info","btn-block","btn-theme",3,"disabled"],[1,"text-danger"],[4,"ngIf"]],template:function(r,i){1&r&&(q(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),le(4,"SUBSCRIPTION FORM"),Z(),q(5,"p",3),le(6," Lorem ipsum dolor sit amet consectetur adipisicing elit. Inventore, numquam? "),Z(),ke(7,_re,2,0,"div",4),ke(8,yre,2,0,"div",5),ke(9,Cre,13,9,"form",6),Z()()()),2&r&&(ae(7),_e("ngIf",i.isEmailError),ae(1),_e("ngIf",i.isSubscribed),ae(1),_e("ngIf",!i.isSubscribed))},dependencies:[nv,Qo,vv,yd,cv,lv,wd,Sp,bp,Id],styles:[".card[_ngcontent-%COMP%]{background-color:var(--secondary-color);width:1200px}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%]{width:100%}.subs-text[_ngcontent-%COMP%]{width:500px}"]})}return n})(),Are=(()=>{class n{constructor(){this.title="blog-app"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"app-body"],[1,"container","mt-5","mb-5"],[1,"row","justify-content-center"]],template:function(r,i){1&r&&(Pt(0,"app-header")(1,"app-category-navbar"),q(2,"div",0),Pt(3,"router-outlet"),Z(),q(4,"div",1)(5,"div",2),Pt(6,"app-subscription-form"),Z()(),Pt(7,"app-footer"))},dependencies:[NS,are,pre,gre,Dre],styles:[".app-body[_ngcontent-%COMP%]{margin-top:150px;min-height:45vh}"]})}return n})(),jS=(()=>{class n{constructor(t){this.firestore=t}loadFeatured(){return this.firestore.collection("posts",t=>t.where("isFeatured","==",!0).limit(4)).snapshotChanges().pipe(Ae(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}loadLatest(){return this.firestore.collection("posts",t=>t.orderBy("createdAt","desc")).snapshotChanges().pipe(Ae(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}loadCategoryPosts(t){return this.firestore.collection("posts",r=>r.where("category.categoryId","==",t).limit(4)).snapshotChanges().pipe(Ae(r=>r.map(i=>{const s=i.payload.doc.data();return{id:i.payload.doc.id,...s}})))}loadOnePost(t){return this.firestore.doc(`posts/${t}`).valueChanges()}loadSimilar(t){return this.firestore.collection("posts",r=>r.where("category.categoryId","==",t).limit(4)).snapshotChanges().pipe(Ae(r=>r.map(i=>{const s=i.payload.doc.data();return{id:i.payload.doc.id,...s}})))}countViews(t){const r={views:Xo.Z.firestore.FieldValue.increment(1)};this.firestore.doc(`posts/${t}`).update(r).then(()=>{console.log("Views updated")})}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Gg))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bre(n,e){1&n&&(q(0,"small",10),le(1,"Featured"),Z())}const Sre=function(n){return["/post",n]};function Rre(n,e){if(1&n&&(q(0,"div",1),Pt(1,"img",2),q(2,"div",3)(3,"small",4),le(4),Z(),ke(5,bre,2,0,"small",5),q(6,"small",6),le(7),Z(),Pt(8,"br"),q(9,"small",7),le(10),fc(11,"date"),Z(),q(12,"h5",8),le(13),Z(),q(14,"p",9),le(15),Z()()()),2&n){const t=zt();_e("routerLink",Ns(10,Sre,t.postData.id)),ae(1),_e("src",t.postData.postImgPath,sy),ae(3),Ho(t.postData.category.category),ae(1),_e("ngIf",t.postData.isFeatured),ae(2),oi("Views - ",t.postData.views,""),ae(3),oi("Last updated - ",pc(11,8,t.postData.createdAt.toMillis()),""),ae(3),Ho(t.postData.title),ae(2),Ho(t.postData.excerpt)}}let $S=(()=>{class n{constructor(){}ngOnInit(){console.log(this.postData)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-post-card"]],inputs:{postData:"postData"},decls:1,vars:1,consts:[["class","card shadow-effect",3,"routerLink",4,"ngIf"],[1,"card","shadow-effect",3,"routerLink"],["alt","post-image",1,"card-img-top",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-success text-center ml-1",4,"ngIf"],[1,"bg-light","text-info","text-center","ml-1"],[1,"bg-light","text-warning","text-center","ml-3"],[1,"mt-1","line-clamp-3"],[1,"text-truncate"],[1,"bg-light","text-success","text-center","ml-1"]],template:function(r,i){1&r&&ke(0,Rre,16,12,"div",0),2&r&&_e("ngIf",i.postData)},dependencies:[Qo,Qi,ZC],styles:[".card[_ngcontent-%COMP%]{max-width:400px;min-height:500px}.card[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{width:100%;height:300px;object-fit:cover;cursor:pointer}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.line-clamp-3[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}"]})}return n})();function Pre(n,e){if(1&n&&(q(0,"div",9),Pt(1,"app-post-card",10),Z()),2&n){const t=e.$implicit;ae(1),_e("postData",t)}}function Mre(n,e){if(1&n&&(q(0,"div",11),Pt(1,"app-post-card",10),Z()),2&n){const t=e.$implicit;ae(1),_e("postData",t)}}let Nre=(()=>{class n{constructor(t){this.postService=t,this.featuredPostsArray=[],this.latestPostsArray=[]}ngOnInit(){this.postService.loadFeatured().subscribe(t=>{this.featuredPostsArray=t}),this.postService.loadLatest().subscribe(t=>{this.latestPostsArray=t})}static#e=this.\u0275fac=function(r){return new(r||n)(X(jS))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-home"]],decls:18,vars:2,consts:[[1,"featured-section"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","text-center","mt-5"],[1,"text-white"],["class","col-lg-3",4,"ngFor","ngForOf"],[1,"container","mt-5"],[1,"col-md-12","text-center"],["class","col-md-4 mt-3",4,"ngFor","ngForOf"],[1,"col-lg-3"],[3,"postData"],[1,"col-md-4","mt-3"]],template:function(r,i){1&r&&(q(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),le(5,"Featured Posts"),Z(),q(6,"p",4),le(7,"Take a look at some of our featured posts."),Z()()(),q(8,"div",2),ke(9,Pre,2,1,"div",5),Z()()(),q(10,"section",6)(11,"div",7)(12,"h2"),le(13,"Latest Posts"),Z(),q(14,"p"),le(15,"Whats new? Here are our latest posts!"),Z()(),q(16,"div",2),ke(17,Mre,2,1,"div",8),Z()()),2&r&&(ae(9),_e("ngForOf",i.featuredPostsArray),ae(8),_e("ngForOf",i.latestPostsArray))},dependencies:[Ep,$S],styles:[".featured-section[_ngcontent-%COMP%]{padding-left:130px;padding-right:130px;padding-bottom:130px;background-color:var(--primary-color)}"]})}return n})();function xre(n,e){if(1&n&&(q(0,"div",6),Pt(1,"app-post-card",7),Z()),2&n){const t=e.$implicit;ae(1),_e("postData",t)}}let Ore=(()=>{class n{constructor(t,r){this.route=t,this.postService=r,this.postsArray=[]}ngOnInit(){this.route.params.subscribe(t=>{console.log(t),this.categoryObj=t,this.postService.loadCategoryPosts(t.id).subscribe(r=>{this.postsArray=r})})}static#e=this.\u0275fac=function(r){return new(r||n)(X(bu),X(jS))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-single-category"]],decls:9,vars:3,consts:[[1,"bg-theme","p-5"],[1,"container"],[1,"text-white"],[1,"container","mt-5","mb-5"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[3,"postData"]],template:function(r,i){1&r&&(q(0,"div",0)(1,"div",1)(2,"h1",2),le(3),Z(),q(4,"p",2),le(5),Z()()(),q(6,"div",3)(7,"div",4),ke(8,xre,2,1,"div",5),Z()()),2&r&&(ae(3),Ho(i.categoryObj.category),ae(2),oi(" Here you can find ",i.categoryObj.category," related posts. Enjoy reading "),ae(3),_e("ngForOf",i.postsArray))},dependencies:[Ep,$S]})}return n})();function kre(n,e){1&n&&(q(0,"small",16),le(1,"Featured"),Z())}function Fre(n,e){1&n&&Pt(0,"p",17),2&n&&_e("innerHtml",zt(2).postData.content,iy)}function Vre(n,e){1&n&&(q(0,"p"),le(1," You need to "),q(2,"a",18),le(3,"login"),Z(),le(4," in order to read this article. Dont have an account? "),q(5,"a",19),le(6,"Create one here!"),Z()())}function Lre(n,e){if(1&n&&(q(0,"div"),Pt(1,"app-post-card",20),Z()),2&n){const t=e.$implicit;ae(1),_e("postData",t)}}function Ure(n,e){if(1&n&&(q(0,"div",1)(1,"div",2),Pt(2,"div",3),q(3,"div",3)(4,"div",4),Pt(5,"img",5),q(6,"div",6)(7,"small",7),le(8),Z(),ke(9,kre,2,0,"small",8),q(10,"small",9),le(11),Z(),q(12,"small",10),le(13),fc(14,"date"),Z(),q(15,"h1",11),le(16),Z(),ke(17,Fre,1,1,"p",12),fc(18,"async"),ke(19,Vre,7,0,"ng-template",null,13,Vx),Z()()(),q(21,"div",14),ke(22,Lre,2,1,"div",15),Z()()()),2&n){const t=un(20),r=zt();ae(5),_e("src",r.postData.postImgPath,sy),ae(3),Ho(r.postData.category.category),ae(1),_e("ngIf",r.postData.isFeatured),ae(2),oi("Views - ",r.postData.views,""),ae(2),oi("LAST UPDATED: ",pc(14,9,r.postData.createdAt.toMillis()),""),ae(3),Ho(r.postData.title),ae(1),_e("ngIf",pc(18,11,r.isLoggedIn$))("ngIfElse",t),ae(5),_e("ngForOf",r.similarPostArray)}}let Bre=(()=>{class n{constructor(t,r,i){this.route=t,this.postService=r,this.authService=i,this.similarPostArray=[]}ngOnInit(){this.route.params.subscribe(t=>{this.postService.countViews(t.id),this.postService.loadOnePost(t.id).subscribe(r=>{this.postData=r,this.loadSimilarPost(this.postData.category.categoryId)}),this.isLoggedIn$=this.authService.isLoggedIn()})}loadSimilarPost(t){this.postService.loadSimilar(t).subscribe(r=>{this.similarPostArray=r})}static#e=this.\u0275fac=function(r){return new(r||n)(X(bu),X(jS),X(Dh))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-single-post"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-md-9"],[1,"card","shadow-effect"],["alt","",1,"card-img-top","img-fluid","fixed-size",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-sucess text-center ml-2",4,"ngIf"],[1,"bg-light","text-info","text-center","ml-2"],[1,"bg-light","text-info","text-warning","ml-2"],[1,"mt-3","mb-3"],[3,"innerHtml",4,"ngIf","ngIfElse"],["loginBlock",""],[1,"col-md-3"],[4,"ngFor","ngForOf"],[1,"bg-light","text-sucess","text-center","ml-2"],[3,"innerHtml"],["routerLink","/login"],["routerLink","/register"],[3,"postData"]],template:function(r,i){1&r&&ke(0,Ure,23,13,"div",0),2&r&&_e("ngIf",i.postData)},dependencies:[Ep,Qo,Qi,$S,KC,ZC],styles:[".fixed-size[_ngcontent-%COMP%]{width:500px;height:500px;object-fit:cover}"]})}return n})(),jre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-terms-and-conditions"]],decls:10,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],["routerLink","/",1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(r,i){1&r&&(q(0,"section",0)(1,"div",1)(2,"h1",2),le(3,"Terms & Conditions"),Z(),q(4,"div",3)(5,"p"),le(6,' Terms and Conditions These terms and conditions outline the rules and regulations for the use of [Your Company Name]\'s Website. By accessing this website, we assume you accept these terms and conditions in full. Do not continue to use [Your Company Name]\'s website if you do not accept all of the terms and conditions stated on this page. The following terminology applies to these Terms and Conditions, Privacy Statement and Disclaimer Notice and any or all Agreements: "Client," "You" and "Your" refers to you, the person accessing this website and accepting the Company\'s terms and conditions. "The Company," "Ourselves," "We," "Our" and "Us," refers to our Company. "Party," "Parties," or "Us," refers to both the Client and ourselves, or either the Client or ourselves. All terms refer to the offer, acceptance, and consideration of payment necessary to undertake the process of our assistance to the Client in the most appropriate manner, whether by formal meetings of a fixed duration, or any other means, for the express purpose of meeting the Client\'s needs in respect of the provision of the Company\'s stated services/products, in accordance with and subject to, prevailing law of [Country]. Any use of the above terminology or other words in the singular, plural, capitalization, and/or he/she or they, are taken as interchangeable and therefore as referring to same. '),Z(),q(7,"div",4)(8,"button",5),le(9," Back to Home "),Z()()()()())},dependencies:[Qi]})}return n})(),$re=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-contact-us"]],decls:10,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],["routerLink","/",1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(r,i){1&r&&(q(0,"section",0)(1,"div",1)(2,"h1",2),le(3,"Contact us"),Z(),q(4,"div",3)(5,"p"),le(6," Have questions or feedback? We'd love to hear from you. Please feel free to reach out to us on angularblog@moqtblog.com "),Z(),q(7,"div",4)(8,"button",5),le(9," Back to Home "),Z()()()()())},dependencies:[Qi]})}return n})(),Hre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-about"]],decls:10,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],["routerLink","/",1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(r,i){1&r&&(q(0,"section",0)(1,"div",1)(2,"h1",2),le(3,"About us"),Z(),q(4,"div",3)(5,"p"),le(6," About Us Welcome to my Angular Blog Project developed for my exam at SoftUni! I'm thrilled to share this project and my journey with you. As a student at SoftUni, I'm deeply passionate about web development and technology. This Angular Blog Project is a result of my dedication to learning and my desire to showcase my skills in Angular development. Supported by the invaluable resources and guidance provided by SoftUni, I embarked on this project with the goal of creating a comprehensive resource for individuals interested in Angular. Whether you're a fellow student looking to deepen your understanding of web development or someone eager to explore Angular, this blog is designed to cater to learners of all levels. Driven by my enthusiasm for coding and learning, I've crafted tutorials, guides, and practical examples to help you grasp Angular concepts effectively. From the fundamentals to advanced techniques, I aim to provide content that is both informative and engaging. What makes this project special is its focus on practical learning. In addition to theoretical explanations, I've included hands-on projects, code snippets, and interactive exercises to help you apply what you've learned in real-world scenarios. As part of the SoftUni community, I value collaboration and feedback. I encourage you to actively engage with the blog by sharing your thoughts, asking questions, and contributing your ideas. Your input is invaluable in shaping the direction of this project and ensuring its continued growth. Thank you for joining me on this exciting journey. I'm grateful for the opportunity to share my knowledge and passion for Angular development with you. Happy coding! Georgi "),Z(),q(7,"div",4)(8,"button",5),le(9," Back to Home "),Z()()()()())},dependencies:[Qi]})}return n})();function qre(n,e){1&n&&(q(0,"div"),le(1," Email cannot be empty "),Z())}function zre(n,e){1&n&&(q(0,"div"),le(1," Please enter a valid email address "),Z())}function Gre(n,e){if(1&n&&(q(0,"div",18),ke(1,qre,2,0,"div",19),ke(2,zre,2,0,"div",19),Z()),2&n){zt();const t=un(15);ae(1),_e("ngIf",t.errors&&t.errors.required),ae(1),_e("ngIf",t.errors&&t.errors.email)}}function Wre(n,e){1&n&&(q(0,"div"),le(1," Password cannot be empty "),Z())}function Kre(n,e){if(1&n&&(q(0,"div",18),ke(1,Wre,2,0,"div",19),Z()),2&n){zt();const t=un(19);ae(1),_e("ngIf",t.errors&&t.errors.required)}}const Kj=function(n){return{"is-invalid":n}};let Zre=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}onSubmit(t){this.authService.login(t.email,t.password)}static#e=this.\u0275fac=function(r){return new(r||n)(X(Dh))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-login"]],decls:28,vars:9,consts:[[1,"container"],[1,"row"],[1,"col-md-3"],[1,"col-md-6"],[1,"card","p-5","shadow-effect","bg-secondary-theme"],[1,"card-body"],[1,"text-center"],[1,"text-theme-primary"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"form-group"],["type","email","placeholder","Email","name","email","ngModel","","required","","email","",1,"form-control",3,"ngClass"],["Email","ngModel"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","Password","name","password","ngModel","","required","",1,"form-control",3,"ngClass"],["Password","ngModel"],["routerLink","/register"],[1,"btn","btn-info","btn-block","btn-theme",3,"disabled"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(r,i){if(1&r){const s=cd();q(0,"div",0)(1,"div",1),Pt(2,"div",2),q(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),le(8,"Login"),Z(),q(9,"p"),le(10,"Login into your admin account"),Z()(),q(11,"form",8,9),_n("ngSubmit",function(){Pa(s);const a=un(12);return Ma(i.onSubmit(a.value))}),q(13,"div",10),Pt(14,"input",11,12),ke(16,Gre,3,2,"div",13),Z(),q(17,"div",10),Pt(18,"input",14,15),ke(20,Kre,2,1,"div",13),Z(),q(21,"p"),le(22," You don't have an account? "),q(23,"a",16),le(24,"Create account here"),Z()(),q(25,"button",17),le(26," Login "),Z()()()()(),Pt(27,"div",2),Z()()}if(2&r){const s=un(12),o=un(15),a=un(19);ae(14),_e("ngClass",Ns(5,Kj,o.touched&&o.invalid)),ae(2),_e("ngIf",o.touched&&o.invalid),ae(2),_e("ngClass",Ns(7,Kj,a.touched&&a.invalid)),ae(2),_e("ngIf",a.touched&&a.invalid),ae(5),_e("disabled",s.invalid)}},dependencies:[nv,Qo,Qi,vv,yd,cv,lv,wd,Sp,bp,Id]})}return n})();function Qre(n,e){1&n&&(q(0,"div",24),le(1," First name cannot be empty "),Z())}function Yre(n,e){if(1&n&&(q(0,"div",24),ke(1,Qre,2,0,"div",13),Z()),2&n){zt();const t=un(15);ae(1),_e("ngIf",t.errors&&t.errors.required)}}function Jre(n,e){1&n&&(q(0,"div",24),le(1," Last name cannot be empty "),Z())}function Xre(n,e){if(1&n&&(q(0,"div",24),ke(1,Jre,2,0,"div",13),Z()),2&n){zt();const t=un(19);ae(1),_e("ngIf",t.errors&&t.errors.required)}}function eie(n,e){1&n&&(q(0,"div"),le(1," Email cannot be empty "),Z())}function tie(n,e){1&n&&(q(0,"div"),le(1," Please enter a valid email address "),Z())}function nie(n,e){if(1&n&&(q(0,"div",24),ke(1,eie,2,0,"div",25),ke(2,tie,2,0,"div",25),Z()),2&n){zt();const t=un(23);ae(1),_e("ngIf",t.errors&&t.errors.required),ae(1),_e("ngIf",t.errors&&t.errors.email)}}function rie(n,e){1&n&&(q(0,"div"),le(1," Password cannot be empty "),Z())}function iie(n,e){1&n&&(q(0,"div"),le(1," Please enter a valid password "),Z())}function sie(n,e){if(1&n&&(q(0,"div",24),ke(1,rie,2,0,"div",25),ke(2,iie,2,0,"div",25),Z()),2&n){zt();const t=un(27);ae(1),_e("ngIf",t.errors&&t.errors.required),ae(1),_e("ngIf",t.errors&&t.errors.password)}}function oie(n,e){1&n&&(q(0,"div"),le(1," Confirm password cannot be empty "),Z())}function aie(n,e){1&n&&(q(0,"div"),le(1," Please enter a valid password "),Z())}function uie(n,e){if(1&n&&(q(0,"div",24),ke(1,oie,2,0,"div",25),ke(2,aie,2,0,"div",25),Z()),2&n){zt();const t=un(31);ae(1),_e("ngIf",t.errors&&t.errors.required),ae(1),_e("ngIf",t.errors&&t.errors.password)}}function cie(n,e){1&n&&(q(0,"div",24),le(1," Passwords do not match "),Z())}const lm=function(n){return{"is-invalid":n}};let lie=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.firstName="",this.lastName="",this.email="",this.password="",this.confirmPassword=""}register(){this.password===this.confirmPassword?(this.authService.register(this.firstName,this.lastName,this.email,this.password).then(()=>{console.log("User registered successfully")}).catch(t=>{console.error("Error registering user",t)}),this.router.navigate(["/login"])):console.error("Passwords do not match")}static#e=this.\u0275fac=function(r){return new(r||n)(X(Dh),X(Xr))};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-register"]],decls:41,vars:26,consts:[[1,"container"],[1,"row"],[1,"col-md-3"],[1,"col-md-6"],[1,"card","p-5","shadow-effect","bg-secondary-theme"],[1,"card-body"],[1,"text-center"],[1,"text-theme-primary"],[3,"ngSubmit"],["registerForm","ngForm"],[1,"form-group"],["type","text","placeholder","First name","name","firstName","ngModel","","required","",1,"form-control",3,"ngClass"],["FirstName","ngModel"],["class","alert alert-danger",4,"ngIf"],["type","text","placeholder","Last name","name","lastName","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["LastName","ngModel"],["type","email","placeholder","Email","name","email","required","","email","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["Email","ngModel"],["type","password","placeholder","Password","name","password","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["Password","ngModel"],["type","password","placeholder","Confirm password","name","confirmPassword","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["ConfirmPassword","ngModel"],["type","submit",1,"btn","btn-info","btn-block","btn-theme",3,"disabled"],["routerLink","/login"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(r,i){if(1&r&&(q(0,"div",0)(1,"div",1),Pt(2,"div",2),q(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),le(8,"Create account"),Z(),q(9,"p"),le(10,"Please create new account here!"),Z()(),q(11,"form",8,9),_n("ngSubmit",function(){return i.register()}),q(13,"div",10),Pt(14,"input",11,12),ke(16,Yre,2,1,"div",13),Z(),q(17,"div",10)(18,"input",14,15),_n("ngModelChange",function(o){return i.lastName=o}),Z(),ke(20,Xre,2,1,"div",13),Z(),q(21,"div",10)(22,"input",16,17),_n("ngModelChange",function(o){return i.email=o}),Z(),ke(24,nie,3,2,"div",13),Z(),q(25,"div",10)(26,"input",18,19),_n("ngModelChange",function(o){return i.password=o}),Z(),ke(28,sie,3,2,"div",13),Z(),q(29,"div",10)(30,"input",20,21),_n("ngModelChange",function(o){return i.confirmPassword=o}),Z(),ke(32,uie,3,2,"div",13),ke(33,cie,2,0,"div",13),Z(),q(34,"button",22),le(35," Create Account "),Z(),q(36,"p"),le(37," Already have an account? "),q(38,"a",23),le(39,"Login here!"),Z()()()()()(),Pt(40,"div",2),Z()()),2&r){const s=un(12),o=un(15),a=un(19),u=un(23),d=un(27),f=un(31);ae(14),_e("ngClass",Ns(16,lm,o.touched&&o.invalid)),ae(2),_e("ngIf",o.touched&&o.invalid),ae(2),_e("ngModel",i.lastName)("ngClass",Ns(18,lm,a.touched&&a.invalid)),ae(2),_e("ngIf",a.touched&&a.invalid),ae(2),_e("ngModel",i.email)("ngClass",Ns(20,lm,u.touched&&u.invalid)),ae(2),_e("ngIf",u.touched&&u.invalid),ae(2),_e("ngModel",i.password)("ngClass",Ns(22,lm,d.touched&&d.invalid)),ae(2),_e("ngIf",d.touched&&d.invalid),ae(2),_e("ngModel",i.confirmPassword)("ngClass",Ns(24,lm,f.touched&&f.invalid||i.password!==i.confirmPassword)),ae(2),_e("ngIf",f.touched&&f.invalid),ae(1),_e("ngIf",i.password!==i.confirmPassword&&f.touched),ae(1),_e("disabled",s.invalid)}},dependencies:[nv,Qo,Qi,vv,yd,cv,lv,wd,Sp,bp,Id]})}return n})(),HS=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.toastr=i}canActivate(t,r){return this.authService.isLoggedIn().pipe(tu(1),Ae(i=>i?(console.log("Access granted"),!0):(console.log("Access denied"),this.toastr.warning("Please login to access this page"),this.router.navigate(["/login"]),!1)))}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Dh),ee(Xr),ee(Iv))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const die=[{path:"",component:Nre},{path:"category/:category/:id",component:Ore},{path:"post/:id",component:Bre},{path:"about",component:Hre,canActivate:[HS]},{path:"term-conditions",component:jre,canActivate:[HS]},{path:"contact",component:$re,canActivate:[HS]},{path:"login",component:Zre,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(){return new Promise(t=>{this.authService.isLoggedIn().pipe(tu(1)).subscribe(r=>{r?(this.router.navigate(["/"]),t(!1)):t(!0)})})}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Dh),ee(Xr))};static#t=this.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()]},{path:"register",component:lie},{path:"**",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=wn({type:n,selectors:[["app-page-not-found"]],decls:8,vars:0,consts:[[1,"featured-section"],[1,"container-fluid"],[1,"container","mt-5"],[1,"col-md-12","text-center"],["routerLink","/",1,"btn","btn-info","btn-block","btn-theme"]],template:function(r,i){1&r&&(q(0,"section",0),Pt(1,"div",1),Z(),q(2,"section",2)(3,"div",3)(4,"h2"),le(5,"Oops! Page Not Found"),Z(),q(6,"button",4),le(7," BACK TO THE HOME PAGE "),Z()()())},dependencies:[Qi]})}return n})()}];let hie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=dr({type:n});static#n=this.\u0275inj=Cr({imports:[zj.forRoot(die),zj]})}return n})(),fie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=dr({type:n,bootstrap:[Are]});static#n=this.\u0275inj=Cr({imports:[vO,hie,tZ.initializeApp(iZ_firebaseConfig),Bee,m8,B8.forRoot(),kK]})}return n})();sW().bootstrapModule(fie).catch(n=>console.error(n))},106:(gs,Zn,Qe)=>{Qe.d(Zn,{Z:()=>Yn});var w=Qe(58),Ue=Qe(537),Ce=Qe(534),B=Qe(879);class mt{constructor(He,Xe){this._delegate=He,this.firebase=Xe,(0,Ce._addComponent)(He,new Ue.wA("app-compat",()=>this,"PUBLIC")),this.container=He.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(He){this._delegate.automaticDataCollectionEnabled=He}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(He=>{this._delegate.checkDestroyed(),He()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Ce.deleteApp)(this._delegate)))}_getService(He,Xe=Ce._DEFAULT_ENTRY_NAME){var Jn;this._delegate.checkDestroyed();const Xn=this._delegate.container.getProvider(He);return!Xn.isInitialized()&&"EXPLICIT"===(null===(Jn=Xn.getComponent())||void 0===Jn?void 0:Jn.instantiationMode)&&Xn.initialize(),Xn.getImmediate({identifier:Xe})}_removeServiceInstance(He,Xe=Ce._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(He).clearInstance(Xe)}_addComponent(He){(0,Ce._addComponent)(this._delegate,He)}_addOrOverwriteComponent(He){(0,Ce._addOrOverwriteComponent)(this._delegate,He)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fn=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),J=function ut(){const Et=function Qn(Et){const He={},Xe={__esModule:!0,initializeApp:function Qt(Oe,In={}){const Lt=Ce.initializeApp(Oe,In);if((0,w.r3)(He,Lt.name))return He[Lt.name];const re=new Et(Lt,Xe);return He[Lt.name]=re,re},app:Xn,registerVersion:Ce.registerVersion,setLogLevel:Ce.setLogLevel,onLog:Ce.onLog,apps:null,SDK_VERSION:Ce.SDK_VERSION,INTERNAL:{registerComponent:function Rt(Oe){const In=Oe.name,Lt=In.replace("-compat","");if(Ce._registerComponent(Oe)&&"PUBLIC"===Oe.type){const re=(sn=Xn())=>{if("function"!=typeof sn[Lt])throw fn.create("invalid-app-argument",{appName:In});return sn[Lt]()};void 0!==Oe.serviceProps&&(0,w.ZB)(re,Oe.serviceProps),Xe[Lt]=re,Et.prototype[Lt]=function(...sn){return this._getService.bind(this,In).apply(this,Oe.multipleInstances?sn:[])}}return"PUBLIC"===Oe.type?Xe[Lt]:null},removeApp:function Jn(Oe){delete He[Oe]},useAsService:function wr(Oe,In){return"serverAuth"===In?null:In},modularAPIs:Ce}};function Xn(Oe){if(!(0,w.r3)(He,Oe=Oe||Ce._DEFAULT_ENTRY_NAME))throw fn.create("no-app",{appName:Oe});return He[Oe]}return Xe.default=Xe,Object.defineProperty(Xe,"apps",{get:function It(){return Object.keys(He).map(Oe=>He[Oe])}}),Xn.App=Et,Xe}(mt);return Et.INTERNAL=Object.assign(Object.assign({},Et.INTERNAL),{createFirebaseNamespace:ut,extendNamespace:function He(Xe){(0,w.ZB)(Et,Xe)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),Et}(),se=new B.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){se.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Et=self.firebase.SDK_VERSION;Et&&Et.indexOf("LITE")>=0&&se.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Yn=J;!function _t(Et){(0,Ce.registerVersion)("@firebase/app-compat","0.2.30",Et)}()},534:(gs,Zn,Qe)=>{Qe.r(Zn),Qe.d(Zn,{FirebaseError:()=>B.ZR,SDK_VERSION:()=>ri,_DEFAULT_ENTRY_NAME:()=>ms,_addComponent:()=>ur,_addOrOverwriteComponent:()=>_s,_apps:()=>_i,_clearComponents:()=>Pu,_components:()=>Oi,_getProvider:()=>Ji,_isFirebaseApp:()=>pa,_isFirebaseServerApp:()=>wo,_registerComponent:()=>Kt,_removeServiceInstance:()=>$n,_serverApps:()=>yi,deleteApp:()=>ma,getApp:()=>Xc,getApps:()=>ga,initializeApp:()=>Tr,initializeServerApp:()=>To,onLog:()=>D,registerVersion:()=>b,setLogLevel:()=>S});var w=Qe(861),Ue=Qe(537),Ce=Qe(879),B=Qe(58);const mt=(O,I)=>I.some(z=>O instanceof z);let rn,fn;const J=new WeakMap,se=new WeakMap,be=new WeakMap,st=new WeakMap,_t=new WeakMap;let He={get(O,I,z){if(O instanceof IDBTransaction){if("done"===I)return se.get(O);if("objectStoreNames"===I)return O.objectStoreNames||be.get(O);if("store"===I)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return Qt(O[I])},set:(O,I,z)=>(O[I]=z,!0),has:(O,I)=>O instanceof IDBTransaction&&("done"===I||"store"===I)||I in O};function Xn(O){return"function"==typeof O?function Jn(O){return O!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ut(){return fn||(fn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(O)?function(...I){return O.apply(It(this),I),Qt(J.get(this))}:function(...I){return Qt(O.apply(It(this),I))}:function(I,...z){const Y=O.call(It(this),I,...z);return be.set(Y,I.sort?I.sort():[I]),Qt(Y)}}(O):(O instanceof IDBTransaction&&function Et(O){if(se.has(O))return;const I=new Promise((z,Y)=>{const ge=()=>{O.removeEventListener("complete",We),O.removeEventListener("error",rt),O.removeEventListener("abort",rt)},We=()=>{z(),ge()},rt=()=>{Y(O.error||new DOMException("AbortError","AbortError")),ge()};O.addEventListener("complete",We),O.addEventListener("error",rt),O.addEventListener("abort",rt)});se.set(O,I)}(O),mt(O,function Qn(){return rn||(rn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(O,He):O)}function Qt(O){if(O instanceof IDBRequest)return function Yn(O){const I=new Promise((z,Y)=>{const ge=()=>{O.removeEventListener("success",We),O.removeEventListener("error",rt)},We=()=>{z(Qt(O.result)),ge()},rt=()=>{Y(O.error),ge()};O.addEventListener("success",We),O.addEventListener("error",rt)});return I.then(z=>{z instanceof IDBCursor&&J.set(z,O)}).catch(()=>{}),_t.set(I,O),I}(O);if(st.has(O))return st.get(O);const I=Xn(O);return I!==O&&(st.set(O,I),_t.set(I,O)),I}const It=O=>_t.get(O),Oe=["get","getKey","getAll","getAllKeys","count"],In=["put","add","delete","clear"],Lt=new Map;function re(O,I){if(!(O instanceof IDBDatabase)||I in O||"string"!=typeof I)return;if(Lt.get(I))return Lt.get(I);const z=I.replace(/FromIndex$/,""),Y=I!==z,ge=In.includes(z);if(!(z in(Y?IDBIndex:IDBObjectStore).prototype)||!ge&&!Oe.includes(z))return;const We=function(){var rt=(0,w.Z)(function*(Jt,...Bt){const Nt=this.transaction(Jt,ge?"readwrite":"readonly");let _a=Nt.store;return Y&&(_a=_a.index(Bt.shift())),(yield Promise.all([_a[z](...Bt),ge&&Nt.done]))[0]});return function(Bt){return rt.apply(this,arguments)}}();return Lt.set(I,We),We}!function Xe(O){He=O(He)}(O=>({...O,get:(I,z,Y)=>re(I,z)||O.get(I,z,Y),has:(I,z)=>!!re(I,z)||O.has(I,z)}));class sn{constructor(I){this.container=I}getPlatformInfoString(){return this.container.getProviders().map(z=>{if(function Wt(O){const I=O.getComponent();return"VERSION"===I?.type}(z)){const Y=z.getImmediate();return`${Y.library}/${Y.version}`}return null}).filter(z=>z).join(" ")}}const ti="@firebase/app",mi="0.10.0",dt=new Ce.Yd("@firebase/app"),ms="[DEFAULT]",Io={[ti]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_i=new Map,yi=new Map,Oi=new Map;function ur(O,I){try{O.container.addComponent(I)}catch(z){dt.debug(`Component ${I.name} failed to register with FirebaseApp ${O.name}`,z)}}function _s(O,I){O.container.addOrOverwriteComponent(I)}function Kt(O){const I=O.name;if(Oi.has(I))return dt.debug(`There were multiple attempts to register component ${I}.`),!1;Oi.set(I,O);for(const z of _i.values())ur(z,O);for(const z of yi.values())ur(z,O);return!0}function Ji(O,I){const z=O.container.getProvider("heartbeat").getImmediate({optional:!0});return z&&z.triggerHeartbeat(),O.container.getProvider(I)}function $n(O,I,z=ms){Ji(O,I).clearInstance(z)}function pa(O){return void 0!==O.options}function wo(O){return void 0!==O.settings}function Pu(){Oi.clear()}const Hn=new B.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ys{constructor(I,z,Y){this._isDeleted=!1,this._options=Object.assign({},I),this._config=Object.assign({},z),this._name=z.name,this._automaticDataCollectionEnabled=z.automaticDataCollectionEnabled,this._container=Y,this.container.addComponent(new Ue.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(I){this.checkDestroyed(),this._automaticDataCollectionEnabled=I}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(I){this._isDeleted=I}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}class Mu extends ys{constructor(I,z,Y,ge){const We=void 0!==z.automaticDataCollectionEnabled&&z.automaticDataCollectionEnabled,rt={name:Y,automaticDataCollectionEnabled:We};super(void 0!==I.apiKey?I:I.options,rt,ge),this._serverConfig=Object.assign({automaticDataCollectionEnabled:We},z),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,z.releaseOnDeref=void 0,b(ti,mi,"serverapp")}get refCount(){return this._refCount}incRefCount(I){this.isDeleted||(this._refCount++,void 0!==I&&this._finalizationRegistry.register(I,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ma(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Hn.create("server-app-deleted")}}const ri="10.10.0";function Tr(O,I={}){let z=O;"object"!=typeof I&&(I={name:I});const Y=Object.assign({name:ms,automaticDataCollectionEnabled:!1},I),ge=Y.name;if("string"!=typeof ge||!ge)throw Hn.create("bad-app-name",{appName:String(ge)});if(z||(z=(0,B.aH)()),!z)throw Hn.create("no-options");const We=_i.get(ge);if(We){if((0,B.vZ)(z,We.options)&&(0,B.vZ)(Y,We.config))return We;throw Hn.create("duplicate-app",{appName:ge})}const rt=new Ue.H0(ge);for(const Bt of Oi.values())rt.addComponent(Bt);const Jt=new ys(z,Y,rt);return _i.set(ge,Jt),Jt}function To(O,I){if((0,B.jU)())throw Hn.create("invalid-server-app-environment");let z;void 0===I.automaticDataCollectionEnabled&&(I.automaticDataCollectionEnabled=!1),z=pa(O)?O.options:O;const Y=Object.assign(Object.assign({},I),z);if(void 0!==Y.releaseOnDeref&&delete Y.releaseOnDeref,void 0!==I.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Hn.create("finalization-registry-not-supported",{});const We=""+(Nt=JSON.stringify(Y),[...Nt].reduce((_a,bh)=>Math.imul(31,_a)+bh.charCodeAt(0)|0,0)),rt=yi.get(We);var Nt;if(rt)return rt.incRefCount(I.releaseOnDeref),rt;const Jt=new Ue.H0(We);for(const Nt of Oi.values())Jt.addComponent(Nt);const Bt=new Mu(z,I,We,Jt);return yi.set(We,Bt),Bt}function Xc(O=ms){const I=_i.get(O);if(!I&&O===ms&&(0,B.aH)())return Tr();if(!I)throw Hn.create("no-app",{appName:O});return I}function ga(){return Array.from(_i.values())}function ma(O){return vs.apply(this,arguments)}function vs(){return(vs=(0,w.Z)(function*(O){let I=!1;const z=O.name;_i.has(z)?(I=!0,_i.delete(z)):yi.has(z)&&O.decRefCount()<=0&&(yi.delete(z),I=!0),I&&(yield Promise.all(O.container.getProviders().map(Y=>Y.delete())),O.isDeleted=!0)})).apply(this,arguments)}function b(O,I,z){var Y;let ge=null!==(Y=Io[O])&&void 0!==Y?Y:O;z&&(ge+=`-${z}`);const We=ge.match(/\s|\//),rt=I.match(/\s|\//);if(We||rt){const Jt=[`Unable to register library "${ge}" with version "${I}":`];return We&&Jt.push(`library name "${ge}" contains illegal characters (whitespace or "/")`),We&&rt&&Jt.push("and"),rt&&Jt.push(`version name "${I}" contains illegal characters (whitespace or "/")`),void dt.warn(Jt.join(" "))}Kt(new Ue.wA(`${ge}-version`,()=>({library:ge,version:I}),"VERSION"))}function D(O,I){if(null!==O&&"function"!=typeof O)throw Hn.create("invalid-log-argument");(0,Ce.Am)(O,I)}function S(O){(0,Ce.Ub)(O)}const Q="firebase-heartbeat-database",M=1,H="firebase-heartbeat-store";let xe=null;function Dt(){return xe||(xe=function Rt(O,I,{blocked:z,upgrade:Y,blocking:ge,terminated:We}={}){const rt=indexedDB.open(O,I),Jt=Qt(rt);return Y&&rt.addEventListener("upgradeneeded",Bt=>{Y(Qt(rt.result),Bt.oldVersion,Bt.newVersion,Qt(rt.transaction),Bt)}),z&&rt.addEventListener("blocked",Bt=>z(Bt.oldVersion,Bt.newVersion,Bt)),Jt.then(Bt=>{We&&Bt.addEventListener("close",()=>We()),ge&&Bt.addEventListener("versionchange",Nt=>ge(Nt.oldVersion,Nt.newVersion,Nt))}).catch(()=>{}),Jt}(Q,M,{upgrade:(O,I)=>{if(0===I)try{O.createObjectStore(H)}catch(z){console.warn(z)}}}).catch(O=>{throw Hn.create("idb-open",{originalErrorMessage:O.message})})),xe}function xn(){return(xn=(0,w.Z)(function*(O){try{const z=(yield Dt()).transaction(H),Y=yield z.objectStore(H).get(pn(O));return yield z.done,Y}catch(I){if(I instanceof B.ZR)dt.warn(I.message);else{const z=Hn.create("idb-get",{originalErrorMessage:I?.message});dt.warn(z.message)}}})).apply(this,arguments)}function qn(O,I){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,w.Z)(function*(O,I){try{const Y=(yield Dt()).transaction(H,"readwrite");yield Y.objectStore(H).put(I,pn(O)),yield Y.done}catch(z){if(z instanceof B.ZR)dt.warn(z.message);else{const Y=Hn.create("idb-set",{originalErrorMessage:z?.message});dt.warn(Y.message)}}})).apply(this,arguments)}function pn(O){return`${O.name}!${O.options.appId}`}class Nu{constructor(I){this.container=I,this._heartbeatsCache=null;const z=this.container.getProvider("app").getImmediate();this._storage=new Es(z),this._heartbeatsCachePromise=this._storage.read().then(Y=>(this._heartbeatsCache=Y,Y))}triggerHeartbeat(){var I=this;return(0,w.Z)(function*(){var z,Y;const We=I.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),rt=Ct();if((null!=(null===(z=I._heartbeatsCache)||void 0===z?void 0:z.heartbeats)||(I._heartbeatsCache=yield I._heartbeatsCachePromise,null!=(null===(Y=I._heartbeatsCache)||void 0===Y?void 0:Y.heartbeats)))&&I._heartbeatsCache.lastSentHeartbeatDate!==rt&&!I._heartbeatsCache.heartbeats.some(Jt=>Jt.date===rt))return I._heartbeatsCache.heartbeats.push({date:rt,agent:We}),I._heartbeatsCache.heartbeats=I._heartbeatsCache.heartbeats.filter(Jt=>{const Bt=new Date(Jt.date).valueOf();return Date.now()-Bt<=2592e6}),I._storage.overwrite(I._heartbeatsCache)})()}getHeartbeatsHeader(){var I=this;return(0,w.Z)(function*(){var z;if(null===I._heartbeatsCache&&(yield I._heartbeatsCachePromise),null==(null===(z=I._heartbeatsCache)||void 0===z?void 0:z.heartbeats)||0===I._heartbeatsCache.heartbeats.length)return"";const Y=Ct(),{heartbeatsToSend:ge,unsentEntries:We}=function Ve(O,I=1024){const z=[];let Y=O.slice();for(const ge of O){const We=z.find(rt=>rt.agent===ge.agent);if(We){if(We.dates.push(ge.date),Co(z)>I){We.dates.pop();break}}else if(z.push({agent:ge.agent,dates:[ge.date]}),Co(z)>I){z.pop();break}Y=Y.slice(1)}return{heartbeatsToSend:z,unsentEntries:Y}}(I._heartbeatsCache.heartbeats),rt=(0,B.L)(JSON.stringify({version:2,heartbeats:ge}));return I._heartbeatsCache.lastSentHeartbeatDate=Y,We.length>0?(I._heartbeatsCache.heartbeats=We,yield I._storage.overwrite(I._heartbeatsCache)):(I._heartbeatsCache.heartbeats=[],I._storage.overwrite(I._heartbeatsCache)),rt})()}}function Ct(){return(new Date).toISOString().substring(0,10)}class Es{constructor(I){this.app=I,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!(0,B.hl)()&&(0,B.eu)().then(()=>!0).catch(()=>!1)})()}read(){var I=this;return(0,w.Z)(function*(){if(yield I._canUseIndexedDBPromise){const Y=yield function Ge(O){return xn.apply(this,arguments)}(I.app);return Y?.heartbeats?Y:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(I){var z=this;return(0,w.Z)(function*(){var Y;if(yield z._canUseIndexedDBPromise){const We=yield z.read();return qn(z.app,{lastSentHeartbeatDate:null!==(Y=I.lastSentHeartbeatDate)&&void 0!==Y?Y:We.lastSentHeartbeatDate,heartbeats:I.heartbeats})}})()}add(I){var z=this;return(0,w.Z)(function*(){var Y;if(yield z._canUseIndexedDBPromise){const We=yield z.read();return qn(z.app,{lastSentHeartbeatDate:null!==(Y=I.lastSentHeartbeatDate)&&void 0!==Y?Y:We.lastSentHeartbeatDate,heartbeats:[...We.heartbeats,...I.heartbeats]})}})()}}function Co(O){return(0,B.L)(JSON.stringify({version:2,heartbeats:O})).length}!function Ah(O){Kt(new Ue.wA("platform-logger",I=>new sn(I),"PRIVATE")),Kt(new Ue.wA("heartbeat",I=>new Nu(I),"PRIVATE")),b(ti,mi,O),b(ti,mi,"esm2017"),b("fire-js","")}("")},537:(gs,Zn,Qe)=>{Qe.d(Zn,{H0:()=>Qn,wA:()=>Ce});var w=Qe(861),Ue=Qe(58);class Ce{constructor(J,se,be){this.name=J,this.instanceFactory=se,this.type=be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(J){return this.instantiationMode=J,this}setMultipleInstances(J){return this.multipleInstances=J,this}setServiceProps(J){return this.serviceProps=J,this}setInstanceCreatedCallback(J){return this.onInstanceCreated=J,this}}const B="[DEFAULT]";class mt{constructor(J,se){this.name=J,this.container=se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(J){const se=this.normalizeInstanceIdentifier(J);if(!this.instancesDeferred.has(se)){const be=new Ue.BH;if(this.instancesDeferred.set(se,be),this.isInitialized(se)||this.shouldAutoInitialize())try{const st=this.getOrInitializeService({instanceIdentifier:se});st&&be.resolve(st)}catch{}}return this.instancesDeferred.get(se).promise}getImmediate(J){var se;const be=this.normalizeInstanceIdentifier(J?.identifier),st=null!==(se=J?.optional)&&void 0!==se&&se;if(!this.isInitialized(be)&&!this.shouldAutoInitialize()){if(st)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:be})}catch(_t){if(st)return null;throw _t}}getComponent(){return this.component}setComponent(J){if(J.name!==this.name)throw Error(`Mismatching Component ${J.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=J,this.shouldAutoInitialize()){if(function fn(ut){return"EAGER"===ut.instantiationMode}(J))try{this.getOrInitializeService({instanceIdentifier:B})}catch{}for(const[se,be]of this.instancesDeferred.entries()){const st=this.normalizeInstanceIdentifier(se);try{const _t=this.getOrInitializeService({instanceIdentifier:st});be.resolve(_t)}catch{}}}}clearInstance(J=B){this.instancesDeferred.delete(J),this.instancesOptions.delete(J),this.instances.delete(J)}delete(){var J=this;return(0,w.Z)(function*(){const se=Array.from(J.instances.values());yield Promise.all([...se.filter(be=>"INTERNAL"in be).map(be=>be.INTERNAL.delete()),...se.filter(be=>"_delete"in be).map(be=>be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(J=B){return this.instances.has(J)}getOptions(J=B){return this.instancesOptions.get(J)||{}}initialize(J={}){const{options:se={}}=J,be=this.normalizeInstanceIdentifier(J.instanceIdentifier);if(this.isInitialized(be))throw Error(`${this.name}(${be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const st=this.getOrInitializeService({instanceIdentifier:be,options:se});for(const[_t,Yn]of this.instancesDeferred.entries())be===this.normalizeInstanceIdentifier(_t)&&Yn.resolve(st);return st}onInit(J,se){var be;const st=this.normalizeInstanceIdentifier(se),_t=null!==(be=this.onInitCallbacks.get(st))&&void 0!==be?be:new Set;_t.add(J),this.onInitCallbacks.set(st,_t);const Yn=this.instances.get(st);return Yn&&J(Yn,st),()=>{_t.delete(J)}}invokeOnInitCallbacks(J,se){const be=this.onInitCallbacks.get(se);if(be)for(const st of be)try{st(J,se)}catch{}}getOrInitializeService({instanceIdentifier:J,options:se={}}){let be=this.instances.get(J);if(!be&&this.component&&(be=this.component.instanceFactory(this.container,{instanceIdentifier:(ut=J,ut===B?void 0:ut),options:se}),this.instances.set(J,be),this.instancesOptions.set(J,se),this.invokeOnInitCallbacks(be,J),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,J,be)}catch{}var ut;return be||null}normalizeInstanceIdentifier(J=B){return this.component?this.component.multipleInstances?J:B:J}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Qn{constructor(J){this.name=J,this.providers=new Map}addComponent(J){const se=this.getProvider(J.name);if(se.isComponentSet())throw new Error(`Component ${J.name} has already been registered with ${this.name}`);se.setComponent(J)}addOrOverwriteComponent(J){this.getProvider(J.name).isComponentSet()&&this.providers.delete(J.name),this.addComponent(J)}getProvider(J){if(this.providers.has(J))return this.providers.get(J);const se=new mt(J,this);return this.providers.set(J,se),se}getProviders(){return Array.from(this.providers.values())}}},879:(gs,Zn,Qe)=>{Qe.d(Zn,{Am:()=>ut,Ub:()=>Qn,Yd:()=>fn,in:()=>Ue});const w=[];var Ue=function(J){return J[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT",J}(Ue||{});const Ce={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},B=Ue.INFO,mt={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},rn=(J,se,...be)=>{if(se<J.logLevel)return;const st=(new Date).toISOString(),_t=mt[se];if(!_t)throw new Error(`Attempted to log a message with an invalid logType (value: ${se})`);console[_t](`[${st}]  ${J.name}:`,...be)};class fn{constructor(se){this.name=se,this._logLevel=B,this._logHandler=rn,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(se){if(!(se in Ue))throw new TypeError(`Invalid value "${se}" assigned to \`logLevel\``);this._logLevel=se}setLogLevel(se){this._logLevel="string"==typeof se?Ce[se]:se}get logHandler(){return this._logHandler}set logHandler(se){if("function"!=typeof se)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=se}get userLogHandler(){return this._userLogHandler}set userLogHandler(se){this._userLogHandler=se}debug(...se){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...se),this._logHandler(this,Ue.DEBUG,...se)}log(...se){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...se),this._logHandler(this,Ue.VERBOSE,...se)}info(...se){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...se),this._logHandler(this,Ue.INFO,...se)}warn(...se){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...se),this._logHandler(this,Ue.WARN,...se)}error(...se){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...se),this._logHandler(this,Ue.ERROR,...se)}}function Qn(J){w.forEach(se=>{se.setLogLevel(J)})}function ut(J,se){for(const be of w){let st=null;se&&se.level&&(st=Ce[se.level]),be.userLogHandler=null===J?null:(_t,Yn,...Et)=>{const He=Et.map(Xe=>{if(null==Xe)return null;if("string"==typeof Xe)return Xe;if("number"==typeof Xe||"boolean"==typeof Xe)return Xe.toString();if(Xe instanceof Error)return Xe.message;try{return JSON.stringify(Xe)}catch{return null}}).filter(Xe=>Xe).join(" ");Yn>=(st??_t.logLevel)&&J({level:Ue[Yn].toLowerCase(),message:He,args:Et,type:_t.name})}}}},491:(gs,Zn,Qe)=>{Qe.r(Zn);var w=Qe(861),Ue=Qe(106),Ce=Qe(534),B=Qe(58),mt=Qe(879),rn=Qe(582),fn=Qe(537);const ut={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Yn=function st(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Et=function _t(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},He=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Jn=new mt.Yd("@firebase/auth");function Qt(h,...c){Jn.logLevel<=mt.in.ERROR&&Jn.error(`Auth (${Ce.SDK_VERSION}): ${h}`,...c)}function It(h,...c){throw Lt(h,...c)}function Rt(h,...c){return Lt(h,...c)}function wr(h,c,l){const p=Object.assign(Object.assign({},Et()),{[c]:l});return new B.LL("auth","Firebase",p).create(c,{appName:h.name})}function Oe(h){return wr(h,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function In(h,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&It(h,"argument-error"),wr(h,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Lt(h,...c){if("string"!=typeof h){const l=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=h.name),h._errorFactory.create(l,...p)}return He.create(h,...c)}function re(h,c,...l){if(!h)throw Lt(c,...l)}function sn(h){const c="INTERNAL ASSERTION FAILED: "+h;throw Qt(c),new Error(c)}function Wt(h,c){h||sn(c)}function ti(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function mi(){return"http:"===dt()||"https:"===dt()}function dt(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class F{constructor(c,l){this.shortDelay=c,this.longDelay=l,Wt(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function yo(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(mi()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function U(h,c){Wt(h.emulator,"Emulator should always be set here");const{url:l}=h.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class L{static initialize(c,l,p){this.fetchImpl=c,l&&(this.headersImpl=l),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const G={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ue=new F(3e4,6e4);function j(h,c){return h.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:h.tenantId}):c}function oe(h,c,l,p){return lt.apply(this,arguments)}function lt(){return(lt=(0,w.Z)(function*(h,c,l,p,m={}){return Ae(h,m,(0,w.Z)(function*(){let v={},C={};p&&("GET"===c?C=p:v={body:JSON.stringify(p)});const P=(0,B.xO)(Object.assign({key:h.config.apiKey},C)).slice(1),$=yield h._getAdditionalHeaders();return $["Content-Type"]="application/json",h.languageCode&&($["X-Firebase-Locale"]=h.languageCode),L.fetch()(Ut(h,h.config.apiHost,l,P),Object.assign({method:c,headers:$,referrerPolicy:"no-referrer"},v))}))})).apply(this,arguments)}function Ae(h,c,l){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,w.Z)(function*(h,c,l){h._canInitEmulator=!1;const p=Object.assign(Object.assign({},G),c);try{const m=new kr(h),v=yield Promise.race([l(),m.promise]);m.clearNetworkTimeout();const C=yield v.json();if("needConfirmation"in C)throw jn(h,"account-exists-with-different-credential",C);if(v.ok&&!("errorMessage"in C))return C;{const P=v.ok?C.errorMessage:C.error.message,[$,de]=P.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$)throw jn(h,"credential-already-in-use",C);if("EMAIL_EXISTS"===$)throw jn(h,"email-already-in-use",C);if("USER_DISABLED"===$)throw jn(h,"user-disabled",C);const we=p[$]||$.toLowerCase().replace(/[_\s]+/g,"-");if(de)throw wr(h,we,de);It(h,we)}}catch(m){if(m instanceof B.ZR)throw m;It(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function nt(h,c,l,p){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,w.Z)(function*(h,c,l,p,m={}){const v=yield oe(h,c,l,p,m);return"mfaPendingCredential"in v&&It(h,"multi-factor-auth-required",{_serverResponse:v}),v})).apply(this,arguments)}function Ut(h,c,l,p){const m=`${c}${l}?${p}`;return h.config.emulator?U(h.config,m):`${h.config.apiScheme}://${m}`}function ar(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kr{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,p)=>{this.timer=setTimeout(()=>p(Rt(this.auth,"network-request-failed")),ue.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jn(h,c,l){const p={appName:h.name};l.email&&(p.email=l.email),l.phoneNumber&&(p.phoneNumber=l.phoneNumber);const m=Rt(h,c,p);return m.customData._tokenResponse=l,m}function Fr(h){return void 0!==h&&void 0!==h.getResponse}function ni(h){return void 0!==h&&void 0!==h.enterprise}class fa{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return ar(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function An(){return(An=(0,w.Z)(function*(h){return(yield oe(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ru(h,c){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,w.Z)(function*(h,c){return oe(h,"GET","/v2/recaptchaConfig",j(h,c))})).apply(this,arguments)}function Io(){return(Io=(0,w.Z)(function*(h,c){return oe(h,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function yi(){return(yi=(0,w.Z)(function*(h,c){return oe(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Oi(h,c){return ur.apply(this,arguments)}function ur(){return(ur=(0,w.Z)(function*(h,c){return oe(h,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function _s(h){if(h)try{const c=new Date(Number(h));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function $n(){return($n=(0,w.Z)(function*(h,c=!1){const l=(0,B.m9)(h),p=yield l.getIdToken(c),m=wo(p);re(m&&m.exp&&m.auth_time&&m.iat,l.auth,"internal-error");const v="object"==typeof m.firebase?m.firebase:void 0,C=v?.sign_in_provider;return{claims:m,token:p,authTime:_s(pa(m.auth_time)),issuedAtTime:_s(pa(m.iat)),expirationTime:_s(pa(m.exp)),signInProvider:C||null,signInSecondFactor:v?.sign_in_second_factor||null}})).apply(this,arguments)}function pa(h){return 1e3*Number(h)}function wo(h){const[c,l,p]=h.split(".");if(void 0===c||void 0===l||void 0===p)return Qt("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,B.tV)(l);return m?JSON.parse(m):(Qt("Failed to decode base64 JWT payload"),null)}catch(m){return Qt("Caught error parsing JWT payload as JSON",m?.toString()),null}}function Pu(h){const c=wo(h);return re(c,"internal-error"),re(typeof c.exp<"u","internal-error"),re(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function Vr(h,c){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,w.Z)(function*(h,c,l=!1){if(l)return c;try{return yield c}catch(p){throw p instanceof B.ZR&&function ys({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(p)&&h.auth.currentUser===h&&(yield h.auth.signOut()),p}})).apply(this,arguments)}class Mu{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const m=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,w.Z)(function*(){yield l.iteration()}),p)}iteration(){var c=this;return(0,w.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class ri{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=_s(this.lastLoginAt),this.creationTime=_s(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Tr(h){return To.apply(this,arguments)}function To(){return(To=(0,w.Z)(function*(h){var c;const l=h.auth,p=yield h.getIdToken(),m=yield Vr(h,Oi(l,{idToken:p}));re(m?.users.length,l,"internal-error");const v=m.users[0];h._notifyReloadListener(v);const C=null!==(c=v.providerUserInfo)&&void 0!==c&&c.length?vs(v.providerUserInfo):[],P=function ma(h,c){return[...h.filter(p=>!c.some(m=>m.providerId===p.providerId)),...c]}(h.providerData,C),we=!!h.isAnonymous&&!(h.email&&v.passwordHash||P?.length),Te={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:P,metadata:new ri(v.createdAt,v.lastLoginAt),isAnonymous:we};Object.assign(h,Te)})).apply(this,arguments)}function ga(){return(ga=(0,w.Z)(function*(h){const c=(0,B.m9)(h);yield Tr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function vs(h){return h.map(c=>{var{providerId:l}=c,p=(0,rn._T)(c,["providerId"]);return{providerId:l,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}function D(){return(D=(0,w.Z)(function*(h,c){const l=yield Ae(h,{},(0,w.Z)(function*(){const p=(0,B.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:m,apiKey:v}=h.config,C=Ut(h,m,"/v1/token",`key=${v}`),P=yield h._getAdditionalHeaders();return P["Content-Type"]="application/x-www-form-urlencoded",L.fetch()(C,{method:"POST",headers:P,body:p})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function Q(){return(Q=(0,w.Z)(function*(h,c){return oe(h,"POST","/v2/accounts:revokeToken",j(h,c))})).apply(this,arguments)}class M{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){re(c.idToken,"internal-error"),re(typeof c.idToken<"u","internal-error"),re(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):Pu(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}updateFromIdToken(c){re(0!==c.length,"internal-error");const l=Pu(c);this.updateTokensAndExpiration(c,null,l)}getToken(c,l=!1){var p=this;return(0,w.Z)(function*(){return l||!p.accessToken||p.isExpired?(re(p.refreshToken,c,"user-token-expired"),p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null):p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var p=this;return(0,w.Z)(function*(){const{accessToken:m,refreshToken:v,expiresIn:C}=yield function b(h,c){return D.apply(this,arguments)}(c,l);p.updateTokensAndExpiration(m,v,Number(C))})()}updateTokensAndExpiration(c,l,p){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,l){const{refreshToken:p,accessToken:m,expirationTime:v}=l,C=new M;return p&&(re("string"==typeof p,"internal-error",{appName:c}),C.refreshToken=p),m&&(re("string"==typeof m,"internal-error",{appName:c}),C.accessToken=m),v&&(re("number"==typeof v,"internal-error",{appName:c}),C.expirationTime=v),C}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new M,this.toJSON())}_performRefresh(){return sn("not implemented")}}function H(h,c){re("string"==typeof h||typeof h>"u","internal-error",{appName:c})}class xe{constructor(c){var{uid:l,auth:p,stsTokenManager:m}=c,v=(0,rn._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=p,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new ri(v.createdAt||void 0,v.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,w.Z)(function*(){const p=yield Vr(l,l.stsTokenManager.getToken(l.auth,c));return re(p,l.auth,"internal-error"),l.accessToken!==p&&(l.accessToken=p,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),p})()}getIdTokenResult(c){return function Ji(h){return $n.apply(this,arguments)}(this,c)}reload(){return function Xc(h){return ga.apply(this,arguments)}(this)}_assign(c){this!==c&&(re(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new xe(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var p=this;return(0,w.Z)(function*(){let m=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),m=!0),l&&(yield Tr(p)),yield p.auth._persistUserIfCurrent(p),m&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,w.Z)(function*(){if((0,Ce._isFirebaseServerApp)(c.auth.app))return Promise.reject(Oe(c.auth));const l=yield c.getIdToken();return yield Vr(c,function ms(h,c){return Io.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var p,m,v,C,P,$,de,we;const Te=null!==(p=l.displayName)&&void 0!==p?p:void 0,qt=null!==(m=l.email)&&void 0!==m?m:void 0,Di=null!==(v=l.phoneNumber)&&void 0!==v?v:void 0,Ul=null!==(C=l.photoURL)&&void 0!==C?C:void 0,Of=null!==(P=l.tenantId)&&void 0!==P?P:void 0,B_=null!==($=l._redirectEventId)&&void 0!==$?$:void 0,kf=null!==(de=l.createdAt)&&void 0!==de?de:void 0,xw=null!==(we=l.lastLoginAt)&&void 0!==we?we:void 0,{uid:Ff,emailVerified:j_,isAnonymous:Bl,providerData:$_,stsTokenManager:Ow}=l;re(Ff&&Ow,c,"internal-error");const Vf=M.fromJSON(this.name,Ow);re("string"==typeof Ff,c,"internal-error"),H(Te,c.name),H(qt,c.name),re("boolean"==typeof j_,c,"internal-error"),re("boolean"==typeof Bl,c,"internal-error"),H(Di,c.name),H(Ul,c.name),H(Of,c.name),H(B_,c.name),H(kf,c.name),H(xw,c.name);const H_=new xe({uid:Ff,auth:c,email:qt,emailVerified:j_,displayName:Te,isAnonymous:Bl,photoURL:Ul,phoneNumber:Di,tenantId:Of,stsTokenManager:Vf,createdAt:kf,lastLoginAt:xw});return $_&&Array.isArray($_)&&(H_.providerData=$_.map(ER=>Object.assign({},ER))),B_&&(H_._redirectEventId=B_),H_}static _fromIdTokenResponse(c,l,p=!1){return(0,w.Z)(function*(){const m=new M;m.updateFromServerResponse(l);const v=new xe({uid:l.localId,auth:c,stsTokenManager:m,isAnonymous:p});return yield Tr(v),v})()}static _fromGetAccountInfoResponse(c,l,p){return(0,w.Z)(function*(){const m=l.users[0];re(void 0!==m.localId,"internal-error");const v=void 0!==m.providerUserInfo?vs(m.providerUserInfo):[],C=!(m.email&&m.passwordHash||v?.length),P=new M;P.updateFromIdToken(p);const $=new xe({uid:m.localId,auth:c,stsTokenManager:P,isAnonymous:C}),de={uid:m.localId,displayName:m.displayName||null,photoURL:m.photoUrl||null,email:m.email||null,emailVerified:m.emailVerified||!1,phoneNumber:m.phoneNumber||null,tenantId:m.tenantId||null,providerData:v,metadata:new ri(m.createdAt,m.lastLoginAt),isAnonymous:!(m.email&&m.passwordHash||v?.length)};return Object.assign($,de),$})()}}const Dt=new Map;function Ge(h){Wt(h instanceof Function,"Expected a class definition");let c=Dt.get(h);return c?(Wt(c instanceof h,"Instance stored in cache mismatched with class"),c):(c=new h,Dt.set(h,c),c)}const qn=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(l,p){var m=this;return(0,w.Z)(function*(){m.storage[l]=p})()}_get(l){var p=this;return(0,w.Z)(function*(){const m=p.storage[l];return void 0===m?null:m})()}_remove(l){var p=this;return(0,w.Z)(function*(){delete p.storage[l]})()}_addListener(l,p){}_removeListener(l,p){}}return h.type="NONE",h})();function Ie(h,c,l){return`firebase:${h}:${c}:${l}`}class pn{constructor(c,l,p){this.persistence=c,this.auth=l,this.userKey=p;const{config:m,name:v}=this.auth;this.fullUserKey=Ie(this.userKey,m.apiKey,v),this.fullPersistenceKey=Ie("persistence",m.apiKey,v),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,w.Z)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?xe._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,w.Z)(function*(){if(l.persistence===c)return;const p=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,p?l.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,p="authUser"){return(0,w.Z)(function*(){if(!l.length)return new pn(Ge(qn),c,p);const m=(yield Promise.all(l.map(function(){var de=(0,w.Z)(function*(we){if(yield we._isAvailable())return we});return function(we){return de.apply(this,arguments)}}()))).filter(de=>de);let v=m[0]||Ge(qn);const C=Ie(p,c.config.apiKey,c.name);let P=null;for(const de of l)try{const we=yield de._get(C);if(we){const Te=xe._fromJSON(c,we);de!==v&&(P=Te),v=de;break}}catch{}const $=m.filter(de=>de._shouldAllowMigration);return v._shouldAllowMigration&&$.length?(v=$[0],P&&(yield v._set(C,P.toJSON())),yield Promise.all(l.map(function(){var de=(0,w.Z)(function*(we){if(we!==v)try{yield we._remove(C)}catch{}});return function(we){return de.apply(this,arguments)}}())),new pn(v,c,p)):new pn(v,c,p)})()}}function Mt(h){const c=h.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Ve(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(js(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(Co(c))return"Blackberry";if(Ah(c))return"Webos";if(Nu(c))return"Safari";if((c.includes("chrome/")||Ct(c))&&!c.includes("edge/"))return"Chrome";if(Es(c))return"Android";{const p=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function js(h=(0,B.z$)()){return/firefox\//i.test(h)}function Nu(h=(0,B.z$)()){const c=h.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Ct(h=(0,B.z$)()){return/crios\//i.test(h)}function Ve(h=(0,B.z$)()){return/iemobile/i.test(h)}function Es(h=(0,B.z$)()){return/android/i.test(h)}function Co(h=(0,B.z$)()){return/blackberry/i.test(h)}function Ah(h=(0,B.z$)()){return/webos/i.test(h)}function O(h=(0,B.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function ge(h=(0,B.z$)()){return O(h)||Es(h)||Ah(h)||Co(h)||/windows phone/i.test(h)||Ve(h)}function rt(h,c=[]){let l;switch(h){case"Browser":l=Mt((0,B.z$)());break;case"Worker":l=`${Mt((0,B.z$)())}-${h}`;break;default:l=h}const p=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Ce.SDK_VERSION}/${p}`}class Jt{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const p=v=>new Promise((C,P)=>{try{C(c(v))}catch($){P($)}});p.onAbort=l,this.queue.push(p);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,w.Z)(function*(){if(l.auth.currentUser===c)return;const p=[];try{for(const m of l.queue)yield m(c),m.onAbort&&p.push(m.onAbort)}catch(m){p.reverse();for(const v of p)try{v()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function Nt(){return(Nt=(0,w.Z)(function*(h,c={}){return oe(h,"GET","/v2/passwordPolicy",j(h,c))})).apply(this,arguments)}class bh{constructor(c){var l,p,m,v;const C=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=C.minPasswordLength)&&void 0!==l?l:6,C.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=C.maxPasswordLength),void 0!==C.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=C.containsLowercaseCharacter),void 0!==C.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=C.containsUppercaseCharacter),void 0!==C.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=C.containsNumericCharacter),void 0!==C.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=C.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(v=c.forceUpgradeOnSignin)&&void 0!==v&&v,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,p,m,v,C,P;const $={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,$),this.validatePasswordCharacterOptions(c,$),$.isValid&&($.isValid=null===(l=$.meetsMinPasswordLength)||void 0===l||l),$.isValid&&($.isValid=null===(p=$.meetsMaxPasswordLength)||void 0===p||p),$.isValid&&($.isValid=null===(m=$.containsLowercaseLetter)||void 0===m||m),$.isValid&&($.isValid=null===(v=$.containsUppercaseLetter)||void 0===v||v),$.isValid&&($.isValid=null===(C=$.containsNumericCharacter)||void 0===C||C),$.isValid&&($.isValid=null===(P=$.containsNonAlphanumericCharacter)||void 0===P||P),$}validatePasswordLengthOptions(c,l){const p=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;p&&(l.meetsMinPasswordLength=c.length>=p),m&&(l.meetsMaxPasswordLength=c.length<=m)}validatePasswordCharacterOptions(c,l){let p;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let m=0;m<c.length;m++)p=c.charAt(m),this.updatePasswordCharacterOptionsStatuses(l,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,l,p,m,v){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=v))}}class zS{constructor(c,l,p,m){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=p,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new MI(this),this.idTokenSubscription=new MI(this),this.beforeStateQueue=new Jt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=He,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(c,l){var p=this;return l&&(this._popupRedirectResolver=Ge(l)),this._initializationPromise=this.queue((0,w.Z)(function*(){var m,v;if(!p._deleted&&(p.persistenceManager=yield pn.create(p,c),!p._deleted)){if(null!==(m=p._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(l),p.lastNotifiedUid=(null===(v=p.currentUser)||void 0===v?void 0:v.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,w.Z)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUserFromIdToken(c){var l=this;return(0,w.Z)(function*(){try{const p=yield Oi(l,{idToken:c}),m=yield xe._fromGetAccountInfoResponse(l,p,c);yield l.directlySetCurrentUser(m)}catch(p){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",p),yield l.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var l=this;return(0,w.Z)(function*(){var p;if((0,Ce._isFirebaseServerApp)(l.app)){const P=l.app.settings.authIdToken;return P?new Promise($=>{setTimeout(()=>l.initializeCurrentUserFromIdToken(P).then($,$))}):l.directlySetCurrentUser(null)}const m=yield l.assertedPersistence.getCurrentUser();let v=m,C=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const P=null===(p=l.redirectUser)||void 0===p?void 0:p._redirectEventId,$=v?._redirectEventId,de=yield l.tryRedirectSignIn(c);(!P||P===$)&&de?.user&&(v=de.user,C=!0)}if(!v)return l.directlySetCurrentUser(null);if(!v._redirectEventId){if(C)try{yield l.beforeStateQueue.runMiddleware(v)}catch(P){v=m,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(P))}return v?l.reloadAndSetCurrentUserOrClear(v):l.directlySetCurrentUser(null)}return re(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===v._redirectEventId?l.directlySetCurrentUser(v):l.reloadAndSetCurrentUserOrClear(v)})()}tryRedirectSignIn(c){var l=this;return(0,w.Z)(function*(){let p=null;try{p=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,w.Z)(function*(){try{yield Tr(c)}catch(p){if("auth/network-request-failed"!==p?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function ha(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var c=this;return(0,w.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,w.Z)(function*(){if((0,Ce._isFirebaseServerApp)(l.app))return Promise.reject(Oe(l));const p=c?(0,B.m9)(c):null;return p&&re(p.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(p&&p._clone(l))})()}_updateCurrentUser(c,l=!1){var p=this;return(0,w.Z)(function*(){if(!p._deleted)return c&&re(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),l||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,w.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,w.Z)(function*(){return(0,Ce._isFirebaseServerApp)(c.app)?Promise.reject(Oe(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var l=this;return(0,Ce._isFirebaseServerApp)(this.app)?Promise.reject(Oe(this)):this.queue((0,w.Z)(function*(){yield l.assertedPersistence.setPersistence(Ge(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,w.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const p=l._getPasswordPolicyInternal();return p.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,w.Z)(function*(){const l=yield function Bt(h){return Nt.apply(this,arguments)}(c),p=new bh(l);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new B.LL("auth","Firebase",c())}onAuthStateChanged(c,l,p){return this.registerStateListener(this.authStateSubscription,c,l,p)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,p){return this.registerStateListener(this.idTokenSubscription,c,l,p)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,w.Z)(function*(){if(l.currentUser){const p=yield l.currentUser.getIdToken(),m={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=l.tenantId&&(m.tenantId=l.tenantId),yield function S(h,c){return Q.apply(this,arguments)}(l,m)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var p=this;return(0,w.Z)(function*(){const m=yield p.getOrInitRedirectPersistenceManager(l);return null===c?m.removeCurrentUser():m.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,w.Z)(function*(){if(!l.redirectPersistenceManager){const p=c&&Ge(c)||l._popupRedirectResolver;re(p,l,"argument-error"),l.redirectPersistenceManager=yield pn.create(l,[Ge(p._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,w.Z)(function*(){var p,m;return l._isInitialized&&(yield l.queue((0,w.Z)(function*(){}))),(null===(p=l._currentUser)||void 0===p?void 0:p._redirectEventId)===c?l._currentUser:(null===(m=l.redirectUser)||void 0===m?void 0:m._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,w.Z)(function*(){if(c===l.currentUser)return l.queue((0,w.Z)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,p,m){if(this._deleted)return()=>{};const v="function"==typeof l?l:l.next.bind(l);let C=!1;const P=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(P,this,"internal-error"),P.then(()=>{C||v(this.currentUser)}),"function"==typeof l){const $=c.addObserver(l,p,m);return()=>{C=!0,$()}}{const $=c.addObserver(l);return()=>{C=!0,$()}}}directlySetCurrentUser(c){var l=this;return(0,w.Z)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=rt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,w.Z)(function*(){var l;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const m=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();m&&(p["X-Firebase-Client"]=m);const v=yield c._getAppCheckToken();return v&&(p["X-Firebase-AppCheck"]=v),p})()}_getAppCheckToken(){var c=this;return(0,w.Z)(function*(){var l;const p=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return p?.error&&function Xn(h,...c){Jn.logLevel<=mt.in.WARN&&Jn.warn(`Auth (${Ce.SDK_VERSION}): ${h}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function wt(h){return(0,B.m9)(h)}class MI{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,B.ne)(l=>this.observer=l)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let el={loadJS:()=>(0,w.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hm(h){return el.loadJS(h)}function OI(h){return`__${h}${Math.floor(1e6*Math.random())}`}class kI{constructor(c){this.type="recaptcha-enterprise",this.auth=wt(c)}verify(c="verify",l=!1){var p=this;return(0,w.Z)(function*(){function v(){return v=(0,w.Z)(function*(P){if(!l){if(null==P.tenantId&&null!=P._agentRecaptchaConfig)return P._agentRecaptchaConfig.siteKey;if(null!=P.tenantId&&void 0!==P._tenantRecaptchaConfigs[P.tenantId])return P._tenantRecaptchaConfigs[P.tenantId].siteKey}return new Promise(function(){var $=(0,w.Z)(function*(de,we){Ru(P,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Te=>{if(void 0!==Te.recaptchaKey){const qt=new fa(Te);return null==P.tenantId?P._agentRecaptchaConfig=qt:P._tenantRecaptchaConfigs[P.tenantId]=qt,de(qt.siteKey)}we(new Error("recaptcha Enterprise site key undefined"))}).catch(Te=>{we(Te)})});return function(de,we){return $.apply(this,arguments)}}())}),v.apply(this,arguments)}function C(P,$,de){const we=window.grecaptcha;ni(we)?we.enterprise.ready(()=>{we.enterprise.execute(P,{action:c}).then(Te=>{$(Te)}).catch(()=>{$("NO_RECAPTCHA")})}):de(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((P,$)=>{(function m(P){return v.apply(this,arguments)})(p.auth).then(de=>{if(!l&&ni(window.grecaptcha))C(de,P,$);else{if(typeof window>"u")return void $(new Error("RecaptchaVerifier is only supported in browser"));let we=function WS(){return el.recaptchaEnterpriseScript}();0!==we.length&&(we+=de),hm(we).then(()=>{C(de,P,$)}).catch(Te=>{$(Te)})}}).catch(de=>{$(de)})})})()}}function FI(h,c,l){return fm.apply(this,arguments)}function fm(){return(fm=(0,w.Z)(function*(h,c,l,p=!1){const m=new kI(h);let v;try{v=yield m.verify(l)}catch{v=yield m.verify(l,!0)}const C=Object.assign({},c);return Object.assign(C,p?{captchaResp:v}:{captchaResponse:v}),Object.assign(C,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(C,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),C})).apply(this,arguments)}function ve(h,c,l,p){return pm.apply(this,arguments)}function pm(){return pm=(0,w.Z)(function*(h,c,l,p){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=yield FI(h,c,l,"getOobCode"===l);return p(h,v)}return p(h,c).catch(function(){var v=(0,w.Z)(function*(C){if("auth/missing-recaptcha-token"===C.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const P=yield FI(h,c,l,"getOobCode"===l);return p(h,P)}return Promise.reject(C)});return function(C){return v.apply(this,arguments)}}())}),pm.apply(this,arguments)}function xu(h){const c=h.indexOf(":");return c<0?"":h.substr(0,c+1)}function nl(h){if(!h)return null;const c=Number(h);return isNaN(c)?null:c}class va{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return sn("not implemented")}_getIdTokenResponse(c){return sn("not implemented")}_linkToIdToken(c,l){return sn("not implemented")}_getReauthenticationResolver(c){return sn("not implemented")}}function ot(h,c){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,w.Z)(function*(h,c){return oe(h,"POST","/v1/accounts:resetPassword",j(h,c))})).apply(this,arguments)}function cr(){return(cr=(0,w.Z)(function*(h,c){return oe(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function vm(h,c){return Em.apply(this,arguments)}function Em(){return(Em=(0,w.Z)(function*(h,c){return oe(h,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Im(){return(Im=(0,w.Z)(function*(h,c){return oe(h,"POST","/v1/accounts:update",j(h,c))})).apply(this,arguments)}function KS(h,c){return fe.apply(this,arguments)}function fe(){return(fe=(0,w.Z)(function*(h,c){return nt(h,"POST","/v1/accounts:signInWithPassword",j(h,c))})).apply(this,arguments)}function Ea(h,c){return ku.apply(this,arguments)}function ku(){return(ku=(0,w.Z)(function*(h,c){return oe(h,"POST","/v1/accounts:sendOobCode",j(h,c))})).apply(this,arguments)}function Fu(){return(Fu=(0,w.Z)(function*(h,c){return Ea(h,c)})).apply(this,arguments)}function LI(h,c){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,w.Z)(function*(h,c){return Ea(h,c)})).apply(this,arguments)}function ZS(h,c){return Tm.apply(this,arguments)}function Tm(){return(Tm=(0,w.Z)(function*(h,c){return Ea(h,c)})).apply(this,arguments)}function Cm(){return(Cm=(0,w.Z)(function*(h,c){return Ea(h,c)})).apply(this,arguments)}function Do(){return(Do=(0,w.Z)(function*(h,c){return nt(h,"POST","/v1/accounts:signInWithEmailLink",j(h,c))})).apply(this,arguments)}function Ia(){return(Ia=(0,w.Z)(function*(h,c){return nt(h,"POST","/v1/accounts:signInWithEmailLink",j(h,c))})).apply(this,arguments)}class Lu extends va{constructor(c,l,p,m=null){super("password",p),this._email=c,this._password=l,this._tenantId=m}static _fromEmailAndPassword(c,l){return new Lu(c,l,"password")}static _fromEmailAndCode(c,l,p=null){return new Lu(c,l,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,w.Z)(function*(){switch(l.signInMethod){case"password":return ve(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",KS);case"emailLink":return function YS(h,c){return Do.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:It(c,"internal-error")}})()}_linkToIdToken(c,l){var p=this;return(0,w.Z)(function*(){switch(p.signInMethod){case"password":return ve(c,{idToken:l,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vm);case"emailLink":return function Sh(h,c){return Ia.apply(this,arguments)}(c,{idToken:l,email:p._email,oobCode:p._password});default:It(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Is(h,c){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,w.Z)(function*(h,c){return nt(h,"POST","/v1/accounts:signInWithIdp",j(h,c))})).apply(this,arguments)}class Dr extends va{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Dr(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):It("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m}=l,v=(0,rn._T)(l,["providerId","signInMethod"]);if(!p||!m)return null;const C=new Dr(p,m);return C.idToken=v.idToken||void 0,C.accessToken=v.accessToken||void 0,C.secret=v.secret,C.nonce=v.nonce,C.pendingToken=v.pendingToken||null,C}_getIdTokenResponse(c){return Is(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,Is(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Is(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,B.xO)(l)}return c}}function Xi(){return(Xi=(0,w.Z)(function*(h,c){return oe(h,"POST","/v1/accounts:sendVerificationCode",j(h,c))})).apply(this,arguments)}function ee(){return(ee=(0,w.Z)(function*(h,c){return nt(h,"POST","/v1/accounts:signInWithPhoneNumber",j(h,c))})).apply(this,arguments)}function Ee(){return(Ee=(0,w.Z)(function*(h,c){const l=yield nt(h,"POST","/v1/accounts:signInWithPhoneNumber",j(h,c));if(l.temporaryProof)throw jn(h,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const rl={USER_NOT_FOUND:"user-not-found"};function Ao(){return(Ao=(0,w.Z)(function*(h,c){return nt(h,"POST","/v1/accounts:signInWithPhoneNumber",j(h,Object.assign(Object.assign({},c),{operation:"REAUTH"})),rl)})).apply(this,arguments)}class bo extends va{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new bo({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new bo({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function BI(h,c){return ee.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function Am(h,c){return Ee.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Ph(h,c){return Ao.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:p,verificationCode:m}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:p,code:m}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}=c;return p||l||m||v?new bo({verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}):null}}class ii{constructor(c){var l,p,m,v,C,P;const $=(0,B.zd)((0,B.pd)(c)),de=null!==(l=$.apiKey)&&void 0!==l?l:null,we=null!==(p=$.oobCode)&&void 0!==p?p:null,Te=function jI(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=$.mode)&&void 0!==m?m:null);re(de&&we&&Te,"argument-error"),this.apiKey=de,this.operation=Te,this.code=we,this.continueUrl=null!==(v=$.continueUrl)&&void 0!==v?v:null,this.languageCode=null!==(C=$.languageCode)&&void 0!==C?C:null,this.tenantId=null!==(P=$.tenantId)&&void 0!==P?P:null}static parseLink(c){const l=function $I(h){const c=(0,B.zd)((0,B.pd)(h)).link,l=c?(0,B.zd)((0,B.pd)(c)).deep_link_id:null,p=(0,B.zd)((0,B.pd)(h)).deep_link_id;return(p?(0,B.zd)((0,B.pd)(p)).link:null)||p||l||c||h}(c);try{return new ii(l)}catch{return null}}}let Lr=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(l,p){return Lu._fromEmailAndPassword(l,p)}static credentialWithLink(l,p){const m=ii.parseLink(p);return re(m,"argument-error"),Lu._fromEmailAndCode(l,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class zn{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class ct extends zn{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class ws extends ct{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return re("providerId"in l&&"signInMethod"in l,"argument-error"),Dr._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return re(c.idToken||c.accessToken,"argument-error"),Dr._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return ws.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return ws.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:p,oauthTokenSecret:m,pendingToken:v,nonce:C,providerId:P}=c;if(!p&&!m&&!l&&!v||!P)return null;try{return new ws(P)._credential({idToken:l,accessToken:p,nonce:C,pendingToken:v})}catch{return null}}}let il=(()=>{class h extends ct{constructor(){super("facebook.com")}static credential(l){return Dr._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),sl=(()=>{class h extends ct{constructor(){super("google.com"),this.addScope("profile")}static credential(l,p){return Dr._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:p,oauthAccessToken:m}=l;if(!p&&!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),Nh=(()=>{class h extends ct{constructor(){super("github.com")}static credential(l){return Dr._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class es extends va{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return Is(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,Is(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Is(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m,pendingToken:v}=l;return p&&m&&v&&p===m?new es(p,v):null}static _create(c,l){return new es(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Uu extends zn{constructor(c){re(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Uu.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Uu.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=es.fromJSON(c);return re(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:p}=c;if(!l||!p)return null;try{return es._create(p,l)}catch{return null}}}let ol=(()=>{class h extends ct{constructor(){super("twitter.com")}static credential(l,p){return Dr._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:p,oauthTokenSecret:m}=l;if(!p||!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function xh(h,c){return al.apply(this,arguments)}function al(){return(al=(0,w.Z)(function*(h,c){return nt(h,"POST","/v1/accounts:signUp",j(h,c))})).apply(this,arguments)}class lr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,p,m=!1){return(0,w.Z)(function*(){const v=yield xe._fromIdTokenResponse(c,p,m),C=Oh(p);return new lr({user:v,providerId:C,_tokenResponse:p,operationType:l})})()}static _forOperation(c,l,p){return(0,w.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const m=Oh(p);return new lr({user:c,providerId:m,_tokenResponse:p,operationType:l})})()}}function Oh(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function kh(){return(kh=(0,w.Z)(function*(h){var c;if((0,Ce._isFirebaseServerApp)(h.app))return Promise.reject(Oe(h));const l=wt(h);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new lr({user:l.currentUser,providerId:null,operationType:"signIn"});const p=yield xh(l,{returnSecureToken:!0}),m=yield lr._fromIdTokenResponse(l,"signIn",p,!0);return yield l._updateCurrentUser(m.user),m})).apply(this,arguments)}class Bu extends B.ZR{constructor(c,l,p,m){var v;super(l.code,l.message),this.operationType=p,this.user=m,Object.setPrototypeOf(this,Bu.prototype),this.customData={appName:c.name,tenantId:null!==(v=c.tenantId)&&void 0!==v?v:void 0,_serverResponse:l.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,l,p,m){return new Bu(c,l,p,m)}}function Rm(h,c,l,p){return("reauthenticate"===c?l._getReauthenticationResolver(h):l._getIdTokenResponse(h)).catch(v=>{throw"auth/multi-factor-auth-required"===v.code?Bu._fromErrorAndOperation(h,v,c,p):v})}function Pm(h){return new Set(h.map(({providerId:c})=>c).filter(c=>!!c))}function Fh(){return Fh=(0,w.Z)(function*(h,c){const l=(0,B.m9)(h);yield cl(!0,l,c);const{providerUserInfo:p}=yield function _i(h,c){return yi.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),m=Pm(p||[]);return l.providerData=l.providerData.filter(v=>m.has(v.providerId)),m.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),Fh.apply(this,arguments)}function ul(h,c){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,w.Z)(function*(h,c,l=!1){const p=yield Vr(h,c._linkToIdToken(h.auth,yield h.getIdToken()),l);return lr._forOperation(h,"link",p)})).apply(this,arguments)}function cl(h,c,l){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,w.Z)(function*(h,c,l){yield Tr(c);const m=!1===h?"provider-already-linked":"no-such-provider";re(Pm(c.providerData).has(l)===h,c.auth,m)})).apply(this,arguments)}function Mm(h,c){return ll.apply(this,arguments)}function ll(){return(ll=(0,w.Z)(function*(h,c,l=!1){const{auth:p}=h;if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(Oe(p));const m="reauthenticate";try{const v=yield Vr(h,Rm(p,m,c,h),l);re(v.idToken,p,"internal-error");const C=wo(v.idToken);re(C,p,"internal-error");const{sub:P}=C;return re(h.uid===P,p,"user-mismatch"),lr._forOperation(h,m,v)}catch(v){throw"auth/user-not-found"===v?.code&&It(p,"user-mismatch"),v}})).apply(this,arguments)}function Nm(h,c){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,w.Z)(function*(h,c,l=!1){if((0,Ce._isFirebaseServerApp)(h.app))return Promise.reject(Oe(h));const p="signIn",m=yield Rm(h,p,c),v=yield lr._fromIdTokenResponse(h,p,m);return l||(yield h._updateCurrentUser(v.user)),v})).apply(this,arguments)}function dl(h,c){return wn.apply(this,arguments)}function wn(){return(wn=(0,w.Z)(function*(h,c){return Nm(wt(h),c)})).apply(this,arguments)}function xm(h,c){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,w.Z)(function*(h,c){const l=(0,B.m9)(h);return yield cl(!1,l,c.providerId),ul(l,c)})).apply(this,arguments)}function Om(h,c){return dr.apply(this,arguments)}function dr(){return(dr=(0,w.Z)(function*(h,c){return Mm((0,B.m9)(h),c)})).apply(this,arguments)}function hl(){return(hl=(0,w.Z)(function*(h,c){return nt(h,"POST","/v1/accounts:signInWithCustomToken",j(h,c))})).apply(this,arguments)}function hr(){return hr=(0,w.Z)(function*(h,c){if((0,Ce._isFirebaseServerApp)(h.app))return Promise.reject(Oe(h));const l=wt(h),p=yield function HI(h,c){return hl.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),m=yield lr._fromIdTokenResponse(l,"signIn",p);return yield l._updateCurrentUser(m.user),m}),hr.apply(this,arguments)}class at{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?On._fromServerResponse(c,l):"totpInfo"in l?er._fromServerResponse(c,l):It(c,"internal-error")}}class On extends at{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new On(l)}}class er extends at{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new er(l)}}function Cs(h,c,l){var p;re((null===(p=l.url)||void 0===p?void 0:p.length)>0,h,"invalid-continue-uri"),re(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(re(l.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(re(l.android.packageName.length>0,h,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function Ar(h){return fl.apply(this,arguments)}function fl(){return(fl=(0,w.Z)(function*(h){const c=wt(h);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function wa(){return(wa=(0,w.Z)(function*(h,c,l){const p=wt(h),m={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&Cs(p,m,l),yield ve(p,m,"getOobCode",LI)})).apply(this,arguments)}function jh(){return jh=(0,w.Z)(function*(h,c,l){yield ot((0,B.m9)(h),{oobCode:c,newPassword:l}).catch(function(){var p=(0,w.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&Ar(h),m});return function(m){return p.apply(this,arguments)}}())}),jh.apply(this,arguments)}function me(){return me=(0,w.Z)(function*(h,c){yield function jt(h,c){return Im.apply(this,arguments)}((0,B.m9)(h),{oobCode:c})}),me.apply(this,arguments)}function Ke(h,c){return $t.apply(this,arguments)}function $t(){return($t=(0,w.Z)(function*(h,c){const l=(0,B.m9)(h),p=yield ot(l,{oobCode:c}),m=p.requestType;switch(re(m,l,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(p.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(p.mfaInfo,l,"internal-error");default:re(p.email,l,"internal-error")}let v=null;return p.mfaInfo&&(v=at._fromServerResponse(wt(l),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:v},operation:m}})).apply(this,arguments)}function So(){return(So=(0,w.Z)(function*(h,c){const{data:l}=yield Ke((0,B.m9)(h),c);return l.email})).apply(this,arguments)}function $s(){return($s=(0,w.Z)(function*(h,c,l){if((0,Ce._isFirebaseServerApp)(h.app))return Promise.reject(Oe(h));const p=wt(h),C=yield ve(p,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xh).catch($=>{throw"auth/password-does-not-meet-requirements"===$.code&&Ar(h),$}),P=yield lr._fromIdTokenResponse(p,"signIn",C);return yield p._updateCurrentUser(P.user),P})).apply(this,arguments)}function qs(){return(qs=(0,w.Z)(function*(h,c,l){const p=wt(h),m={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function v(C,P){re(P.handleCodeInApp,p,"argument-error"),P&&Cs(p,C,P)})(m,l),yield ve(p,m,"getOobCode",ZS)})).apply(this,arguments)}function pl(){return(pl=(0,w.Z)(function*(h,c,l){if((0,Ce._isFirebaseServerApp)(h.app))return Promise.reject(Oe(h));const p=(0,B.m9)(h),m=Lr.credentialWithLink(c,l||ti());return re(m._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),dl(p,m)})).apply(this,arguments)}function on(){return(on=(0,w.Z)(function*(h,c){return oe(h,"POST","/v1/accounts:createAuthUri",j(h,c))})).apply(this,arguments)}function zs(){return zs=(0,w.Z)(function*(h,c){const p={identifier:c,continueUri:mi()?ti():"http://localhost"},{signinMethods:m}=yield function Ta(h,c){return on.apply(this,arguments)}((0,B.m9)(h),p);return m||[]}),zs.apply(this,arguments)}function Ro(){return Ro=(0,w.Z)(function*(h,c){const l=(0,B.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};c&&Cs(l.auth,m,c);const{email:v}=yield function wm(h,c){return Fu.apply(this,arguments)}(l.auth,m);v!==h.email&&(yield h.reload())}),Ro.apply(this,arguments)}function ns(){return ns=(0,w.Z)(function*(h,c,l){const p=(0,B.m9)(h),v={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:c};l&&Cs(p.auth,v,l);const{email:C}=yield function QS(h,c){return Cm.apply(this,arguments)}(p.auth,v);C!==h.email&&(yield h.reload())}),ns.apply(this,arguments)}function Po(){return(Po=(0,w.Z)(function*(h,c){return oe(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function it(){return it=(0,w.Z)(function*(h,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const p=(0,B.m9)(h),v={idToken:yield p.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},C=yield Vr(p,function Ds(h,c){return Po.apply(this,arguments)}(p.auth,v));p.displayName=C.displayName||null,p.photoURL=C.photoUrl||null;const P=p.providerData.find(({providerId:$})=>"password"===$);P&&(P.displayName=p.displayName,P.photoURL=p.photoURL),yield p._updateTokensIfNecessary(C)}),it.apply(this,arguments)}function Hh(h,c,l){return Ei.apply(this,arguments)}function Ei(){return Ei=(0,w.Z)(function*(h,c,l){const{auth:p}=h,v={idToken:yield h.getIdToken(),returnSecureToken:!0};c&&(v.email=c),l&&(v.password=l);const C=yield Vr(h,function ym(h,c){return cr.apply(this,arguments)}(p,v));yield h._updateTokensIfNecessary(C,!0)}),Ei.apply(this,arguments)}class Vi{constructor(c,l,p={}){this.isNewUser=c,this.providerId=l,this.profile=p}}class Ca extends Vi{constructor(c,l,p,m){super(c,l,p),this.username=m}}class tr extends Vi{constructor(c,l){super(c,"facebook.com",l)}}class XS extends Ca{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class Ur extends Vi{constructor(c,l){super(c,"google.com",l)}}class br extends Ca{constructor(c,l,p){super(c,"twitter.com",l,p)}}function qh(h){const{user:c,_tokenResponse:l}=h;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function gl(h){var c,l;if(!h)return null;const{providerId:p}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},v=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!p&&h?.idToken){const C=null===(l=null===(c=wo(h.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(C)return new Vi(v,"anonymous"!==C&&"custom"!==C?C:null)}if(!p)return null;switch(p){case"facebook.com":return new tr(v,m);case"github.com":return new XS(v,m);case"google.com":return new Ur(v,m);case"twitter.com":return new br(v,m,h.screenName||null);case"custom":case"anonymous":return new Vi(v,null);default:return new Vi(v,p,m)}}(l)}class Aa{constructor(c,l,p){this.type=c,this.credential=l,this.user=p}static _fromIdtoken(c,l){return new Aa("enroll",c,l)}static _fromMfaPendingCredential(c){return new Aa("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,p;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return Aa._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return Aa._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Lm{constructor(c,l,p){this.session=c,this.hints=l,this.signInResolver=p}static _fromError(c,l){const p=wt(c),m=l.customData._serverResponse,v=(m.mfaInfo||[]).map(P=>at._fromServerResponse(p,P));re(m.mfaPendingCredential,p,"internal-error");const C=Aa._fromMfaPendingCredential(m.mfaPendingCredential);return new Lm(C,v,function(){var P=(0,w.Z)(function*($){const de=yield $._process(p,C);delete m.mfaInfo,delete m.mfaPendingCredential;const we=Object.assign(Object.assign({},m),{idToken:de.idToken,refreshToken:de.refreshToken});switch(l.operationType){case"signIn":const Te=yield lr._fromIdTokenResponse(p,l.operationType,we);return yield p._updateCurrentUser(Te.user),Te;case"reauthenticate":return re(l.user,p,"internal-error"),lr._forOperation(l.user,l.operationType,we);default:It(p,"internal-error")}});return function($){return P.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,w.Z)(function*(){return l.signInResolver(c)})()}}class ml{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(p=>at._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new ml(c)}getSession(){var c=this;return(0,w.Z)(function*(){return Aa._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var p=this;return(0,w.Z)(function*(){const m=c,v=yield p.getSession(),C=yield Vr(p.user,m._process(p.user.auth,v,l));return yield p.user._updateTokensIfNecessary(C),p.user.reload()})()}unenroll(c){var l=this;return(0,w.Z)(function*(){const p="string"==typeof c?c:c.uid,m=yield l.user.getIdToken();try{const v=yield Vr(l.user,function oR(h,c){return oe(h,"POST","/v2/accounts/mfaEnrollment:withdraw",j(h,c))}(l.user.auth,{idToken:m,mfaEnrollmentId:p}));l.enrolledFactors=l.enrolledFactors.filter(({uid:C})=>C!==p),yield l.user._updateTokensIfNecessary(v),yield l.user.reload()}catch(v){throw v}})()}}const _l=new WeakMap,Gh="__sak";class WI{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(Gh,"1"),this.storage.removeItem(Gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const bn=(()=>{class h extends WI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,p)=>this.onStorageEvent(l,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Mo(){const h=(0,B.z$)();return Nu(h)||O(h)}()&&function We(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ge(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const p of Object.keys(this.listeners)){const m=this.storage.getItem(p),v=this.localCache[p];m!==v&&l(p,v,m)}}onStorageEvent(l,p=!1){if(!l.key)return void this.forAllChangedKeys((P,$,de)=>{this.notifyListeners(P,de)});const m=l.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const P=this.storage.getItem(m);if(l.newValue!==P)null!==l.newValue?this.storage.setItem(m,l.newValue):this.storage.removeItem(m);else if(this.localCache[m]===l.newValue&&!p)return}const v=()=>{const P=this.storage.getItem(m);!p&&this.localCache[m]===P||this.notifyListeners(m,P)},C=this.storage.getItem(m);!function Y(){return(0,B.w1)()&&10===document.documentMode}()||C===l.newValue||l.newValue===l.oldValue?v():setTimeout(v,10)}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,p,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:p,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,p){var m=()=>super._set,v=this;return(0,w.Z)(function*(){yield m().call(v,l,p),v.localCache[l]=JSON.stringify(p)})()}_get(l){var p=()=>super._get,m=this;return(0,w.Z)(function*(){const v=yield p().call(m,l);return m.localCache[l]=JSON.stringify(v),v})()}_remove(l){var p=()=>super._remove,m=this;return(0,w.Z)(function*(){yield p().call(m,l),delete m.localCache[l]})()}}return h.type="LOCAL",h})(),kn=(()=>{class h extends WI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,p){}_removeListener(l,p){}}return h.type="SESSION",h})();let Bm=(()=>{class h{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const p=this.receivers.find(v=>v.isListeningto(l));if(p)return p;const m=new h(l);return this.receivers.push(m),m}isListeningto(l){return this.eventTarget===l}handleEvent(l){var p=this;return(0,w.Z)(function*(){const m=l,{eventId:v,eventType:C,data:P}=m.data,$=p.handlersMap[C];if(!$?.size)return;m.ports[0].postMessage({status:"ack",eventId:v,eventType:C});const de=Array.from($).map(function(){var Te=(0,w.Z)(function*(qt){return qt(m.origin,P)});return function(qt){return Te.apply(this,arguments)}}()),we=yield function Um(h){return Promise.all(h.map(function(){var c=(0,w.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(p){return{fulfilled:!1,reason:p}}});return function(l){return c.apply(this,arguments)}}()))}(de);m.ports[0].postMessage({status:"done",eventId:v,eventType:C,response:we})})()}_subscribe(l,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(p)}_unsubscribe(l,p){this.handlersMap[l]&&p&&this.handlersMap[l].delete(p),(!p||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function ba(h="",c=10){let l="";for(let p=0;p<c;p++)l+=Math.floor(10*Math.random());return h+l}class jm{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,p=50){var m=this;return(0,w.Z)(function*(){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let C,P;return new Promise(($,de)=>{const we=ba("",20);v.port1.start();const Te=setTimeout(()=>{de(new Error("unsupported_event"))},p);P={messageChannel:v,onMessage(qt){const Di=qt;if(Di.data.eventId===we)switch(Di.data.status){case"ack":clearTimeout(Te),C=setTimeout(()=>{de(new Error("timeout"))},3e3);break;case"done":clearTimeout(C),$(Di.data.response);break;default:clearTimeout(Te),clearTimeout(C),de(new Error("invalid_response"))}}},m.handlers.add(P),v.port1.addEventListener("message",P.onMessage),m.target.postMessage({eventType:c,eventId:we,data:l},[v.port2])}).finally(()=>{P&&m.removeMessageHandler(P)})})()}}function mn(){return window}function zu(){return typeof mn().WorkerGlobalScope<"u"&&"function"==typeof mn().importScripts}function yl(){return(yl=(0,w.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Gu="firebaseLocalStorageDb",As="firebaseLocalStorage",Zh="fbase_key";class vl{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function Qh(h,c){return h.transaction([As],c?"readwrite":"readonly").objectStore(As)}function Yh(){const h=indexedDB.open(Gu,1);return new Promise((c,l)=>{h.addEventListener("error",()=>{l(h.error)}),h.addEventListener("upgradeneeded",()=>{const p=h.result;try{p.createObjectStore(As,{keyPath:Zh})}catch(m){l(m)}}),h.addEventListener("success",(0,w.Z)(function*(){const p=h.result;p.objectStoreNames.contains(As)?c(p):(p.close(),yield function cR(){const h=indexedDB.deleteDatabase(Gu);return new vl(h).toPromise()}(),c(yield Yh()))}))})}function zm(h,c,l){return Gm.apply(this,arguments)}function Gm(){return(Gm=(0,w.Z)(function*(h,c,l){const p=Qh(h,!0).put({[Zh]:c,value:l});return new vl(p).toPromise()})).apply(this,arguments)}function Ku(){return(Ku=(0,w.Z)(function*(h,c){const l=Qh(h,!1).get(c),p=yield new vl(l).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Km(h,c){const l=Qh(h,!0).delete(c);return new vl(l).toPromise()}const Sa=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,w.Z)(function*(){return l.db||(l.db=yield Yh()),l.db})()}_withRetries(l){var p=this;return(0,w.Z)(function*(){let m=0;for(;;)try{const v=yield p._openDb();return yield l(v)}catch(v){if(m++>3)throw v;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,w.Z)(function*(){return zu()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,w.Z)(function*(){l.receiver=Bm._getInstance(function qm(){return zu()?self:null}()),l.receiver._subscribe("keyChanged",function(){var p=(0,w.Z)(function*(m,v){return{keyProcessed:(yield l._poll()).includes(v.key)}});return function(m,v){return p.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var p=(0,w.Z)(function*(m,v){return["keyChanged"]});return function(m,v){return p.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,w.Z)(function*(){var p,m;if(l.activeServiceWorker=yield function Kh(){return yl.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new jm(l.activeServiceWorker);const v=yield l.sender._send("ping",{},800);v&&null!==(p=v[0])&&void 0!==p&&p.fulfilled&&null!==(m=v[0])&&void 0!==m&&m.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var p=this;return(0,w.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function Hm(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:l},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const l=yield Yh();return yield zm(l,Gh,"1"),yield Km(l,Gh),!0}catch{}return!1})()}_withPendingWrite(l){var p=this;return(0,w.Z)(function*(){p.pendingWrites++;try{yield l()}finally{p.pendingWrites--}})()}_set(l,p){var m=this;return(0,w.Z)(function*(){return m._withPendingWrite((0,w.Z)(function*(){return yield m._withRetries(v=>zm(v,l,p)),m.localCache[l]=p,m.notifyServiceWorker(l)}))})()}_get(l){var p=this;return(0,w.Z)(function*(){const m=yield p._withRetries(v=>function Wm(h,c){return Ku.apply(this,arguments)}(v,l));return p.localCache[l]=m,m})()}_remove(l){var p=this;return(0,w.Z)(function*(){return p._withPendingWrite((0,w.Z)(function*(){return yield p._withRetries(m=>Km(m,l)),delete p.localCache[l],p.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,w.Z)(function*(){const p=yield l._withRetries(C=>{const P=Qh(C,!1).getAll();return new vl(P).toPromise()});if(!p)return[];if(0!==l.pendingWrites)return[];const m=[],v=new Set;if(0!==p.length)for(const{fbase_key:C,value:P}of p)v.add(C),JSON.stringify(l.localCache[C])!==JSON.stringify(P)&&(l.notifyListeners(C,P),m.push(C));for(const C of Object.keys(l.localCache))l.localCache[C]&&!v.has(C)&&(l.notifyListeners(C,null),m.push(C));return m})()}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),Zu=1e12;class YI{constructor(c){this.auth=c,this.counter=Zu,this._widgets=new Map}render(c,l){const p=this.counter;return this._widgets.set(p,new Ym(c,this.auth.name,l||{})),this.counter++,p}reset(c){var l;const p=c||Zu;null===(l=this._widgets.get(p))||void 0===l||l.delete(),this._widgets.delete(p)}getResponse(c){var l;return(null===(l=this._widgets.get(c||Zu))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,w.Z)(function*(){var p;return null===(p=l._widgets.get(c||Zu))||void 0===p||p.execute(),""})()}}class Ym{constructor(c,l,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof c?document.getElementById(c):c;re(m,"argument-error",{appName:l}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function JI(h){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<h;p++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jm=OI("rcb"),XI=new F(3e4,6e4);class Ii{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=mn().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return re(function Xm(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&Fr(mn().grecaptcha)?Promise.resolve(mn().grecaptcha):new Promise((p,m)=>{const v=mn().setTimeout(()=>{m(Rt(c,"network-request-failed"))},XI.get());mn()[Jm]=()=>{mn().clearTimeout(v),delete mn()[Jm];const P=mn().grecaptcha;if(!P||!Fr(P))return void m(Rt(c,"internal-error"));const $=P.render;P.render=(de,we)=>{const Te=$(de,we);return this.counter++,Te},this.hostLanguage=l,p(P)},hm(`${function NI(){return el.recaptchaV2Script}()}?${(0,B.xO)({onload:Jm,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(v),m(Rt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=mn().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ew{load(c){return(0,w.Z)(function*(){return new YI(c)})()}clearedOneInstance(){}}const e_="recaptcha",t_={theme:"light",type:"image"};class n_{constructor(c,l,p=Object.assign({},t_)){this.parameters=p,this.type=e_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wt(c),this.isInvisible="invisible"===this.parameters.size,re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof l?document.getElementById(l):l;re(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ew:new Ii,this.validateStartingState()}verify(){var c=this;return(0,w.Z)(function*(){c.assertNotDestroyed();const l=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(l)||new Promise(v=>{const C=P=>{P&&(c.tokenChangeListeners.delete(C),v(P))};c.tokenChangeListeners.add(C),c.isInvisible&&p.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(p=>p(l)),"function"==typeof c)c(l);else if("string"==typeof c){const p=mn()[c];"function"==typeof p&&p(l)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,w.Z)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const p=document.createElement("div");l.appendChild(p),l=p}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,w.Z)(function*(){re(mi()&&!zu(),c.auth,"internal-error"),yield function tw(){let h=null;return new Promise(c=>{"complete"!==document.readyState?(h=()=>c(),window.addEventListener("load",h)):c()}).catch(c=>{throw h&&window.removeEventListener("load",h),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function vo(h){return An.apply(this,arguments)}(c.auth);re(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qu{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=bo._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function wi(){return(wi=(0,w.Z)(function*(h,c,l){if((0,Ce._isFirebaseServerApp)(h.app))return Promise.reject(Oe(h));const p=wt(h),m=yield No(p,c,(0,B.m9)(l));return new Qu(m,v=>dl(p,v))})).apply(this,arguments)}function El(){return(El=(0,w.Z)(function*(h,c,l){const p=(0,B.m9)(h);yield cl(!1,p,"phone");const m=yield No(p.auth,c,(0,B.m9)(l));return new Qu(m,v=>xm(p,v))})).apply(this,arguments)}function Yu(){return(Yu=(0,w.Z)(function*(h,c,l){const p=(0,B.m9)(h);if((0,Ce._isFirebaseServerApp)(p.auth.app))return Promise.reject(Oe(p.auth));const m=yield No(p.auth,c,(0,B.m9)(l));return new Qu(m,v=>Om(p,v))})).apply(this,arguments)}function No(h,c,l){return pr.apply(this,arguments)}function pr(){return pr=(0,w.Z)(function*(h,c,l){var p;const m=yield l.verify();try{let v;if(re("string"==typeof m,h,"argument-error"),re(l.type===e_,h,"argument-error"),v="string"==typeof c?{phoneNumber:c}:c,"session"in v){const C=v.session;if("phoneNumber"in v)return re("enroll"===C.type,h,"internal-error"),(yield function rR(h,c){return oe(h,"POST","/v2/accounts/mfaEnrollment:start",j(h,c))}(h,{idToken:C.credential,phoneEnrollmentInfo:{phoneNumber:v.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{re("signin"===C.type,h,"internal-error");const P=(null===(p=v.multiFactorHint)||void 0===p?void 0:p.uid)||v.multiFactorUid;return re(P,h,"missing-multi-factor-info"),(yield function Zm(h,c){return oe(h,"POST","/v2/accounts/mfaSignIn:start",j(h,c))}(h,{mfaPendingCredential:C.credential,mfaEnrollmentId:P,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:C}=yield function UI(h,c){return Xi.apply(this,arguments)}(h,{phoneNumber:v.phoneNumber,recaptchaToken:m});return C}}finally{l._reset()}}),pr.apply(this,arguments)}function Il(){return(Il=(0,w.Z)(function*(h,c){const l=(0,B.m9)(h);if((0,Ce._isFirebaseServerApp)(l.auth.app))return Promise.reject(Oe(l.auth));yield ul(l,c)})).apply(this,arguments)}let is=(()=>{class h{constructor(l){this.providerId=h.PROVIDER_ID,this.auth=wt(l)}verifyPhoneNumber(l,p){return No(this.auth,l,(0,B.m9)(p))}static credential(l,p){return bo._fromVerification(l,p)}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:p,temporaryProof:m}=l;return p&&m?bo._fromTokenResponse(p,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function Fn(h,c){return c?Ge(c):(re(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class Xh extends va{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Is(c,this._buildIdpRequest())}_linkToIdToken(c,l){return Is(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return Is(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function iw(h){return Nm(h.auth,new Xh(h),h.bypassAuthState)}function sw(h){const{auth:c,user:l}=h;return re(l,c,"internal-error"),Mm(l,new Xh(h),h.bypassAuthState)}function Ws(h){return wl.apply(this,arguments)}function wl(){return(wl=(0,w.Z)(function*(h){const{auth:c,user:l}=h;return re(l,c,"internal-error"),ul(l,new Xh(h),h.bypassAuthState)})).apply(this,arguments)}class i_{constructor(c,l,p,m,v=!1){this.auth=c,this.resolver=p,this.user=m,this.bypassAuthState=v,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,w.Z)(function*(p,m){c.pendingPromise={resolve:p,reject:m};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(v){c.reject(v)}});return function(p,m){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,w.Z)(function*(){const{urlResponse:p,sessionId:m,postBody:v,tenantId:C,error:P,type:$}=c;if(P)return void l.reject(P);const de={auth:l.auth,requestUri:p,sessionId:m,tenantId:C||void 0,postBody:v||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask($)(de))}catch(we){l.reject(we)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return iw;case"linkViaPopup":case"linkViaRedirect":return Ws;case"reauthViaPopup":case"reauthViaRedirect":return sw;default:It(this.auth,"internal-error")}}resolve(c){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const s_=new F(2e3,1e4);function Tl(){return(Tl=(0,w.Z)(function*(h,c,l){if((0,Ce._isFirebaseServerApp)(h.app))return Promise.reject(Rt(h,"operation-not-supported-in-this-environment"));const p=wt(h);In(h,c,zn);const m=Fn(p,l);return new ef(p,"signInViaPopup",c,m).executeNotNull()})).apply(this,arguments)}function Le(){return(Le=(0,w.Z)(function*(h,c,l){const p=(0,B.m9)(h);if((0,Ce._isFirebaseServerApp)(p.auth.app))return Promise.reject(Rt(p.auth,"operation-not-supported-in-this-environment"));In(p.auth,c,zn);const m=Fn(p.auth,l);return new ef(p.auth,"reauthViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}function u_(){return(u_=(0,w.Z)(function*(h,c,l){const p=(0,B.m9)(h);In(p.auth,c,zn);const m=Fn(p.auth,l);return new ef(p.auth,"linkViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}let ef=(()=>{class h extends i_{constructor(l,p,m,v,C){super(l,p,v,C),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var l=this;return(0,w.Z)(function*(){const p=yield l.execute();return re(p,l.auth,"internal-error"),p})()}onExecution(){var l=this;return(0,w.Z)(function*(){Wt(1===l.filter.length,"Popup operations only handle one event");const p=ba();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],p),l.authWindow.associatedEvent=p,l.resolver._originValidation(l.auth).catch(m=>{l.reject(m)}),l.resolver._isIframeWebStorageSupported(l.auth,m=>{m||l.reject(Rt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(Rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const l=()=>{var p,m;this.pollId=null!==(m=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Rt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,s_.get())};l()}}return h.currentPopupAction=null,h})();const aw="pendingRedirect",Ju=new Map;class c_ extends i_{constructor(c,l,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,w.Z)(function*(){let p=Ju.get(l.auth._key());if(!p){try{const v=(yield function Ra(h,c){return tf.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;p=()=>Promise.resolve(v)}catch(m){p=()=>Promise.reject(m)}Ju.set(l.auth._key(),p)}return l.bypassAuthState||Ju.set(l.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,p=this;return(0,w.Z)(function*(){if("signInViaRedirect"===c.type)return l().call(p,c);if("unknown"!==c.type){if(c.eventId){const m=yield p.auth._redirectUserForId(c.eventId);if(m)return p.user=m,l().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function tf(){return(tf=(0,w.Z)(function*(h,c){const l=ht(c),p=te(h);if(!(yield p._isAvailable()))return!1;const m="true"===(yield p._get(l));return yield p._remove(l),m})).apply(this,arguments)}function nf(h,c){return rf.apply(this,arguments)}function rf(){return(rf=(0,w.Z)(function*(h,c){return te(h)._set(ht(c),"true")})).apply(this,arguments)}function sf(h,c){Ju.set(h._key(),c)}function te(h){return Ge(h._redirectPersistence)}function ht(h){return Ie(aw,h.config.apiKey,h.name)}function Pa(h,c,l){return function Ma(h,c,l){return Vn.apply(this,arguments)}(h,c,l)}function Vn(){return(Vn=(0,w.Z)(function*(h,c,l){if((0,Ce._isFirebaseServerApp)(h.app))return Promise.reject(Oe(h));const p=wt(h);In(h,c,zn),yield p._initializationPromise;const m=Fn(p,l);return yield nf(m,p),m._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function l_(h,c,l){return function Xu(h,c,l){return Ti.apply(this,arguments)}(h,c,l)}function Ti(){return(Ti=(0,w.Z)(function*(h,c,l){const p=(0,B.m9)(h);if(In(p.auth,c,zn),(0,Ce._isFirebaseServerApp)(p.auth.app))return Promise.reject(Oe(p.auth));yield p.auth._initializationPromise;const m=Fn(p.auth,l);yield nf(m,p.auth);const v=yield lf(p);return m._openRedirect(p.auth,c,"reauthViaRedirect",v)})).apply(this,arguments)}function af(h,c,l){return function uf(h,c,l){return cf.apply(this,arguments)}(h,c,l)}function cf(){return(cf=(0,w.Z)(function*(h,c,l){const p=(0,B.m9)(h);In(p.auth,c,zn),yield p.auth._initializationPromise;const m=Fn(p.auth,l);yield cl(!1,p,c.providerId),yield nf(m,p.auth);const v=yield lf(p);return m._openRedirect(p.auth,c,"linkViaRedirect",v)})).apply(this,arguments)}function Cl(){return(Cl=(0,w.Z)(function*(h,c){return yield wt(h)._initializationPromise,Gn(h,c,!1)})).apply(this,arguments)}function Gn(h,c){return Li.apply(this,arguments)}function Li(){return(Li=(0,w.Z)(function*(h,c,l=!1){if((0,Ce._isFirebaseServerApp)(h.app))return Promise.reject(Oe(h));const p=wt(h),m=Fn(p,c),C=yield new c_(p,m,l).execute();return C&&!l&&(delete C.user._redirectEventId,yield p._persistUserIfCurrent(C.user),yield p._setRedirectUser(null,c)),C})).apply(this,arguments)}function lf(h){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,w.Z)(function*(h){const c=ba(`${h.uid}:::`);return h._redirectEventId=c,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),c})).apply(this,arguments)}class d_{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(l=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function cw(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return h_(h);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var p;if(c.error&&!h_(c)){const m=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";l.onError(Rt(this.auth,m))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const p=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(df(c))}saveEventToCache(c){this.cachedEventUids.add(df(c)),this.lastProcessedEventTime=Date.now()}}function df(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(c=>c).join("-")}function h_({type:h,error:c}){return"unknown"===h&&"auth/no-auth-event"===c?.code}function Dl(h){return ec.apply(this,arguments)}function ec(){return(ec=(0,w.Z)(function*(h,c={}){return oe(h,"GET","/v1/projects",c)})).apply(this,arguments)}const f_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hf=/^https?/;function Al(){return(Al=(0,w.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:c}=yield Dl(h);for(const l of c)try{if(ff(l))return}catch{}It(h,"unauthorized-domain")})).apply(this,arguments)}function ff(h){const c=ti(),{protocol:l,hostname:p}=new URL(c);if(h.startsWith("chrome-extension://")){const C=new URL(h);return""===C.hostname&&""===p?"chrome-extension:"===l&&h.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&C.hostname===p}if(!hf.test(l))return!1;if(f_.test(h))return p===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(p)}const p_=new F(3e4,6e4);function pf(){const h=mn().___jsl;if(h?.H)for(const c of Object.keys(h.H))if(h.H[c].r=h.H[c].r||[],h.H[c].L=h.H[c].L||[],h.H[c].r=[...h.H[c].L],h.CP)for(let l=0;l<h.CP.length;l++)h.CP[l]=null}let tc=null;const dw=new F(5e3,15e3),hw="__/auth/iframe",Sr="emulator/auth/iframe",xo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},an=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fw(h){const c=h.config;re(c.authDomain,h,"auth-domain-config-required");const l=c.emulator?U(c,Sr):`https://${h.config.authDomain}/${hw}`,p={apiKey:c.apiKey,appName:h.name,v:Ce.SDK_VERSION},m=an.get(h.config.apiHost);m&&(p.eid=m);const v=h._getFrameworks();return v.length&&(p.fw=v.join(",")),`${l}?${(0,B.xO)(p).slice(1)}`}function mf(){return mf=(0,w.Z)(function*(h){const c=yield function gf(h){return tc=tc||function g_(h){return new Promise((c,l)=>{var p,m,v;function C(){pf(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{pf(),l(Rt(h,"network-request-failed"))},timeout:p_.get()})}if(null!==(m=null===(p=mn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==m&&m.Iframe)c(gapi.iframes.getContext());else{if(null===(v=mn().gapi)||void 0===v||!v.load){const P=OI("iframefcb");return mn()[P]=()=>{gapi.load?C():l(Rt(h,"network-request-failed"))},hm(`${function xI(){return el.gapiScript}()}?onload=${P}`).catch($=>l($))}C()}}).catch(c=>{throw tc=null,c})}(h),tc}(h),l=mn().gapi;return re(l,h,"internal-error"),c.open({where:document.body,url:fw(h),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xo,dontclear:!0},p=>new Promise(function(){var m=(0,w.Z)(function*(v,C){yield p.restyle({setHideOnLeave:!1});const P=Rt(h,"network-request-failed"),$=mn().setTimeout(()=>{C(P)},dw.get());function de(){mn().clearTimeout($),v(p)}p.ping(de).then(de,()=>{C(P)})});return function(v,C){return m.apply(this,arguments)}}()))}),mf.apply(this,arguments)}const gw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class y_{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Pl="__/auth/handler",_f="emulator/auth/handler",v_=encodeURIComponent("fac");function Ml(h,c,l,p,m,v){return yf.apply(this,arguments)}function yf(){return(yf=(0,w.Z)(function*(h,c,l,p,m,v){re(h.config.authDomain,h,"auth-domain-config-required"),re(h.config.apiKey,h,"invalid-api-key");const C={apiKey:h.config.apiKey,appName:h.name,authType:l,redirectUrl:p,v:Ce.SDK_VERSION,eventId:m};if(c instanceof zn){c.setDefaultLanguage(h.languageCode),C.providerId=c.providerId||"",(0,B.xb)(c.getCustomParameters())||(C.customParameters=JSON.stringify(c.getCustomParameters()));for(const[we,Te]of Object.entries(v||{}))C[we]=Te}if(c instanceof ct){const we=c.getScopes().filter(Te=>""!==Te);we.length>0&&(C.scopes=we.join(","))}h.tenantId&&(C.tid=h.tenantId);const P=C;for(const we of Object.keys(P))void 0===P[we]&&delete P[we];const $=yield h._getAppCheckToken(),de=$?`#${v_}=${encodeURIComponent($)}`:"";return`${function Na({config:h}){return h.emulator?U(h,_f):`https://${h.authDomain}/${Pl}`}(h)}?${(0,B.xO)(P).slice(1)}${de}`})).apply(this,arguments)}const Oo="webStorageSupport",_w=class mw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kn,this._completeRedirectFn=Gn,this._overrideRedirectResult=sf}_openPopup(c,l,p,m){var v=this;return(0,w.Z)(function*(){var C;Wt(null===(C=v.eventManagers[c._key()])||void 0===C?void 0:C.manager,"_initialize() not called before _openPopup()");const P=yield Ml(c,l,p,ti(),m);return function Sl(h,c,l,p=500,m=600){const v=Math.max((window.screen.availHeight-m)/2,0).toString(),C=Math.max((window.screen.availWidth-p)/2,0).toString();let P="";const $=Object.assign(Object.assign({},gw),{width:p.toString(),height:m.toString(),top:v,left:C}),de=(0,B.z$)().toLowerCase();l&&(P=Ct(de)?"_blank":l),js(de)&&(c=c||"http://localhost",$.scrollbars="yes");const we=Object.entries($).reduce((qt,[Di,Ul])=>`${qt}${Di}=${Ul},`,"");if(function z(h=(0,B.z$)()){var c;return O(h)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(de)&&"_self"!==P)return function Rl(h,c){const l=document.createElement("a");l.href=h,l.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(p)}(c||"",P),new y_(null);const Te=window.open(c||"",P,we);re(Te,h,"popup-blocked");try{Te.focus()}catch{}return new y_(Te)}(c,P,ba())})()}_openRedirect(c,l,p,m){var v=this;return(0,w.Z)(function*(){return yield v._originValidation(c),function $m(h){mn().location.href=h}(yield Ml(c,l,p,ti(),m)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:m,promise:v}=this.eventManagers[l];return m?Promise.resolve(m):(Wt(v,"If manager is not set, promise should be"),v)}const p=this.initAndGetManager(c);return this.eventManagers[l]={promise:p},p.catch(()=>{delete this.eventManagers[l]}),p}initAndGetManager(c){var l=this;return(0,w.Z)(function*(){const p=yield function pw(h){return mf.apply(this,arguments)}(c),m=new d_(c);return p.register("authEvent",v=>(re(v?.authEvent,c,"invalid-auth-event"),{status:m.onEvent(v.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:m},l.iframes[c._key()]=p,m})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(Oo,{type:Oo},m=>{var v;const C=null===(v=m?.[0])||void 0===v?void 0:v[Oo];void 0!==C&&l(!!C),It(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function lw(h){return Al.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return ge()||Nu()||O()}};class vf{constructor(c){this.factorId=c}_process(c,l,p){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,p);case"signin":return this._finalizeSignIn(c,l.credential);default:return sn("unexpected MultiFactorSessionType")}}}class E_ extends vf{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new E_(c)}_finalizeEnroll(c,l,p){return function iR(h,c){return oe(h,"POST","/v2/accounts/mfaEnrollment:finalize",j(h,c))}(c,{idToken:l,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function Qm(h,c){return oe(h,"POST","/v2/accounts/mfaSignIn:finalize",j(h,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let yw=(()=>{class h{constructor(){}static assertion(l){return E_._fromCredential(l)}}return h.FACTOR_ID="phone",h})();var Oa="@firebase/auth";class nc{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,w.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ss(){return window}(0,B.Pz)("authIdTokenMaxAge"),function GS(h){el=h}({loadJS:h=>new Promise((c,l)=>{const p=document.createElement("script");p.setAttribute("src",h),p.onload=c,p.onerror=m=>{const v=Rt("internal-error");v.customData=m,l(v)},p.type="text/javascript",p.charset="UTF-8",function Iw(){var h,c;return null!==(c=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==c?c:document}().appendChild(p)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Nl(h){(0,Ce._registerComponent)(new fn.wA("auth",(c,{options:l})=>{const p=c.getProvider("app").getImmediate(),m=c.getProvider("heartbeat"),v=c.getProvider("app-check-internal"),{apiKey:C,authDomain:P}=p.options;re(C&&!C.includes(":"),"invalid-api-key",{appName:p.name});const $={apiKey:C,authDomain:P,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rt(h)},de=new zS(p,m,v,$);return function gm(h,c){const l=c?.persistence||[],p=(Array.isArray(l)?l:[l]).map(Ge);c?.errorMap&&h._updateErrorMap(c.errorMap),h._initializeWithPersistence(p,c?.popupRedirectResolver)}(de,l),de},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,p)=>{c.getProvider("auth-internal").initialize()})),(0,Ce._registerComponent)(new fn.wA("auth-internal",c=>{const l=wt(c.getProvider("auth").getImmediate());return new nc(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ce.registerVersion)(Oa,"1.7.0",function Ef(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(h)),(0,Ce.registerVersion)(Oa,"1.7.0","esm2017")}("Browser");function ka(){return ka=(0,w.Z)(function*(h,c,l){var p;const{BuildInfo:m}=ss();Wt(c.sessionId,"AuthEvent did not contain a session ID");const v=yield function ww(h){return Fa.apply(this,arguments)}(c.sessionId),C={};return O()?C.ibi=m.packageName:Es()?C.apn=m.packageName:It(h,"operation-not-supported-in-this-environment"),m.displayName&&(C.appDisplayName=m.displayName),C.sessionId=v,Ml(h,l,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,C)}),ka.apply(this,arguments)}function Cf(){return(Cf=(0,w.Z)(function*(h){const{BuildInfo:c}=ss(),l={};O()?l.iosBundleId=c.packageName:Es()?l.androidPackageName=c.packageName:It(h,"operation-not-supported-in-this-environment"),yield Dl(h,l)})).apply(this,arguments)}function xl(){return(xl=(0,w.Z)(function*(h,c,l){const{cordova:p}=ss();let m=()=>{};try{yield new Promise((v,C)=>{let P=null;function $(){var Te;v();const qt=null===(Te=p.plugins.browsertab)||void 0===Te?void 0:Te.close;"function"==typeof qt&&qt(),"function"==typeof l?.close&&l.close()}function de(){P||(P=window.setTimeout(()=>{C(Rt(h,"redirect-cancelled-by-user"))},2e3))}function we(){"visible"===document?.visibilityState&&de()}c.addPassiveListener($),document.addEventListener("resume",de,!1),Es()&&document.addEventListener("visibilitychange",we,!1),m=()=>{c.removePassiveListener($),document.removeEventListener("resume",de,!1),document.removeEventListener("visibilitychange",we,!1),P&&window.clearTimeout(P)}})}finally{m()}})).apply(this,arguments)}function Fa(){return(Fa=(0,w.Z)(function*(h){const c=function ko(h){if(Wt(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const c=new ArrayBuffer(h.length),l=new Uint8Array(c);for(let p=0;p<h.length;p++)l[p]=h.charCodeAt(p);return l}(h),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class S_ extends d_{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,w.Z)(function*(){yield c.initPromise})()}}function P_(h){return nr.apply(this,arguments)}function nr(){return(nr=(0,w.Z)(function*(h){const c=yield ic()._get(Df(h));return c&&(yield ic()._remove(Df(h))),c})).apply(this,arguments)}function rr(){const h=[];for(let l=0;l<20;l++){const p=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return h.join("")}function ic(){return Ge(bn)}function Df(h){return Ie("authEvent",h.config.apiKey,h.name)}function Rs(h){if(!h?.includes("?"))return{};const[c,...l]=h.split("?");return(0,B.zd)(l.join("?"))}const N_=class La{constructor(){this._redirectPersistence=kn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gn,this._overrideRedirectResult=sf}_initialize(c){var l=this;return(0,w.Z)(function*(){const p=c._key();let m=l.eventManagers.get(p);return m||(m=new S_(c),l.eventManagers.set(p,m),l.attachCallbackListeners(c,m)),m})()}_openPopup(c){It(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,p,m){var v=this;return(0,w.Z)(function*(){!function b_(h){var c,l,p,m,v,C,P,$,de,we;const Te=ss();re("function"==typeof(null===(c=Te?.universalLinks)||void 0===c?void 0:c.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(typeof(null===(l=Te?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(v=null===(m=null===(p=Te?.cordova)||void 0===p?void 0:p.plugins)||void 0===m?void 0:m.browsertab)||void 0===v?void 0:v.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===($=null===(P=null===(C=Te?.cordova)||void 0===C?void 0:C.plugins)||void 0===P?void 0:P.browsertab)||void 0===$?void 0:$.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(we=null===(de=Te?.cordova)||void 0===de?void 0:de.InAppBrowser)||void 0===we?void 0:we.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const C=yield v._initialize(c);yield C.initialized(),C.resetRedirect(),function uw(){Ju.clear()}(),yield v._originValidation(c);const P=function R_(h,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:rr(),postBody:null,tenantId:h.tenantId,error:Rt(h,"no-auth-event")}}(c,p,m);yield function rc(h,c){return ic()._set(Df(h),c)}(c,P);const $=yield function C_(h,c,l){return ka.apply(this,arguments)}(c,P,l),de=yield function D_(h){const{cordova:c}=ss();return new Promise(l=>{c.plugins.browsertab.isAvailable(p=>{let m=null;p?c.plugins.browsertab.openUrl(h):m=c.InAppBrowser.open(h,function I(h=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),l(m)})})}($);return function A_(h,c,l){return xl.apply(this,arguments)}(c,C,de)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Tf(h){return Cf.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:p,handleOpenURL:m,BuildInfo:v}=ss(),C=setTimeout((0,w.Z)(function*(){yield P_(c),l.onEvent(kl())}),500),P=function(){var we=(0,w.Z)(function*(Te){clearTimeout(C);const qt=yield P_(c);let Di=null;qt&&Te?.url&&(Di=function Cw(h,c){var l,p;const m=function Ol(h){const c=Rs(h),l=c.link?decodeURIComponent(c.link):void 0,p=Rs(l).link,m=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Rs(m).link||m||p||l||h}(c);if(m.includes("/__/auth/callback")){const v=Rs(m),C=v.firebaseError?function M_(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(v.firebaseError)):null,P=null===(p=null===(l=C?.code)||void 0===l?void 0:l.split("auth/"))||void 0===p?void 0:p[1],$=P?Rt(P):null;return $?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:$,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:m,postBody:null}}return null}(qt,Te.url)),l.onEvent(Di||kl())});return function(qt){return we.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,P);const $=m,de=`${v.packageName.toLowerCase()}://`;ss().handleOpenURL=function(){var we=(0,w.Z)(function*(Te){if(Te.toLowerCase().startsWith(de)&&P({url:Te}),"function"==typeof $)try{$(Te)}catch(qt){console.error(qt)}});return function(Te){return we.apply(this,arguments)}}()}};function kl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Rt("no-auth-event")}}function Fl(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function Aw(h=(0,B.z$)()){return!("file:"!==Fl()&&"ionic:"!==Fl()&&"capacitor:"!==Fl()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function x_(){try{const h=self.localStorage,c=ba();if(h)return h.setItem(c,"1"),h.removeItem(c),!function bw(h=(0,B.z$)()){return function yR(){return(0,B.w1)()&&11===document?.documentMode}()||function Ba(h=(0,B.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,B.hl)()}catch{return Cn()&&(0,B.hl)()}return!1}function Cn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Af(){return(function mR(){return"http:"===Fl()||"https:"===Fl()}()||(0,B.ru)()||Aw())&&!function _R(){return(0,B.b$)()||(0,B.UG)()}()&&x_()&&!Cn()}function ja(){return Aw()&&typeof document<"u"}function Br(){return(Br=(0,w.Z)(function*(){return!!ja()&&new Promise(h=>{const c=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),h(!0)})})})).apply(this,arguments)}const jr={LOCAL:"local",NONE:"none",SESSION:"session"},Qs=re,Ha="persistence";function O_(h){return bf.apply(this,arguments)}function bf(){return(bf=(0,w.Z)(function*(h){yield h._initializationPromise;const c=$r(),l=Ie(Ha,h.config.apiKey,h.name);c&&c.setItem(l,h._getPersistence())})).apply(this,arguments)}function $r(){var h;try{return(null===(h=function $a(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const Sf=re;class si{constructor(){this.browserResolver=Ge(_w),this.cordovaResolver=Ge(N_),this.underlyingResolver=null,this._redirectPersistence=kn,this._completeRedirectFn=Gn,this._overrideRedirectResult=sf}_initialize(c){var l=this;return(0,w.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,p,m){var v=this;return(0,w.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openPopup(c,l,p,m)})()}_openRedirect(c,l,p,m){var v=this;return(0,w.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openRedirect(c,l,p,m)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return ja()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Sf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,w.Z)(function*(){if(c.underlyingResolver)return;const l=yield function Sw(){return Br.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function Pw(h){return h.unwrap()}function Mw(h){return F_(h)}function F_(h){const{_tokenResponse:c}=h instanceof B.ZR?h.customData:h;if(!c)return null;if(!(h instanceof B.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return is.credentialFromResult(h);const l=c.providerId;if(!l||l===ut.PASSWORD)return null;let p;switch(l){case ut.GOOGLE:p=sl;break;case ut.FACEBOOK:p=il;break;case ut.GITHUB:p=Nh;break;case ut.TWITTER:p=ol;break;default:const{oauthIdToken:m,oauthAccessToken:v,oauthTokenSecret:C,pendingToken:P,nonce:$}=c;return v||C||m||P?P?l.startsWith("saml.")?es._create(l,P):Dr._fromParams({providerId:l,signInMethod:l,pendingToken:P,idToken:m,accessToken:v}):new ws(l).credential({idToken:m,accessToken:v,rawNonce:$}):null}return h instanceof B.ZR?p.credentialFromError(h):p.credentialFromResult(h)}function Hr(h,c){return c.catch(l=>{throw l instanceof B.ZR&&function Nw(h,c){var l;const p=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new Mf(h,function nR(h,c){var l;const p=(0,B.m9)(h),m=c;return re(c.customData.operationType,p,"argument-error"),re(null===(l=m.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,p,"argument-error"),Lm._fromError(p,m)}(h,c));else if(p){const m=F_(c),v=c;m&&(v.credential=m,v.tenantId=p.tenantId||void 0,v.email=p.email||void 0,v.phoneNumber=p.phoneNumber||void 0)}}(h,l),l}).then(l=>{const m=l.user;return{operationType:l.operationType,credential:Mw(l),additionalUserInfo:qh(l),user:Ci.getOrCreate(m)}})}function Rf(h,c){return Pf.apply(this,arguments)}function Pf(){return(Pf=(0,w.Z)(function*(h,c){const l=yield c;return{verificationId:l.verificationId,confirm:p=>Hr(h,l.confirm(p))}})).apply(this,arguments)}class Mf{constructor(c,l){this.resolver=l,this.auth=function k_(h){return h.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Hr(Pw(this.auth),this.resolver.resolveSignIn(c))}}class Ci{constructor(c){this._delegate=c,this.multiFactor=function aR(h){const c=(0,B.m9)(h);return _l.has(c)||_l.set(c,ml._fromUser(c)),_l.get(c)}(c)}static getOrCreate(c){return Ci.USER_MAP.has(c)||Ci.USER_MAP.set(c,new Ci(c)),Ci.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,w.Z)(function*(){return Hr(l.auth,xm(l._delegate,c))})()}linkWithPhoneNumber(c,l){var p=this;return(0,w.Z)(function*(){return Rf(p.auth,function r_(h,c,l){return El.apply(this,arguments)}(p._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,w.Z)(function*(){return Hr(l.auth,function a_(h,c,l){return u_.apply(this,arguments)}(l._delegate,c,si))})()}linkWithRedirect(c){var l=this;return(0,w.Z)(function*(){return yield O_(wt(l.auth)),af(l._delegate,c,si)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,w.Z)(function*(){return Hr(l.auth,Om(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return Rf(this.auth,function Ht(h,c,l){return Yu.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return Hr(this.auth,function ow(h,c,l){return Le.apply(this,arguments)}(this._delegate,c,si))}reauthenticateWithRedirect(c){var l=this;return(0,w.Z)(function*(){return yield O_(wt(l.auth)),l_(l._delegate,c,si)})()}sendEmailVerification(c){return function ts(h,c){return Ro.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,w.Z)(function*(){return yield function ki(h,c){return Fh.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function JS(h,c){const l=(0,B.m9)(h);return(0,Ce._isFirebaseServerApp)(l.auth.app)?Promise.reject(Oe(l.auth)):Hh(l,c,null)}(this._delegate,c)}updatePassword(c){return function $h(h,c){return Hh((0,B.m9)(h),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function rw(h,c){return Il.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Hu(h,c){return it.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function Fm(h,c,l){return ns.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ci.USER_MAP=new WeakMap;const sc=re;let qa=(()=>{class h{constructor(l,p){if(this.app=l,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m}=l.options;sc(m,"invalid-api-key",{appName:l.name}),sc(m,"invalid-api-key",{appName:l.name});const v=typeof window<"u"?si:void 0;this._delegate=p.initialize({options:{persistence:Vl(m,l.name),popupRedirectResolver:v}}),this._delegate._updateErrorMap(Yn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ci.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,p){!function mm(h,c,l){const p=wt(h);re(p._canInitEmulator,p,"emulator-config-failed"),re(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const m=!!l?.disableWarnings,v=xu(c),{host:C,port:P}=function tl(h){const c=xu(h),l=/(\/\/)?([^?#/]+)/.exec(h.substr(c.length));if(!l)return{host:"",port:null};const p=l[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(p);if(m){const v=m[1];return{host:v,port:nl(p.substr(v.length+1))}}{const[v,C]=p.split(":");return{host:v,port:nl(C)}}}(c);p.config.emulator={url:`${v}//${C}${null===P?"":`:${P}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:C,port:P,protocol:v.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function _m(){function h(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,l,p)}applyActionCode(l){return function gn(h,c){return me.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return Ke(this._delegate,l)}confirmPasswordReset(l,p){return function qI(h,c,l){return jh.apply(this,arguments)}(this._delegate,l,p)}createUserWithEmailAndPassword(l,p){var m=this;return(0,w.Z)(function*(){return Hr(m._delegate,function fr(h,c,l){return $s.apply(this,arguments)}(m._delegate,l,p))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function $u(h,c){return zs.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function qe(h,c){const l=ii.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,w.Z)(function*(){sc(Af(),l._delegate,"operation-not-supported-in-this-environment");const p=yield function dR(h,c){return Cl.apply(this,arguments)}(l._delegate,si);return p?Hr(l._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function Ua(h,c){wt(h)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,p,m){const{next:v,error:C,complete:P}=V_(l,p,m);return this._delegate.onAuthStateChanged(v,C,P)}onIdTokenChanged(l,p,m){const{next:v,error:C,complete:P}=V_(l,p,m);return this._delegate.onIdTokenChanged(v,C,P)}sendSignInLinkToEmail(l,p){return function Hs(h,c,l){return qs.apply(this,arguments)}(this._delegate,l,p)}sendPasswordResetEmail(l,p){return function km(h,c,l){return wa.apply(this,arguments)}(this._delegate,l,p||void 0)}setPersistence(l){var p=this;return(0,w.Z)(function*(){let m;switch(function Rw(h,c){Qs(Object.values(jr).includes(c),h,"invalid-persistence-type"),(0,B.b$)()?Qs(c!==jr.SESSION,h,"unsupported-persistence-type"):(0,B.UG)()?Qs(c===jr.NONE,h,"unsupported-persistence-type"):Cn()?Qs(c===jr.NONE||c===jr.LOCAL&&(0,B.hl)(),h,"unsupported-persistence-type"):Qs(c===jr.NONE||x_(),h,"unsupported-persistence-type")}(p._delegate,l),l){case jr.SESSION:m=kn;break;case jr.LOCAL:m=(yield Ge(Sa)._isAvailable())?Sa:bn;break;case jr.NONE:m=qn;break;default:return It("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(m)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return Hr(this._delegate,function Sm(h){return kh.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return Hr(this._delegate,dl(this._delegate,l))}signInWithCustomToken(l){return Hr(this._delegate,function je(h,c){return hr.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,p){return Hr(this._delegate,function Tn(h,c,l){return(0,Ce._isFirebaseServerApp)(h.app)?Promise.reject(Oe(h)):dl((0,B.m9)(h),Lr.credential(c,l)).catch(function(){var p=(0,w.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&Ar(h),m});return function(m){return p.apply(this,arguments)}}())}(this._delegate,l,p))}signInWithEmailLink(l,p){return Hr(this._delegate,function ju(h,c,l){return pl.apply(this,arguments)}(this._delegate,l,p))}signInWithPhoneNumber(l,p){return Rf(this._delegate,function nw(h,c,l){return wi.apply(this,arguments)}(this._delegate,l,p))}signInWithPopup(l){var p=this;return(0,w.Z)(function*(){return sc(Af(),p._delegate,"operation-not-supported-in-this-environment"),Hr(p._delegate,function o_(h,c,l){return Tl.apply(this,arguments)}(p._delegate,l,si))})()}signInWithRedirect(l){var p=this;return(0,w.Z)(function*(){return sc(Af(),p._delegate,"operation-not-supported-in-this-environment"),yield O_(p._delegate),Pa(p._delegate,l,si)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function Fi(h,c){return So.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=jr,h})();function V_(h,c,l){let p=h;"function"!=typeof h&&({next:p,error:c,complete:l}=h);const m=p;return{next:C=>m(C&&Ci.getOrCreate(C)),error:c,complete:l}}function Vl(h,c){const l=function vR(h,c){const l=$r();if(!l)return[];const p=Ie(Ha,h,c);switch(l.getItem(p)){case jr.NONE:return[qn];case jr.LOCAL:return[Sa,kn];case jr.SESSION:return[kn];default:return[]}}(h,c);if(typeof self<"u"&&!l.includes(Sa)&&l.push(Sa),typeof window<"u")for(const p of[bn,kn])l.includes(p)||l.push(p);return l.includes(qn)||l.push(qn),l}class Nf{constructor(){this.providerId="phone",this._delegate=new is(Pw(Ue.Z.auth()))}static credential(c,l){return is.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}Nf.PHONE_SIGN_IN_METHOD=is.PHONE_SIGN_IN_METHOD,Nf.PROVIDER_ID=is.PROVIDER_ID;const L_=re;class xf{constructor(c,l,p=Ue.Z.app()){var m;L_(null===(m=p.options)||void 0===m?void 0:m.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new n_(p.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function U_(h){h.INTERNAL.registerComponent(new fn.wA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new qa(l,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Lr,FacebookAuthProvider:il,GithubAuthProvider:Nh,GoogleAuthProvider:sl,OAuthProvider:ws,SAMLAuthProvider:Uu,PhoneAuthProvider:Nf,PhoneMultiFactorGenerator:yw,RecaptchaVerifier:xf,TwitterAuthProvider:ol,Auth:qa,AuthCredential:va,Error:B.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.5.5")}(Ue.Z)},861:(gs,Zn,Qe)=>{function w(Ce,B,mt,rn,fn,Qn,ut){try{var J=Ce[Qn](ut),se=J.value}catch(be){return void mt(be)}J.done?B(se):Promise.resolve(se).then(rn,fn)}function Ue(Ce){return function(){var B=this,mt=arguments;return new Promise(function(rn,fn){var Qn=Ce.apply(B,mt);function ut(se){w(Qn,rn,fn,ut,J,"next",se)}function J(se){w(Qn,rn,fn,ut,J,"throw",se)}ut(void 0)})}}Qe.d(Zn,{Z:()=>Ue})},582:(gs,Zn,Qe)=>{function B(F,U){var L={};for(var G in F)Object.prototype.hasOwnProperty.call(F,G)&&U.indexOf(G)<0&&(L[G]=F[G]);if(null!=F&&"function"==typeof Object.getOwnPropertySymbols){var ue=0;for(G=Object.getOwnPropertySymbols(F);ue<G.length;ue++)U.indexOf(G[ue])<0&&Object.prototype.propertyIsEnumerable.call(F,G[ue])&&(L[G[ue]]=F[G[ue]])}return L}function be(F,U,L,G){return new(L||(L=Promise))(function(j,oe){function lt(nt){try{Ne(G.next(nt))}catch(Yt){oe(Yt)}}function Ae(nt){try{Ne(G.throw(nt))}catch(Yt){oe(Yt)}}function Ne(nt){nt.done?j(nt.value):function ue(j){return j instanceof L?j:new L(function(oe){oe(j)})}(nt.value).then(lt,Ae)}Ne((G=G.apply(F,U||[])).next())})}function Qt(F){return this instanceof Qt?(this.v=F,this):new Qt(F)}function It(F,U,L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,G=L.apply(F,U||[]),j=[];return ue={},oe("next"),oe("throw"),oe("return"),ue[Symbol.asyncIterator]=function(){return this},ue;function oe(Ut){G[Ut]&&(ue[Ut]=function(ar){return new Promise(function(kr,jn){j.push([Ut,ar,kr,jn])>1||lt(Ut,ar)})})}function lt(Ut,ar){try{!function Ae(Ut){Ut.value instanceof Qt?Promise.resolve(Ut.value.v).then(Ne,nt):Yt(j[0][2],Ut)}(G[Ut](ar))}catch(kr){Yt(j[0][3],kr)}}function Ne(Ut){lt("next",Ut)}function nt(Ut){lt("throw",Ut)}function Yt(Ut,ar){Ut(ar),j.shift(),j.length&&lt(j[0][0],j[0][1])}}function wr(F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var L,U=F[Symbol.asyncIterator];return U?U.call(F):(F=function Et(F){var U="function"==typeof Symbol&&Symbol.iterator,L=U&&F[U],G=0;if(L)return L.call(F);if(F&&"number"==typeof F.length)return{next:function(){return F&&G>=F.length&&(F=void 0),{value:F&&F[G++],done:!F}}};throw new TypeError(U?"Object is not iterable.":"Symbol.iterator is not defined.")}(F),L={},G("next"),G("throw"),G("return"),L[Symbol.asyncIterator]=function(){return this},L);function G(j){L[j]=F[j]&&function(oe){return new Promise(function(lt,Ae){!function ue(j,oe,lt,Ae){Promise.resolve(Ae).then(function(Ne){j({value:Ne,done:lt})},oe)}(lt,Ae,(oe=F[j](oe)).done,oe.value)})}}}Qe.d(Zn,{FC:()=>It,KL:()=>wr,_T:()=>B,mG:()=>be,qq:()=>Qt}),"function"==typeof SuppressedError&&SuppressedError}},gs=>{gs(gs.s=272)}]);